function Uy(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function rp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var np={exports:{}},to={},sp={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xa=Symbol.for("react.element"),By=Symbol.for("react.portal"),Vy=Symbol.for("react.fragment"),Wy=Symbol.for("react.strict_mode"),qy=Symbol.for("react.profiler"),Hy=Symbol.for("react.provider"),Ky=Symbol.for("react.context"),Gy=Symbol.for("react.forward_ref"),Qy=Symbol.for("react.suspense"),Jy=Symbol.for("react.memo"),Xy=Symbol.for("react.lazy"),tu=Symbol.iterator;function Yy(e){return e===null||typeof e!="object"?null:(e=tu&&e[tu]||e["@@iterator"],typeof e=="function"?e:null)}var ap={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function hs(e,t,r){this.props=e,this.context=t,this.refs=op,this.updater=r||ap}hs.prototype.isReactComponent={};hs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lp(){}lp.prototype=hs.prototype;function Oc(e,t,r){this.props=e,this.context=t,this.refs=op,this.updater=r||ap}var Ic=Oc.prototype=new lp;Ic.constructor=Oc;ip(Ic,hs.prototype);Ic.isPureReactComponent=!0;var ru=Array.isArray,cp=Object.prototype.hasOwnProperty,Ac={current:null},dp={key:!0,ref:!0,__self:!0,__source:!0};function up(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)cp.call(t,n)&&!dp.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];s.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:xa,type:e,key:a,ref:o,props:s,_owner:Ac.current}}function Zy(e,t){return{$$typeof:xa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jc(e){return typeof e=="object"&&e!==null&&e.$$typeof===xa}function ev(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nu=/\/+/g;function Io(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ev(""+e.key):t.toString(36)}function ii(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xa:case By:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Io(o,0):n,ru(s)?(r="",e!=null&&(r=e.replace(nu,"$&/")+"/"),ii(s,t,r,"",function(u){return u})):s!=null&&(jc(s)&&(s=Zy(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ru(e))for(var l=0;l<e.length;l++){a=e[l];var d=n+Io(a,l);o+=ii(a,t,r,d,s)}else if(d=Yy(e),typeof d=="function")for(e=d.call(e),l=0;!(a=e.next()).done;)a=a.value,d=n+Io(a,l++),o+=ii(a,t,r,d,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Aa(e,t,r){if(e==null)return e;var n=[],s=0;return ii(e,n,"","",function(a){return t.call(r,a,s++)}),n}function tv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},oi={transition:null},rv={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:oi,ReactCurrentOwner:Ac};function mp(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Aa,forEach:function(e,t,r){Aa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!jc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=hs;le.Fragment=Vy;le.Profiler=qy;le.PureComponent=Oc;le.StrictMode=Wy;le.Suspense=Qy;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rv;le.act=mp;le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ip({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Ac.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)cp.call(t,d)&&!dp.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:xa,type:e.type,key:s,ref:a,props:n,_owner:o}};le.createContext=function(e){return e={$$typeof:Ky,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hy,_context:e},e.Consumer=e};le.createElement=up;le.createFactory=function(e){var t=up.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:Gy,render:e}};le.isValidElement=jc;le.lazy=function(e){return{$$typeof:Xy,_payload:{_status:-1,_result:e},_init:tv}};le.memo=function(e,t){return{$$typeof:Jy,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=oi.transition;oi.transition={};try{e()}finally{oi.transition=t}};le.unstable_act=mp;le.useCallback=function(e,t){return gt.current.useCallback(e,t)};le.useContext=function(e){return gt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};le.useEffect=function(e,t){return gt.current.useEffect(e,t)};le.useId=function(){return gt.current.useId()};le.useImperativeHandle=function(e,t,r){return gt.current.useImperativeHandle(e,t,r)};le.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return gt.current.useMemo(e,t)};le.useReducer=function(e,t,r){return gt.current.useReducer(e,t,r)};le.useRef=function(e){return gt.current.useRef(e)};le.useState=function(e){return gt.current.useState(e)};le.useSyncExternalStore=function(e,t,r){return gt.current.useSyncExternalStore(e,t,r)};le.useTransition=function(){return gt.current.useTransition()};le.version="18.3.1";sp.exports=le;var x=sp.exports;const ro=rp(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=x,sv=Symbol.for("react.element"),av=Symbol.for("react.fragment"),iv=Object.prototype.hasOwnProperty,ov=nv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lv={key:!0,ref:!0,__self:!0,__source:!0};function pp(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)iv.call(t,n)&&!lv.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:sv,type:e,key:a,ref:o,props:s,_owner:ov.current}}to.Fragment=av;to.jsx=pp;to.jsxs=pp;np.exports=to;var Dc=np.exports;const Re=Dc.Fragment,i=Dc.jsx,c=Dc.jsxs;var yl={},hp={exports:{}},Lt={},fp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,L){var j=D.length;D.push(L);e:for(;0<j;){var te=j-1>>>1,Z=D[te];if(0<s(Z,L))D[te]=L,D[j]=Z,j=te;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var L=D[0],j=D.pop();if(j!==L){D[0]=j;e:for(var te=0,Z=D.length,U=Z>>>1;te<U;){var V=2*(te+1)-1,de=D[V],ge=V+1,Ce=D[ge];if(0>s(de,j))ge<Z&&0>s(Ce,de)?(D[te]=Ce,D[ge]=j,te=ge):(D[te]=de,D[V]=j,te=V);else if(ge<Z&&0>s(Ce,j))D[te]=Ce,D[ge]=j,te=ge;else break e}}return L}function s(D,L){var j=D.sortIndex-L.sortIndex;return j!==0?j:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],p=1,h=null,m=3,y=!1,v=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(D){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=D)n(u),L.sortIndex=L.expirationTime,t(d,L);else break;L=r(u)}}function _(D){if(b=!1,g(D),!v)if(r(d)!==null)v=!0,J(E);else{var L=r(u);L!==null&&ne(_,L.startTime-D)}}function E(D,L){v=!1,b&&(b=!1,w(C),C=-1),y=!0;var j=m;try{for(g(L),h=r(d);h!==null&&(!(h.expirationTime>L)||D&&!I());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var Z=te(h.expirationTime<=L);L=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===r(d)&&n(d),g(L)}else n(d);h=r(d)}if(h!==null)var U=!0;else{var V=r(u);V!==null&&ne(_,V.startTime-L),U=!1}return U}finally{h=null,m=j,y=!1}}var S=!1,O=null,C=-1,P=5,N=-1;function I(){return!(e.unstable_now()-N<P)}function A(){if(O!==null){var D=e.unstable_now();N=D;var L=!0;try{L=O(!0,D)}finally{L?T():(S=!1,O=null)}}else S=!1}var T;if(typeof f=="function")T=function(){f(A)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,$=R.port2;R.port1.onmessage=A,T=function(){$.postMessage(null)}}else T=function(){k(A,0)};function J(D){O=D,S||(S=!0,T())}function ne(D,L){C=k(function(){D(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,J(E))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var j=m;m=L;try{return D()}finally{m=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=m;m=D;try{return L()}finally{m=j}},e.unstable_scheduleCallback=function(D,L,j){var te=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?te+j:te):j=te,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=j+Z,D={id:p++,callback:L,priorityLevel:D,startTime:j,expirationTime:Z,sortIndex:-1},j>te?(D.sortIndex=j,t(u,D),r(d)===null&&D===r(u)&&(b?(w(C),C=-1):b=!0,ne(_,j-te))):(D.sortIndex=Z,t(d,D),v||y||(v=!0,J(E))),D},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(D){var L=m;return function(){var j=m;m=L;try{return D.apply(this,arguments)}finally{m=j}}}})(gp);fp.exports=gp;var cv=fp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=x,Dt=cv;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yp=new Set,Js={};function En(e,t){ss(e,t),ss(e+"Capture",t)}function ss(e,t){for(Js[e]=t,e=0;e<t.length;e++)yp.add(t[e])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vl=Object.prototype.hasOwnProperty,uv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,su={},au={};function mv(e){return vl.call(au,e)?!0:vl.call(su,e)?!1:uv.test(e)?au[e]=!0:(su[e]=!0,!1)}function pv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hv(e,t,r,n){if(t===null||typeof t>"u"||pv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yt(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Rc=/[\-:]([a-z])/g;function Lc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Rc,Lc);rt[t]=new yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Rc,Lc);rt[t]=new yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Rc,Lc);rt[t]=new yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new yt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mc(e,t,r,n){var s=rt.hasOwnProperty(t)?rt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hv(t,r,s,n)&&(r=null),n||s===null?mv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Er=dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),$n=Symbol.for("react.portal"),Un=Symbol.for("react.fragment"),Fc=Symbol.for("react.strict_mode"),xl=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),xp=Symbol.for("react.context"),$c=Symbol.for("react.forward_ref"),wl=Symbol.for("react.suspense"),bl=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),wp=Symbol.for("react.offscreen"),iu=Symbol.iterator;function Cs(e){return e===null||typeof e!="object"?null:(e=iu&&e[iu]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,Ao;function Ds(e){if(Ao===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ao=t&&t[1]||""}return`
`+Ao+e}var jo=!1;function Do(e,t){if(!e||jo)return"";jo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var d=`
`+s[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{jo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ds(e):""}function fv(e){switch(e.tag){case 5:return Ds(e.type);case 16:return Ds("Lazy");case 13:return Ds("Suspense");case 19:return Ds("SuspenseList");case 0:case 2:case 15:return e=Do(e.type,!1),e;case 11:return e=Do(e.type.render,!1),e;case 1:return e=Do(e.type,!0),e;default:return""}}function _l(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Un:return"Fragment";case $n:return"Portal";case xl:return"Profiler";case Fc:return"StrictMode";case wl:return"Suspense";case bl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xp:return(e.displayName||"Context")+".Consumer";case vp:return(e._context.displayName||"Context")+".Provider";case $c:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uc:return t=e.displayName||null,t!==null?t:_l(e.type)||"Memo";case Rr:t=e._payload,e=e._init;try{return _l(e(t))}catch{}}return null}function gv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _l(t);case 8:return t===Fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yv(e){var t=bp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){e._valueTracker||(e._valueTracker=yv(e))}function _p(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=bp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function wi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kl(e,t){var r=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ou(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Jr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kp(e,t){t=t.checked,t!=null&&Mc(e,"checked",t,!1)}function Nl(e,t){kp(e,t);var r=Jr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Sl(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Sl(e,t,r){(t!=="number"||wi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rs=Array.isArray;function Xn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Jr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Cl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(F(92));if(Rs(r)){if(1<r.length)throw Error(F(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Jr(r)}}function Np(e,t){var r=Jr(t.value),n=Jr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function du(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function El(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ra,Cp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ra=Ra||document.createElement("div"),Ra.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ra.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vv=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(e){vv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$s[t]=$s[e]})});function Ep(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$s.hasOwnProperty(e)&&$s[e]?(""+t).trim():t+"px"}function Pp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ep(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var xv=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(e,t){if(t){if(xv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function Tl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ol=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Il=null,Yn=null,Zn=null;function uu(e){if(e=_a(e)){if(typeof Il!="function")throw Error(F(280));var t=e.stateNode;t&&(t=oo(t),Il(e.stateNode,e.type,t))}}function Tp(e){Yn?Zn?Zn.push(e):Zn=[e]:Yn=e}function Op(){if(Yn){var e=Yn,t=Zn;if(Zn=Yn=null,uu(e),t)for(e=0;e<t.length;e++)uu(t[e])}}function Ip(e,t){return e(t)}function Ap(){}var Ro=!1;function jp(e,t,r){if(Ro)return e(t,r);Ro=!0;try{return Ip(e,t,r)}finally{Ro=!1,(Yn!==null||Zn!==null)&&(Ap(),Op())}}function Ys(e,t){var r=e.stateNode;if(r===null)return null;var n=oo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(F(231,t,typeof r));return r}var Al=!1;if(kr)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Al=!1}function wv(e,t,r,n,s,a,o,l,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(p){this.onError(p)}}var Us=!1,bi=null,_i=!1,jl=null,bv={onError:function(e){Us=!0,bi=e}};function _v(e,t,r,n,s,a,o,l,d){Us=!1,bi=null,wv.apply(bv,arguments)}function kv(e,t,r,n,s,a,o,l,d){if(_v.apply(this,arguments),Us){if(Us){var u=bi;Us=!1,bi=null}else throw Error(F(198));_i||(_i=!0,jl=u)}}function Pn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Dp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mu(e){if(Pn(e)!==e)throw Error(F(188))}function Nv(e){var t=e.alternate;if(!t){if(t=Pn(e),t===null)throw Error(F(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return mu(s),e;if(a===n)return mu(s),t;a=a.sibling}throw Error(F(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(r.alternate!==n)throw Error(F(190))}if(r.tag!==3)throw Error(F(188));return r.stateNode.current===r?e:t}function Rp(e){return e=Nv(e),e!==null?Lp(e):null}function Lp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lp(e);if(t!==null)return t;e=e.sibling}return null}var Mp=Dt.unstable_scheduleCallback,pu=Dt.unstable_cancelCallback,Sv=Dt.unstable_shouldYield,Cv=Dt.unstable_requestPaint,Le=Dt.unstable_now,Ev=Dt.unstable_getCurrentPriorityLevel,Bc=Dt.unstable_ImmediatePriority,Fp=Dt.unstable_UserBlockingPriority,ki=Dt.unstable_NormalPriority,Pv=Dt.unstable_LowPriority,$p=Dt.unstable_IdlePriority,no=null,ur=null;function Tv(e){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(no,e,void 0,(e.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:Av,Ov=Math.log,Iv=Math.LN2;function Av(e){return e>>>=0,e===0?32:31-(Ov(e)/Iv|0)|0}var La=64,Ma=4194304;function Ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ni(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Ls(l):(a&=o,a!==0&&(n=Ls(a)))}else o=r&~s,o!==0?n=Ls(o):a!==0&&(n=Ls(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-tr(t),s=1<<r,n|=e[r],t&=~s;return n}function jv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dv(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-tr(a),l=1<<o,d=s[o];d===-1?(!(l&r)||l&n)&&(s[o]=jv(l,t)):d<=t&&(e.expiredLanes|=l),a&=~l}}function Dl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Up(){var e=La;return La<<=1,!(La&4194240)&&(La=64),e}function Lo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tr(t),e[t]=r}function Rv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-tr(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Vc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var he=0;function zp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bp,Wc,Vp,Wp,qp,Rl=!1,Fa=[],Br=null,Vr=null,Wr=null,Zs=new Map,ea=new Map,Mr=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hu(e,t){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(t.pointerId)}}function Ps(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=_a(t),t!==null&&Wc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Mv(e,t,r,n,s){switch(t){case"focusin":return Br=Ps(Br,e,t,r,n,s),!0;case"dragenter":return Vr=Ps(Vr,e,t,r,n,s),!0;case"mouseover":return Wr=Ps(Wr,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Zs.set(a,Ps(Zs.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,ea.set(a,Ps(ea.get(a)||null,e,t,r,n,s)),!0}return!1}function Hp(e){var t=hn(e.target);if(t!==null){var r=Pn(t);if(r!==null){if(t=r.tag,t===13){if(t=Dp(r),t!==null){e.blockedOn=t,qp(e.priority,function(){Vp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function li(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ll(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ol=n,r.target.dispatchEvent(n),Ol=null}else return t=_a(r),t!==null&&Wc(t),e.blockedOn=r,!1;t.shift()}return!0}function fu(e,t,r){li(e)&&r.delete(t)}function Fv(){Rl=!1,Br!==null&&li(Br)&&(Br=null),Vr!==null&&li(Vr)&&(Vr=null),Wr!==null&&li(Wr)&&(Wr=null),Zs.forEach(fu),ea.forEach(fu)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,Rl||(Rl=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Fv)))}function ta(e){function t(s){return Ts(s,e)}if(0<Fa.length){Ts(Fa[0],e);for(var r=1;r<Fa.length;r++){var n=Fa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Br!==null&&Ts(Br,e),Vr!==null&&Ts(Vr,e),Wr!==null&&Ts(Wr,e),Zs.forEach(t),ea.forEach(t),r=0;r<Mr.length;r++)n=Mr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Mr.length&&(r=Mr[0],r.blockedOn===null);)Hp(r),r.blockedOn===null&&Mr.shift()}var es=Er.ReactCurrentBatchConfig,Si=!0;function $v(e,t,r,n){var s=he,a=es.transition;es.transition=null;try{he=1,qc(e,t,r,n)}finally{he=s,es.transition=a}}function Uv(e,t,r,n){var s=he,a=es.transition;es.transition=null;try{he=4,qc(e,t,r,n)}finally{he=s,es.transition=a}}function qc(e,t,r,n){if(Si){var s=Ll(e,t,r,n);if(s===null)Ho(e,t,n,Ci,r),hu(e,n);else if(Mv(s,e,t,r,n))n.stopPropagation();else if(hu(e,n),t&4&&-1<Lv.indexOf(e)){for(;s!==null;){var a=_a(s);if(a!==null&&Bp(a),a=Ll(e,t,r,n),a===null&&Ho(e,t,n,Ci,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Ho(e,t,n,null,r)}}var Ci=null;function Ll(e,t,r,n){if(Ci=null,e=zc(n),e=hn(e),e!==null)if(t=Pn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Dp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ci=e,null}function Kp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ev()){case Bc:return 1;case Fp:return 4;case ki:case Pv:return 16;case $p:return 536870912;default:return 16}default:return 16}}var Ur=null,Hc=null,ci=null;function Gp(){if(ci)return ci;var e,t=Hc,r=t.length,n,s="value"in Ur?Ur.value:Ur.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return ci=s.slice(e,1<n?1-n:void 0)}function di(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function gu(){return!1}function Mt(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?$a:gu,this.isPropagationStopped=gu,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),t}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Mt(fs),ba=Ae({},fs,{view:0,detail:0}),zv=Mt(ba),Mo,Fo,Os,so=Ae({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Os&&(Os&&e.type==="mousemove"?(Mo=e.screenX-Os.screenX,Fo=e.screenY-Os.screenY):Fo=Mo=0,Os=e),Mo)},movementY:function(e){return"movementY"in e?e.movementY:Fo}}),yu=Mt(so),Bv=Ae({},so,{dataTransfer:0}),Vv=Mt(Bv),Wv=Ae({},ba,{relatedTarget:0}),$o=Mt(Wv),qv=Ae({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Hv=Mt(qv),Kv=Ae({},fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gv=Mt(Kv),Qv=Ae({},fs,{data:0}),vu=Mt(Qv),Jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yv[e])?!!t[e]:!1}function Gc(){return Zv}var e0=Ae({},ba,{key:function(e){if(e.key){var t=Jv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t0=Mt(e0),r0=Ae({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=Mt(r0),n0=Ae({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),s0=Mt(n0),a0=Ae({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),i0=Mt(a0),o0=Ae({},so,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l0=Mt(o0),c0=[9,13,27,32],Qc=kr&&"CompositionEvent"in window,zs=null;kr&&"documentMode"in document&&(zs=document.documentMode);var d0=kr&&"TextEvent"in window&&!zs,Qp=kr&&(!Qc||zs&&8<zs&&11>=zs),wu=String.fromCharCode(32),bu=!1;function Jp(e,t){switch(e){case"keyup":return c0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zn=!1;function u0(e,t){switch(e){case"compositionend":return Xp(t);case"keypress":return t.which!==32?null:(bu=!0,wu);case"textInput":return e=t.data,e===wu&&bu?null:e;default:return null}}function m0(e,t){if(zn)return e==="compositionend"||!Qc&&Jp(e,t)?(e=Gp(),ci=Hc=Ur=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qp&&t.locale!=="ko"?null:t.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!p0[e.type]:t==="textarea"}function Yp(e,t,r,n){Tp(n),t=Ei(t,"onChange"),0<t.length&&(r=new Kc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Bs=null,ra=null;function h0(e){ch(e,0)}function ao(e){var t=Wn(e);if(_p(t))return e}function f0(e,t){if(e==="change")return t}var Zp=!1;if(kr){var Uo;if(kr){var zo="oninput"in document;if(!zo){var ku=document.createElement("div");ku.setAttribute("oninput","return;"),zo=typeof ku.oninput=="function"}Uo=zo}else Uo=!1;Zp=Uo&&(!document.documentMode||9<document.documentMode)}function Nu(){Bs&&(Bs.detachEvent("onpropertychange",eh),ra=Bs=null)}function eh(e){if(e.propertyName==="value"&&ao(ra)){var t=[];Yp(t,ra,e,zc(e)),jp(h0,t)}}function g0(e,t,r){e==="focusin"?(Nu(),Bs=t,ra=r,Bs.attachEvent("onpropertychange",eh)):e==="focusout"&&Nu()}function y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(ra)}function v0(e,t){if(e==="click")return ao(t)}function x0(e,t){if(e==="input"||e==="change")return ao(t)}function w0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nr=typeof Object.is=="function"?Object.is:w0;function na(e,t){if(nr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!vl.call(t,s)||!nr(e[s],t[s]))return!1}return!0}function Su(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cu(e,t){var r=Su(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Su(r)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rh(){for(var e=window,t=wi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wi(e.document)}return t}function Jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function b0(e){var t=rh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&th(r.ownerDocument.documentElement,r)){if(n!==null&&Jc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Cu(r,a);var o=Cu(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _0=kr&&"documentMode"in document&&11>=document.documentMode,Bn=null,Ml=null,Vs=null,Fl=!1;function Eu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fl||Bn==null||Bn!==wi(n)||(n=Bn,"selectionStart"in n&&Jc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vs&&na(Vs,n)||(Vs=n,n=Ei(Ml,"onSelect"),0<n.length&&(t=new Kc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Bn)))}function Ua(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vn={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},Bo={},nh={};kr&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function io(e){if(Bo[e])return Bo[e];if(!Vn[e])return e;var t=Vn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nh)return Bo[e]=t[r];return e}var sh=io("animationend"),ah=io("animationiteration"),ih=io("animationstart"),oh=io("transitionend"),lh=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(e,t){lh.set(e,t),En(t,[e])}for(var Vo=0;Vo<Pu.length;Vo++){var Wo=Pu[Vo],k0=Wo.toLowerCase(),N0=Wo[0].toUpperCase()+Wo.slice(1);Yr(k0,"on"+N0)}Yr(sh,"onAnimationEnd");Yr(ah,"onAnimationIteration");Yr(ih,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(oh,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));En("onBeforeInput",["compositionend","keypress","textInput","paste"]);En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function Tu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,kv(n,t,void 0,e),e.currentTarget=null}function ch(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==a&&s.isPropagationStopped())break e;Tu(s,l,u),a=d}else for(o=0;o<n.length;o++){if(l=n[o],d=l.instance,u=l.currentTarget,l=l.listener,d!==a&&s.isPropagationStopped())break e;Tu(s,l,u),a=d}}}if(_i)throw e=jl,_i=!1,jl=null,e}function ke(e,t){var r=t[Vl];r===void 0&&(r=t[Vl]=new Set);var n=e+"__bubble";r.has(n)||(dh(t,e,2,!1),r.add(n))}function qo(e,t,r){var n=0;t&&(n|=4),dh(r,e,n,t)}var za="_reactListening"+Math.random().toString(36).slice(2);function sa(e){if(!e[za]){e[za]=!0,yp.forEach(function(r){r!=="selectionchange"&&(S0.has(r)||qo(r,!1,e),qo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[za]||(t[za]=!0,qo("selectionchange",!1,t))}}function dh(e,t,r,n){switch(Kp(t)){case 1:var s=$v;break;case 4:s=Uv;break;default:s=qc}r=s.bind(null,t,r,e),s=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ho(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;l!==null;){if(o=hn(l),o===null)return;if(d=o.tag,d===5||d===6){n=a=o;continue e}l=l.parentNode}}n=n.return}jp(function(){var u=a,p=zc(r),h=[];e:{var m=lh.get(e);if(m!==void 0){var y=Kc,v=e;switch(e){case"keypress":if(di(r)===0)break e;case"keydown":case"keyup":y=t0;break;case"focusin":v="focus",y=$o;break;case"focusout":v="blur",y=$o;break;case"beforeblur":case"afterblur":y=$o;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=s0;break;case sh:case ah:case ih:y=Hv;break;case oh:y=i0;break;case"scroll":y=zv;break;case"wheel":y=l0;break;case"copy":case"cut":case"paste":y=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xu}var b=(t&4)!==0,k=!b&&e==="scroll",w=b?m!==null?m+"Capture":null:m;b=[];for(var f=u,g;f!==null;){g=f;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,w!==null&&(_=Ys(f,w),_!=null&&b.push(aa(f,_,g)))),k)break;f=f.return}0<b.length&&(m=new y(m,v,null,r,p),h.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Ol&&(v=r.relatedTarget||r.fromElement)&&(hn(v)||v[Nr]))break e;if((y||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?hn(v):null,v!==null&&(k=Pn(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(b=yu,_="onMouseLeave",w="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=xu,_="onPointerLeave",w="onPointerEnter",f="pointer"),k=y==null?m:Wn(y),g=v==null?m:Wn(v),m=new b(_,f+"leave",y,r,p),m.target=k,m.relatedTarget=g,_=null,hn(p)===u&&(b=new b(w,f+"enter",v,r,p),b.target=g,b.relatedTarget=k,_=b),k=_,y&&v)t:{for(b=y,w=v,f=0,g=b;g;g=In(g))f++;for(g=0,_=w;_;_=In(_))g++;for(;0<f-g;)b=In(b),f--;for(;0<g-f;)w=In(w),g--;for(;f--;){if(b===w||w!==null&&b===w.alternate)break t;b=In(b),w=In(w)}b=null}else b=null;y!==null&&Ou(h,m,y,b,!1),v!==null&&k!==null&&Ou(h,k,v,b,!0)}}e:{if(m=u?Wn(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=f0;else if(_u(m))if(Zp)E=x0;else{E=y0;var S=g0}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=v0);if(E&&(E=E(e,u))){Yp(h,E,r,p);break e}S&&S(e,m,u),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Sl(m,"number",m.value)}switch(S=u?Wn(u):window,e){case"focusin":(_u(S)||S.contentEditable==="true")&&(Bn=S,Ml=u,Vs=null);break;case"focusout":Vs=Ml=Bn=null;break;case"mousedown":Fl=!0;break;case"contextmenu":case"mouseup":case"dragend":Fl=!1,Eu(h,r,p);break;case"selectionchange":if(_0)break;case"keydown":case"keyup":Eu(h,r,p)}var O;if(Qc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zn?Jp(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Qp&&r.locale!=="ko"&&(zn||C!=="onCompositionStart"?C==="onCompositionEnd"&&zn&&(O=Gp()):(Ur=p,Hc="value"in Ur?Ur.value:Ur.textContent,zn=!0)),S=Ei(u,C),0<S.length&&(C=new vu(C,e,null,r,p),h.push({event:C,listeners:S}),O?C.data=O:(O=Xp(r),O!==null&&(C.data=O)))),(O=d0?u0(e,r):m0(e,r))&&(u=Ei(u,"onBeforeInput"),0<u.length&&(p=new vu("onBeforeInput","beforeinput",null,r,p),h.push({event:p,listeners:u}),p.data=O))}ch(h,t)})}function aa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ei(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ys(e,r),a!=null&&n.unshift(aa(e,a,s)),a=Ys(e,t),a!=null&&n.push(aa(e,a,s))),e=e.return}return n}function In(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ou(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,d=l.alternate,u=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&u!==null&&(l=u,s?(d=Ys(r,a),d!=null&&o.unshift(aa(r,d,l))):s||(d=Ys(r,a),d!=null&&o.push(aa(r,d,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var C0=/\r\n?/g,E0=/\u0000|\uFFFD/g;function Iu(e){return(typeof e=="string"?e:""+e).replace(C0,`
`).replace(E0,"")}function Ba(e,t,r){if(t=Iu(t),Iu(e)!==t&&r)throw Error(F(425))}function Pi(){}var $l=null,Ul=null;function zl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,P0=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,T0=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(e){return Au.resolve(null).then(e).catch(O0)}:Bl;function O0(e){setTimeout(function(){throw e})}function Ko(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ta(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ta(t)}function qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ju(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var gs=Math.random().toString(36).slice(2),dr="__reactFiber$"+gs,ia="__reactProps$"+gs,Nr="__reactContainer$"+gs,Vl="__reactEvents$"+gs,I0="__reactListeners$"+gs,A0="__reactHandles$"+gs;function hn(e){var t=e[dr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Nr]||r[dr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ju(e);e!==null;){if(r=e[dr])return r;e=ju(e)}return t}e=r,r=e.parentNode}return null}function _a(e){return e=e[dr]||e[Nr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function oo(e){return e[ia]||null}var Wl=[],qn=-1;function Zr(e){return{current:e}}function Se(e){0>qn||(e.current=Wl[qn],Wl[qn]=null,qn--)}function _e(e,t){qn++,Wl[qn]=e.current,e.current=t}var Xr={},ct=Zr(Xr),wt=Zr(!1),bn=Xr;function as(e,t){var r=e.type.contextTypes;if(!r)return Xr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function bt(e){return e=e.childContextTypes,e!=null}function Ti(){Se(wt),Se(ct)}function Du(e,t,r){if(ct.current!==Xr)throw Error(F(168));_e(ct,t),_e(wt,r)}function uh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(F(108,gv(e)||"Unknown",s));return Ae({},r,n)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,bn=ct.current,_e(ct,e),_e(wt,wt.current),!0}function Ru(e,t,r){var n=e.stateNode;if(!n)throw Error(F(169));r?(e=uh(e,t,bn),n.__reactInternalMemoizedMergedChildContext=e,Se(wt),Se(ct),_e(ct,e)):Se(wt),_e(wt,r)}var xr=null,lo=!1,Go=!1;function mh(e){xr===null?xr=[e]:xr.push(e)}function j0(e){lo=!0,mh(e)}function en(){if(!Go&&xr!==null){Go=!0;var e=0,t=he;try{var r=xr;for(he=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}xr=null,lo=!1}catch(s){throw xr!==null&&(xr=xr.slice(e+1)),Mp(Bc,en),s}finally{he=t,Go=!1}}return null}var Hn=[],Kn=0,Ii=null,Ai=0,$t=[],Ut=0,_n=null,wr=1,br="";function on(e,t){Hn[Kn++]=Ai,Hn[Kn++]=Ii,Ii=e,Ai=t}function ph(e,t,r){$t[Ut++]=wr,$t[Ut++]=br,$t[Ut++]=_n,_n=e;var n=wr;e=br;var s=32-tr(n)-1;n&=~(1<<s),r+=1;var a=32-tr(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,wr=1<<32-tr(t)+s|r<<s|n,br=a+e}else wr=1<<a|r<<s|n,br=e}function Xc(e){e.return!==null&&(on(e,1),ph(e,1,0))}function Yc(e){for(;e===Ii;)Ii=Hn[--Kn],Hn[Kn]=null,Ai=Hn[--Kn],Hn[Kn]=null;for(;e===_n;)_n=$t[--Ut],$t[Ut]=null,br=$t[--Ut],$t[Ut]=null,wr=$t[--Ut],$t[Ut]=null}var jt=null,At=null,Ee=!1,Zt=null;function hh(e,t){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Lu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,At=qr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=_n!==null?{id:wr,overflow:br}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,jt=e,At=null,!0):!1;default:return!1}}function ql(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hl(e){if(Ee){var t=At;if(t){var r=t;if(!Lu(e,t)){if(ql(e))throw Error(F(418));t=qr(r.nextSibling);var n=jt;t&&Lu(e,t)?hh(n,r):(e.flags=e.flags&-4097|2,Ee=!1,jt=e)}}else{if(ql(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ee=!1,jt=e}}}function Mu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function Va(e){if(e!==jt)return!1;if(!Ee)return Mu(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zl(e.type,e.memoizedProps)),t&&(t=At)){if(ql(e))throw fh(),Error(F(418));for(;t;)hh(e,t),t=qr(t.nextSibling)}if(Mu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){At=qr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}At=null}}else At=jt?qr(e.stateNode.nextSibling):null;return!0}function fh(){for(var e=At;e;)e=qr(e.nextSibling)}function is(){At=jt=null,Ee=!1}function Zc(e){Zt===null?Zt=[e]:Zt.push(e)}var D0=Er.ReactCurrentBatchConfig;function Is(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(F(309));var n=r.stateNode}if(!n)throw Error(F(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(F(284));if(!r._owner)throw Error(F(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fu(e){var t=e._init;return t(e._payload)}function gh(e){function t(w,f){if(e){var g=w.deletions;g===null?(w.deletions=[f],w.flags|=16):g.push(f)}}function r(w,f){if(!e)return null;for(;f!==null;)t(w,f),f=f.sibling;return null}function n(w,f){for(w=new Map;f!==null;)f.key!==null?w.set(f.key,f):w.set(f.index,f),f=f.sibling;return w}function s(w,f){return w=Qr(w,f),w.index=0,w.sibling=null,w}function a(w,f,g){return w.index=g,e?(g=w.alternate,g!==null?(g=g.index,g<f?(w.flags|=2,f):g):(w.flags|=2,f)):(w.flags|=1048576,f)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,f,g,_){return f===null||f.tag!==6?(f=tl(g,w.mode,_),f.return=w,f):(f=s(f,g),f.return=w,f)}function d(w,f,g,_){var E=g.type;return E===Un?p(w,f,g.props.children,_,g.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rr&&Fu(E)===f.type)?(_=s(f,g.props),_.ref=Is(w,f,g),_.return=w,_):(_=yi(g.type,g.key,g.props,null,w.mode,_),_.ref=Is(w,f,g),_.return=w,_)}function u(w,f,g,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=rl(g,w.mode,_),f.return=w,f):(f=s(f,g.children||[]),f.return=w,f)}function p(w,f,g,_,E){return f===null||f.tag!==7?(f=xn(g,w.mode,_,E),f.return=w,f):(f=s(f,g),f.return=w,f)}function h(w,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=tl(""+f,w.mode,g),f.return=w,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ja:return g=yi(f.type,f.key,f.props,null,w.mode,g),g.ref=Is(w,null,f),g.return=w,g;case $n:return f=rl(f,w.mode,g),f.return=w,f;case Rr:var _=f._init;return h(w,_(f._payload),g)}if(Rs(f)||Cs(f))return f=xn(f,w.mode,g,null),f.return=w,f;Wa(w,f)}return null}function m(w,f,g,_){var E=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:l(w,f,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ja:return g.key===E?d(w,f,g,_):null;case $n:return g.key===E?u(w,f,g,_):null;case Rr:return E=g._init,m(w,f,E(g._payload),_)}if(Rs(g)||Cs(g))return E!==null?null:p(w,f,g,_,null);Wa(w,g)}return null}function y(w,f,g,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(g)||null,l(f,w,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ja:return w=w.get(_.key===null?g:_.key)||null,d(f,w,_,E);case $n:return w=w.get(_.key===null?g:_.key)||null,u(f,w,_,E);case Rr:var S=_._init;return y(w,f,g,S(_._payload),E)}if(Rs(_)||Cs(_))return w=w.get(g)||null,p(f,w,_,E,null);Wa(f,_)}return null}function v(w,f,g,_){for(var E=null,S=null,O=f,C=f=0,P=null;O!==null&&C<g.length;C++){O.index>C?(P=O,O=null):P=O.sibling;var N=m(w,O,g[C],_);if(N===null){O===null&&(O=P);break}e&&O&&N.alternate===null&&t(w,O),f=a(N,f,C),S===null?E=N:S.sibling=N,S=N,O=P}if(C===g.length)return r(w,O),Ee&&on(w,C),E;if(O===null){for(;C<g.length;C++)O=h(w,g[C],_),O!==null&&(f=a(O,f,C),S===null?E=O:S.sibling=O,S=O);return Ee&&on(w,C),E}for(O=n(w,O);C<g.length;C++)P=y(O,w,C,g[C],_),P!==null&&(e&&P.alternate!==null&&O.delete(P.key===null?C:P.key),f=a(P,f,C),S===null?E=P:S.sibling=P,S=P);return e&&O.forEach(function(I){return t(w,I)}),Ee&&on(w,C),E}function b(w,f,g,_){var E=Cs(g);if(typeof E!="function")throw Error(F(150));if(g=E.call(g),g==null)throw Error(F(151));for(var S=E=null,O=f,C=f=0,P=null,N=g.next();O!==null&&!N.done;C++,N=g.next()){O.index>C?(P=O,O=null):P=O.sibling;var I=m(w,O,N.value,_);if(I===null){O===null&&(O=P);break}e&&O&&I.alternate===null&&t(w,O),f=a(I,f,C),S===null?E=I:S.sibling=I,S=I,O=P}if(N.done)return r(w,O),Ee&&on(w,C),E;if(O===null){for(;!N.done;C++,N=g.next())N=h(w,N.value,_),N!==null&&(f=a(N,f,C),S===null?E=N:S.sibling=N,S=N);return Ee&&on(w,C),E}for(O=n(w,O);!N.done;C++,N=g.next())N=y(O,w,C,N.value,_),N!==null&&(e&&N.alternate!==null&&O.delete(N.key===null?C:N.key),f=a(N,f,C),S===null?E=N:S.sibling=N,S=N);return e&&O.forEach(function(A){return t(w,A)}),Ee&&on(w,C),E}function k(w,f,g,_){if(typeof g=="object"&&g!==null&&g.type===Un&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ja:e:{for(var E=g.key,S=f;S!==null;){if(S.key===E){if(E=g.type,E===Un){if(S.tag===7){r(w,S.sibling),f=s(S,g.props.children),f.return=w,w=f;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rr&&Fu(E)===S.type){r(w,S.sibling),f=s(S,g.props),f.ref=Is(w,S,g),f.return=w,w=f;break e}r(w,S);break}else t(w,S);S=S.sibling}g.type===Un?(f=xn(g.props.children,w.mode,_,g.key),f.return=w,w=f):(_=yi(g.type,g.key,g.props,null,w.mode,_),_.ref=Is(w,f,g),_.return=w,w=_)}return o(w);case $n:e:{for(S=g.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){r(w,f.sibling),f=s(f,g.children||[]),f.return=w,w=f;break e}else{r(w,f);break}else t(w,f);f=f.sibling}f=rl(g,w.mode,_),f.return=w,w=f}return o(w);case Rr:return S=g._init,k(w,f,S(g._payload),_)}if(Rs(g))return v(w,f,g,_);if(Cs(g))return b(w,f,g,_);Wa(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(r(w,f.sibling),f=s(f,g),f.return=w,w=f):(r(w,f),f=tl(g,w.mode,_),f.return=w,w=f),o(w)):r(w,f)}return k}var os=gh(!0),yh=gh(!1),ji=Zr(null),Di=null,Gn=null,ed=null;function td(){ed=Gn=Di=null}function rd(e){var t=ji.current;Se(ji),e._currentValue=t}function Kl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ts(e,t){Di=e,ed=Gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(ed!==e)if(e={context:e,memoizedValue:t,next:null},Gn===null){if(Di===null)throw Error(F(308));Gn=e,Di.dependencies={lanes:0,firstContext:e}}else Gn=Gn.next=e;return t}var fn=null;function nd(e){fn===null?fn=[e]:fn.push(e)}function vh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,nd(t)):(r.next=s.next,s.next=r),t.interleaved=r,Sr(e,n)}function Sr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Lr=!1;function sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Sr(e,r)}return s=n.interleaved,s===null?(t.next=t,nd(n)):(t.next=s.next,s.next=t),n.interleaved=t,Sr(e,r)}function ui(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vc(e,r)}}function $u(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ri(e,t,r,n){var s=e.updateQueue;Lr=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,u=d.next;d.next=null,o===null?a=u:o.next=u,o=d;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=d))}if(a!==null){var h=s.baseState;o=0,p=u=d=null,l=a;do{var m=l.lane,y=l.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(m=t,y=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(y,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,m=typeof v=="function"?v.call(y,h,m):v,m==null)break e;h=Ae({},h,m);break e;case 2:Lr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(u=p=y,d=h):p=p.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(p===null&&(d=h),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Nn|=o,e.lanes=o,e.memoizedState=h}}function Uu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(F(191,s));s.call(n)}}}var ka={},mr=Zr(ka),oa=Zr(ka),la=Zr(ka);function gn(e){if(e===ka)throw Error(F(174));return e}function ad(e,t){switch(_e(la,t),_e(oa,e),_e(mr,ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:El(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=El(t,e)}Se(mr),_e(mr,t)}function ls(){Se(mr),Se(oa),Se(la)}function wh(e){gn(la.current);var t=gn(mr.current),r=El(t,e.type);t!==r&&(_e(oa,e),_e(mr,r))}function id(e){oa.current===e&&(Se(mr),Se(oa))}var Oe=Zr(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qo=[];function od(){for(var e=0;e<Qo.length;e++)Qo[e]._workInProgressVersionPrimary=null;Qo.length=0}var mi=Er.ReactCurrentDispatcher,Jo=Er.ReactCurrentBatchConfig,kn=0,Ie=null,We=null,Ge=null,Mi=!1,Ws=!1,ca=0,R0=0;function it(){throw Error(F(321))}function ld(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nr(e[r],t[r]))return!1;return!0}function cd(e,t,r,n,s,a){if(kn=a,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mi.current=e===null||e.memoizedState===null?$0:U0,e=r(n,s),Ws){a=0;do{if(Ws=!1,ca=0,25<=a)throw Error(F(301));a+=1,Ge=We=null,t.updateQueue=null,mi.current=z0,e=r(n,s)}while(Ws)}if(mi.current=Fi,t=We!==null&&We.next!==null,kn=0,Ge=We=Ie=null,Mi=!1,t)throw Error(F(300));return e}function dd(){var e=ca!==0;return ca=0,e}function cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ie.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Wt(){if(We===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Ge===null?Ie.memoizedState:Ge.next;if(t!==null)Ge=t,We=e;else{if(e===null)throw Error(F(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ge===null?Ie.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function da(e,t){return typeof t=="function"?t(e):t}function Xo(e){var t=Wt(),r=t.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=e;var n=We,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,d=null,u=a;do{var p=u.lane;if((kn&p)===p)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=h,o=n):d=d.next=h,Ie.lanes|=p,Nn|=p}u=u.next}while(u!==null&&u!==a);d===null?o=n:d.next=l,nr(n,t.memoizedState)||(xt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Ie.lanes|=a,Nn|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yo(e){var t=Wt(),r=t.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);nr(a,t.memoizedState)||(xt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function bh(){}function _h(e,t){var r=Ie,n=Wt(),s=t(),a=!nr(n.memoizedState,s);if(a&&(n.memoizedState=s,xt=!0),n=n.queue,ud(Sh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ge!==null&&Ge.memoizedState.tag&1){if(r.flags|=2048,ua(9,Nh.bind(null,r,n,s,t),void 0,null),Qe===null)throw Error(F(349));kn&30||kh(r,t,s)}return s}function kh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Nh(e,t,r,n){t.value=r,t.getSnapshot=n,Ch(t)&&Eh(e)}function Sh(e,t,r){return r(function(){Ch(t)&&Eh(e)})}function Ch(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nr(e,r)}catch{return!0}}function Eh(e){var t=Sr(e,1);t!==null&&rr(t,e,1,-1)}function zu(e){var t=cr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=F0.bind(null,Ie,e),[t.memoizedState,e]}function ua(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ph(){return Wt().memoizedState}function pi(e,t,r,n){var s=cr();Ie.flags|=e,s.memoizedState=ua(1|t,r,void 0,n===void 0?null:n)}function co(e,t,r,n){var s=Wt();n=n===void 0?null:n;var a=void 0;if(We!==null){var o=We.memoizedState;if(a=o.destroy,n!==null&&ld(n,o.deps)){s.memoizedState=ua(t,r,a,n);return}}Ie.flags|=e,s.memoizedState=ua(1|t,r,a,n)}function Bu(e,t){return pi(8390656,8,e,t)}function ud(e,t){return co(2048,8,e,t)}function Th(e,t){return co(4,2,e,t)}function Oh(e,t){return co(4,4,e,t)}function Ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ah(e,t,r){return r=r!=null?r.concat([e]):null,co(4,4,Ih.bind(null,t,e),r)}function md(){}function jh(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ld(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Dh(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ld(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Rh(e,t,r){return kn&21?(nr(r,t)||(r=Up(),Ie.lanes|=r,Nn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=r)}function L0(e,t){var r=he;he=r!==0&&4>r?r:4,e(!0);var n=Jo.transition;Jo.transition={};try{e(!1),t()}finally{he=r,Jo.transition=n}}function Lh(){return Wt().memoizedState}function M0(e,t,r){var n=Gr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Mh(e))Fh(t,r);else if(r=vh(e,t,r,n),r!==null){var s=ft();rr(r,e,n,s),$h(r,t,n)}}function F0(e,t,r){var n=Gr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mh(e))Fh(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,nr(l,o)){var d=t.interleaved;d===null?(s.next=s,nd(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}r=vh(e,t,s,n),r!==null&&(s=ft(),rr(r,e,n,s),$h(r,t,n))}}function Mh(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function Fh(e,t){Ws=Mi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $h(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vc(e,r)}}var Fi={readContext:Vt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},$0={readContext:Vt,useCallback:function(e,t){return cr().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:Bu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pi(4194308,4,Ih.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return pi(4,2,e,t)},useMemo:function(e,t){var r=cr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=cr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=M0.bind(null,Ie,e),[n.memoizedState,e]},useRef:function(e){var t=cr();return e={current:e},t.memoizedState=e},useState:zu,useDebugValue:md,useDeferredValue:function(e){return cr().memoizedState=e},useTransition:function(){var e=zu(!1),t=e[0];return e=L0.bind(null,e[1]),cr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ie,s=cr();if(Ee){if(r===void 0)throw Error(F(407));r=r()}else{if(r=t(),Qe===null)throw Error(F(349));kn&30||kh(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Bu(Sh.bind(null,n,a,e),[e]),n.flags|=2048,ua(9,Nh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=cr(),t=Qe.identifierPrefix;if(Ee){var r=br,n=wr;r=(n&~(1<<32-tr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ca++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=R0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U0={readContext:Vt,useCallback:jh,useContext:Vt,useEffect:ud,useImperativeHandle:Ah,useInsertionEffect:Th,useLayoutEffect:Oh,useMemo:Dh,useReducer:Xo,useRef:Ph,useState:function(){return Xo(da)},useDebugValue:md,useDeferredValue:function(e){var t=Wt();return Rh(t,We.memoizedState,e)},useTransition:function(){var e=Xo(da)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:_h,useId:Lh,unstable_isNewReconciler:!1},z0={readContext:Vt,useCallback:jh,useContext:Vt,useEffect:ud,useImperativeHandle:Ah,useInsertionEffect:Th,useLayoutEffect:Oh,useMemo:Dh,useReducer:Yo,useRef:Ph,useState:function(){return Yo(da)},useDebugValue:md,useDeferredValue:function(e){var t=Wt();return We===null?t.memoizedState=e:Rh(t,We.memoizedState,e)},useTransition:function(){var e=Yo(da)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:bh,useSyncExternalStore:_h,useId:Lh,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Gl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var uo={isMounted:function(e){return(e=e._reactInternals)?Pn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ft(),s=Gr(e),a=_r(n,s);a.payload=t,r!=null&&(a.callback=r),t=Hr(e,a,s),t!==null&&(rr(t,e,s,n),ui(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ft(),s=Gr(e),a=_r(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Hr(e,a,s),t!==null&&(rr(t,e,s,n),ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ft(),n=Gr(e),s=_r(r,n);s.tag=2,t!=null&&(s.callback=t),t=Hr(e,s,n),t!==null&&(rr(t,e,n,r),ui(t,e,n))}};function Vu(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!na(r,n)||!na(s,a):!0}function Uh(e,t,r){var n=!1,s=Xr,a=t.contextType;return typeof a=="object"&&a!==null?a=Vt(a):(s=bt(t)?bn:ct.current,n=t.contextTypes,a=(n=n!=null)?as(e,s):Xr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Ql(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},sd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Vt(a):(a=bt(t)?bn:ct.current,s.context=as(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Gl(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&uo.enqueueReplaceState(s,s.state,null),Ri(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var r="",n=t;do r+=fv(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Zo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var B0=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,r){r=_r(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ui||(Ui=!0,ic=n),Jl(e,t)},r}function Bh(e,t,r){r=_r(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Jl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Jl(e,t),typeof n!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function qu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new B0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=rx.bind(null,e,t,r),t.then(e,e))}function Hu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ku(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_r(-1,1),t.tag=2,Hr(r,t,1))),r.lanes|=1),e)}var V0=Er.ReactCurrentOwner,xt=!1;function pt(e,t,r,n){t.child=e===null?yh(t,null,r,n):os(t,e.child,r,n)}function Gu(e,t,r,n,s){r=r.render;var a=t.ref;return ts(t,s),n=cd(e,t,r,n,a,s),r=dd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cr(e,t,s)):(Ee&&r&&Xc(t),t.flags|=1,pt(e,t,n,s),t.child)}function Qu(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!wd(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Vh(e,t,a,n,s)):(e=yi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:na,r(o,n)&&e.ref===t.ref)return Cr(e,t,s)}return t.flags|=1,e=Qr(a,n),e.ref=t.ref,e.return=t,t.child=e}function Vh(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(na(a,n)&&e.ref===t.ref)if(xt=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,Cr(e,t,s)}return Xl(e,t,r,n,s)}function Wh(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Jn,Tt),Tt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Jn,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,_e(Jn,Tt),Tt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,_e(Jn,Tt),Tt|=n;return pt(e,t,s,r),t.child}function qh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xl(e,t,r,n,s){var a=bt(r)?bn:ct.current;return a=as(t,a),ts(t,s),r=cd(e,t,r,n,a,s),n=dd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cr(e,t,s)):(Ee&&n&&Xc(t),t.flags|=1,pt(e,t,r,s),t.child)}function Ju(e,t,r,n,s){if(bt(r)){var a=!0;Oi(t)}else a=!1;if(ts(t,s),t.stateNode===null)hi(e,t),Uh(t,r,n),Ql(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Vt(u):(u=bt(r)?bn:ct.current,u=as(t,u));var p=r.getDerivedStateFromProps,h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||d!==u)&&Wu(t,o,n,u),Lr=!1;var m=t.memoizedState;o.state=m,Ri(t,n,o,s),d=t.memoizedState,l!==n||m!==d||wt.current||Lr?(typeof p=="function"&&(Gl(t,r,p,n),d=t.memoizedState),(l=Lr||Vu(t,r,l,n,m,d,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,xh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Qt(t.type,l),o.props=u,h=t.pendingProps,m=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Vt(d):(d=bt(r)?bn:ct.current,d=as(t,d));var y=r.getDerivedStateFromProps;(p=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==d)&&Wu(t,o,n,d),Lr=!1,m=t.memoizedState,o.state=m,Ri(t,n,o,s);var v=t.memoizedState;l!==h||m!==v||wt.current||Lr?(typeof y=="function"&&(Gl(t,r,y,n),v=t.memoizedState),(u=Lr||Vu(t,r,u,n,m,v,d)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=d,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Yl(e,t,r,n,a,s)}function Yl(e,t,r,n,s,a){qh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Ru(t,r,!1),Cr(e,t,a);n=t.stateNode,V0.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=os(t,e.child,null,a),t.child=os(t,null,l,a)):pt(e,t,l,a),t.memoizedState=n.state,s&&Ru(t,r,!0),t.child}function Hh(e){var t=e.stateNode;t.pendingContext?Du(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Du(e,t.context,!1),ad(e,t.containerInfo)}function Xu(e,t,r,n,s){return is(),Zc(s),t.flags|=256,pt(e,t,r,n),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function ec(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kh(e,t,r){var n=t.pendingProps,s=Oe.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(Oe,s&1),e===null)return Hl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ho(o,n,0,null),e=xn(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ec(r),t.memoizedState=Zl,e):pd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return W0(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Qr(s,d),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Qr(l,a):(a=xn(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?ec(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Zl,n}return a=e.child,e=a.sibling,n=Qr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function pd(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qa(e,t,r,n){return n!==null&&Zc(n),os(t,e.child,null,r),e=pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W0(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Zo(Error(F(422))),qa(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=ho({mode:"visible",children:n.children},s,0,null),a=xn(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&os(t,e.child,null,o),t.child.memoizedState=ec(o),t.memoizedState=Zl,a);if(!(t.mode&1))return qa(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(F(419)),n=Zo(a,n,void 0),qa(e,t,o,n)}if(l=(o&e.childLanes)!==0,xt||l){if(n=Qe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Sr(e,s),rr(n,e,s,-1))}return xd(),n=Zo(Error(F(421))),qa(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=nx.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,At=qr(s.nextSibling),jt=t,Ee=!0,Zt=null,e!==null&&($t[Ut++]=wr,$t[Ut++]=br,$t[Ut++]=_n,wr=e.id,br=e.overflow,_n=t),t=pd(t,n.children),t.flags|=4096,t)}function Yu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Kl(e.return,t,r)}function el(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Gh(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(pt(e,t,n.children,r),n=Oe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yu(e,r,t);else if(e.tag===19)Yu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_e(Oe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Li(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),el(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Li(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}el(t,!0,r,null,a);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Nn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,r=Qr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Qr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function q0(e,t,r){switch(t.tag){case 3:Hh(t),is();break;case 5:wh(t);break;case 1:bt(t.type)&&Oi(t);break;case 4:ad(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;_e(ji,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_e(Oe,Oe.current&1),t.flags|=128,null):r&t.child.childLanes?Kh(e,t,r):(_e(Oe,Oe.current&1),e=Cr(e,t,r),e!==null?e.sibling:null);_e(Oe,Oe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Oe,Oe.current),n)break;return null;case 22:case 23:return t.lanes=0,Wh(e,t,r)}return Cr(e,t,r)}var Qh,tc,Jh,Xh;Qh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tc=function(){};Jh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,gn(mr.current);var a=null;switch(r){case"input":s=kl(e,s),n=kl(e,n),a=[];break;case"select":s=Ae({},s,{value:void 0}),n=Ae({},n,{value:void 0}),a=[];break;case"textarea":s=Cl(e,s),n=Cl(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Pi)}Pl(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Js.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var d=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(a||(a=[]),a.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Js.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&ke("scroll",e),a||l===d||(a=[])):(a=a||[]).push(u,d))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Xh=function(e,t,r,n){r!==n&&(t.flags|=4)};function As(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function H0(e,t,r){var n=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return bt(t.type)&&Ti(),ot(t),null;case 3:return n=t.stateNode,ls(),Se(wt),Se(ct),od(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(cc(Zt),Zt=null))),tc(e,t),ot(t),null;case 5:id(t);var s=gn(la.current);if(r=t.type,e!==null&&t.stateNode!=null)Jh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(F(166));return ot(t),null}if(e=gn(mr.current),Va(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[dr]=t,n[ia]=a,e=(t.mode&1)!==0,r){case"dialog":ke("cancel",n),ke("close",n);break;case"iframe":case"object":case"embed":ke("load",n);break;case"video":case"audio":for(s=0;s<Ms.length;s++)ke(Ms[s],n);break;case"source":ke("error",n);break;case"img":case"image":case"link":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"input":ou(n,a),ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ke("invalid",n);break;case"textarea":cu(n,a),ke("invalid",n)}Pl(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ba(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ba(n.textContent,l,e),s=["children",""+l]):Js.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",n)}switch(r){case"input":Da(n),lu(n,a,!0);break;case"textarea":Da(n),du(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Pi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[dr]=t,e[ia]=n,Qh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Tl(r,n),r){case"dialog":ke("cancel",e),ke("close",e),s=n;break;case"iframe":case"object":case"embed":ke("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ms.length;s++)ke(Ms[s],e);s=n;break;case"source":ke("error",e),s=n;break;case"img":case"image":case"link":ke("error",e),ke("load",e),s=n;break;case"details":ke("toggle",e),s=n;break;case"input":ou(e,n),s=kl(e,n),ke("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ae({},n,{value:void 0}),ke("invalid",e);break;case"textarea":cu(e,n),s=Cl(e,n),ke("invalid",e);break;default:s=n}Pl(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?Pp(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Cp(e,d)):a==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Xs(e,d):typeof d=="number"&&Xs(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Js.hasOwnProperty(a)?d!=null&&a==="onScroll"&&ke("scroll",e):d!=null&&Mc(e,a,d,o))}switch(r){case"input":Da(e),lu(e,n,!1);break;case"textarea":Da(e),du(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Jr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Xn(e,!!n.multiple,a,!1):n.defaultValue!=null&&Xn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Pi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Xh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(F(166));if(r=gn(la.current),gn(mr.current),Va(t)){if(n=t.stateNode,r=t.memoizedProps,n[dr]=t,(a=n.nodeValue!==r)&&(e=jt,e!==null))switch(e.tag){case 3:Ba(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ba(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[dr]=t,t.stateNode=n}return ot(t),null;case 13:if(Se(Oe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&At!==null&&t.mode&1&&!(t.flags&128))fh(),is(),t.flags|=98560,a=!1;else if(a=Va(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(F(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(F(317));a[dr]=t}else is(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),a=!1}else Zt!==null&&(cc(Zt),Zt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?qe===0&&(qe=3):xd())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return ls(),tc(e,t),e===null&&sa(t.stateNode.containerInfo),ot(t),null;case 10:return rd(t.type._context),ot(t),null;case 17:return bt(t.type)&&Ti(),ot(t),null;case 19:if(Se(Oe),a=t.memoizedState,a===null)return ot(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)As(a,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Li(e),o!==null){for(t.flags|=128,As(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(Oe,Oe.current&1|2),t.child}e=e.sibling}a.tail!==null&&Le()>ds&&(t.flags|=128,n=!0,As(a,!1),t.lanes=4194304)}else{if(!n)if(e=Li(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),As(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ee)return ot(t),null}else 2*Le()-a.renderingStartTime>ds&&r!==1073741824&&(t.flags|=128,n=!0,As(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Le(),t.sibling=null,r=Oe.current,_e(Oe,n?r&1|2:r&1),t):(ot(t),null);case 22:case 23:return vd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Tt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function K0(e,t){switch(Yc(t),t.tag){case 1:return bt(t.type)&&Ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),Se(wt),Se(ct),od(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return id(t),null;case 13:if(Se(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Oe),null;case 4:return ls(),null;case 10:return rd(t.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var Ha=!1,lt=!1,G0=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Qn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){De(e,t,n)}else r.current=null}function rc(e,t,r){try{r()}catch(n){De(e,t,n)}}var Zu=!1;function Q0(e,t){if($l=Si,e=rh(),Jc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,d=-1,u=0,p=0,h=e,m=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(d=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=o),m===a&&++p===n&&(d=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ul={focusedElem:e,selectionRange:r},Si=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,k=v.memoizedState,w=t.stateNode,f=w.getSnapshotBeforeUpdate(t.elementType===t.type?b:Qt(t.type,b),k);w.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){De(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return v=Zu,Zu=!1,v}function qs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&rc(t,r,a)}s=s.next}while(s!==n)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function nc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yh(e){var t=e.alternate;t!==null&&(e.alternate=null,Yh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dr],delete t[ia],delete t[Vl],delete t[I0],delete t[A0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zh(e){return e.tag===5||e.tag===3||e.tag===4}function em(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pi));else if(n!==4&&(e=e.child,e!==null))for(sc(e,t,r),e=e.sibling;e!==null;)sc(e,t,r),e=e.sibling}function ac(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ac(e,t,r),e=e.sibling;e!==null;)ac(e,t,r),e=e.sibling}var et=null,Xt=!1;function jr(e,t,r){for(r=r.child;r!==null;)ef(e,t,r),r=r.sibling}function ef(e,t,r){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(no,r)}catch{}switch(r.tag){case 5:lt||Qn(r,t);case 6:var n=et,s=Xt;et=null,jr(e,t,r),et=n,Xt=s,et!==null&&(Xt?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(Xt?(e=et,r=r.stateNode,e.nodeType===8?Ko(e.parentNode,r):e.nodeType===1&&Ko(e,r),ta(e)):Ko(et,r.stateNode));break;case 4:n=et,s=Xt,et=r.stateNode.containerInfo,Xt=!0,jr(e,t,r),et=n,Xt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&rc(r,t,o),s=s.next}while(s!==n)}jr(e,t,r);break;case 1:if(!lt&&(Qn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){De(r,t,l)}jr(e,t,r);break;case 21:jr(e,t,r);break;case 22:r.mode&1?(lt=(n=lt)||r.memoizedState!==null,jr(e,t,r),lt=n):jr(e,t,r);break;default:jr(e,t,r)}}function tm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new G0),t.forEach(function(n){var s=sx.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Kt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,Xt=!1;break e;case 3:et=l.stateNode.containerInfo,Xt=!0;break e;case 4:et=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(et===null)throw Error(F(160));ef(a,o,s),et=null,Xt=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(u){De(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tf(t,e),t=t.sibling}function tf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kt(t,e),or(e),n&4){try{qs(3,e,e.return),mo(3,e)}catch(b){De(e,e.return,b)}try{qs(5,e,e.return)}catch(b){De(e,e.return,b)}}break;case 1:Kt(t,e),or(e),n&512&&r!==null&&Qn(r,r.return);break;case 5:if(Kt(t,e),or(e),n&512&&r!==null&&Qn(r,r.return),e.flags&32){var s=e.stateNode;try{Xs(s,"")}catch(b){De(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&kp(s,a),Tl(l,o);var u=Tl(l,a);for(o=0;o<d.length;o+=2){var p=d[o],h=d[o+1];p==="style"?Pp(s,h):p==="dangerouslySetInnerHTML"?Cp(s,h):p==="children"?Xs(s,h):Mc(s,p,h,u)}switch(l){case"input":Nl(s,a);break;case"textarea":Np(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Xn(s,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?Xn(s,!!a.multiple,a.defaultValue,!0):Xn(s,!!a.multiple,a.multiple?[]:"",!1))}s[ia]=a}catch(b){De(e,e.return,b)}}break;case 6:if(Kt(t,e),or(e),n&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(b){De(e,e.return,b)}}break;case 3:if(Kt(t,e),or(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ta(t.containerInfo)}catch(b){De(e,e.return,b)}break;case 4:Kt(t,e),or(e);break;case 13:Kt(t,e),or(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(gd=Le())),n&4&&tm(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(lt=(u=lt)||p,Kt(t,e),lt=u):Kt(t,e),or(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(Q=e,p=e.child;p!==null;){for(h=Q=p;Q!==null;){switch(m=Q,y=m.child,m.tag){case 0:case 11:case 14:case 15:qs(4,m,m.return);break;case 1:Qn(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){De(n,r,b)}}break;case 5:Qn(m,m.return);break;case 22:if(m.memoizedState!==null){nm(h);continue}}y!==null?(y.return=m,Q=y):nm(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,d=h.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Ep("display",o))}catch(b){De(e,e.return,b)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){De(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kt(t,e),or(e),n&4&&tm(e);break;case 21:break;default:Kt(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zh(r)){var n=r;break e}r=r.return}throw Error(F(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Xs(s,""),n.flags&=-33);var a=em(e);ac(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=em(e);sc(e,l,o);break;default:throw Error(F(161))}}catch(d){De(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function J0(e,t,r){Q=e,rf(e)}function rf(e,t,r){for(var n=(e.mode&1)!==0;Q!==null;){var s=Q,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ha;if(!o){var l=s.alternate,d=l!==null&&l.memoizedState!==null||lt;l=Ha;var u=lt;if(Ha=o,(lt=d)&&!u)for(Q=s;Q!==null;)o=Q,d=o.child,o.tag===22&&o.memoizedState!==null?sm(s):d!==null?(d.return=o,Q=d):sm(s);for(;a!==null;)Q=a,rf(a),a=a.sibling;Q=s,Ha=l,lt=u}rm(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Q=a):rm(e)}}function rm(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||mo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!lt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Qt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Uu(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Uu(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&ta(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}lt||t.flags&512&&nc(t)}catch(m){De(t,t.return,m)}}if(t===e){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function nm(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function sm(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mo(4,t)}catch(d){De(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(d){De(t,s,d)}}var a=t.return;try{nc(t)}catch(d){De(t,a,d)}break;case 5:var o=t.return;try{nc(t)}catch(d){De(t,o,d)}}}catch(d){De(t,t.return,d)}if(t===e){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var X0=Math.ceil,$i=Er.ReactCurrentDispatcher,hd=Er.ReactCurrentOwner,Bt=Er.ReactCurrentBatchConfig,ue=0,Qe=null,Be=null,tt=0,Tt=0,Jn=Zr(0),qe=0,ma=null,Nn=0,po=0,fd=0,Hs=null,vt=null,gd=0,ds=1/0,yr=null,Ui=!1,ic=null,Kr=null,Ka=!1,zr=null,zi=0,Ks=0,oc=null,fi=-1,gi=0;function ft(){return ue&6?Le():fi!==-1?fi:fi=Le()}function Gr(e){return e.mode&1?ue&2&&tt!==0?tt&-tt:D0.transition!==null?(gi===0&&(gi=Up()),gi):(e=he,e!==0||(e=window.event,e=e===void 0?16:Kp(e.type)),e):1}function rr(e,t,r,n){if(50<Ks)throw Ks=0,oc=null,Error(F(185));wa(e,r,n),(!(ue&2)||e!==Qe)&&(e===Qe&&(!(ue&2)&&(po|=r),qe===4&&Fr(e,tt)),_t(e,n),r===1&&ue===0&&!(t.mode&1)&&(ds=Le()+500,lo&&en()))}function _t(e,t){var r=e.callbackNode;Dv(e,t);var n=Ni(e,e===Qe?tt:0);if(n===0)r!==null&&pu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&pu(r),t===1)e.tag===0?j0(am.bind(null,e)):mh(am.bind(null,e)),T0(function(){!(ue&6)&&en()}),r=null;else{switch(zp(n)){case 1:r=Bc;break;case 4:r=Fp;break;case 16:r=ki;break;case 536870912:r=$p;break;default:r=ki}r=uf(r,nf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nf(e,t){if(fi=-1,gi=0,ue&6)throw Error(F(327));var r=e.callbackNode;if(rs()&&e.callbackNode!==r)return null;var n=Ni(e,e===Qe?tt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Bi(e,n);else{t=n;var s=ue;ue|=2;var a=af();(Qe!==e||tt!==t)&&(yr=null,ds=Le()+500,vn(e,t));do try{ex();break}catch(l){sf(e,l)}while(1);td(),$i.current=a,ue=s,Be!==null?t=0:(Qe=null,tt=0,t=qe)}if(t!==0){if(t===2&&(s=Dl(e),s!==0&&(n=s,t=lc(e,s))),t===1)throw r=ma,vn(e,0),Fr(e,n),_t(e,Le()),r;if(t===6)Fr(e,n);else{if(s=e.current.alternate,!(n&30)&&!Y0(s)&&(t=Bi(e,n),t===2&&(a=Dl(e),a!==0&&(n=a,t=lc(e,a))),t===1))throw r=ma,vn(e,0),Fr(e,n),_t(e,Le()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(F(345));case 2:ln(e,vt,yr);break;case 3:if(Fr(e,n),(n&130023424)===n&&(t=gd+500-Le(),10<t)){if(Ni(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ft(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Bl(ln.bind(null,e,vt,yr),t);break}ln(e,vt,yr);break;case 4:if(Fr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-tr(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=Le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*X0(n/1960))-n,10<n){e.timeoutHandle=Bl(ln.bind(null,e,vt,yr),n);break}ln(e,vt,yr);break;case 5:ln(e,vt,yr);break;default:throw Error(F(329))}}}return _t(e,Le()),e.callbackNode===r?nf.bind(null,e):null}function lc(e,t){var r=Hs;return e.current.memoizedState.isDehydrated&&(vn(e,t).flags|=256),e=Bi(e,t),e!==2&&(t=vt,vt=r,t!==null&&cc(t)),e}function cc(e){vt===null?vt=e:vt.push.apply(vt,e)}function Y0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!nr(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t){for(t&=~fd,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tr(t),n=1<<r;e[r]=-1,t&=~n}}function am(e){if(ue&6)throw Error(F(327));rs();var t=Ni(e,0);if(!(t&1))return _t(e,Le()),null;var r=Bi(e,t);if(e.tag!==0&&r===2){var n=Dl(e);n!==0&&(t=n,r=lc(e,n))}if(r===1)throw r=ma,vn(e,0),Fr(e,t),_t(e,Le()),r;if(r===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ln(e,vt,yr),_t(e,Le()),null}function yd(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(ds=Le()+500,lo&&en())}}function Sn(e){zr!==null&&zr.tag===0&&!(ue&6)&&rs();var t=ue;ue|=1;var r=Bt.transition,n=he;try{if(Bt.transition=null,he=1,e)return e()}finally{he=n,Bt.transition=r,ue=t,!(ue&6)&&en()}}function vd(){Tt=Jn.current,Se(Jn)}function vn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,P0(r)),Be!==null)for(r=Be.return;r!==null;){var n=r;switch(Yc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ti();break;case 3:ls(),Se(wt),Se(ct),od();break;case 5:id(n);break;case 4:ls();break;case 13:Se(Oe);break;case 19:Se(Oe);break;case 10:rd(n.type._context);break;case 22:case 23:vd()}r=r.return}if(Qe=e,Be=e=Qr(e.current,null),tt=Tt=t,qe=0,ma=null,fd=po=Nn=0,vt=Hs=null,fn!==null){for(t=0;t<fn.length;t++)if(r=fn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}fn=null}return e}function sf(e,t){do{var r=Be;try{if(td(),mi.current=Fi,Mi){for(var n=Ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Mi=!1}if(kn=0,Ge=We=Ie=null,Ws=!1,ca=0,hd.current=null,r===null||r.return===null){qe=1,ma=t,Be=null;break}e:{var a=e,o=r.return,l=r,d=t;if(t=tt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,p=l,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=Hu(o);if(y!==null){y.flags&=-257,Ku(y,o,l,a,t),y.mode&1&&qu(a,u,t),t=y,d=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(d),t.updateQueue=b}else v.add(d);break e}else{if(!(t&1)){qu(a,u,t),xd();break e}d=Error(F(426))}}else if(Ee&&l.mode&1){var k=Hu(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Ku(k,o,l,a,t),Zc(cs(d,l));break e}}a=d=cs(d,l),qe!==4&&(qe=2),Hs===null?Hs=[a]:Hs.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=zh(a,d,t);$u(a,w);break e;case 1:l=d;var f=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kr===null||!Kr.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=Bh(a,l,t);$u(a,_);break e}}a=a.return}while(a!==null)}lf(r)}catch(E){t=E,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(1)}function af(){var e=$i.current;return $i.current=Fi,e===null?Fi:e}function xd(){(qe===0||qe===3||qe===2)&&(qe=4),Qe===null||!(Nn&268435455)&&!(po&268435455)||Fr(Qe,tt)}function Bi(e,t){var r=ue;ue|=2;var n=af();(Qe!==e||tt!==t)&&(yr=null,vn(e,t));do try{Z0();break}catch(s){sf(e,s)}while(1);if(td(),ue=r,$i.current=n,Be!==null)throw Error(F(261));return Qe=null,tt=0,qe}function Z0(){for(;Be!==null;)of(Be)}function ex(){for(;Be!==null&&!Sv();)of(Be)}function of(e){var t=df(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?lf(e):Be=t,hd.current=null}function lf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=K0(r,t),r!==null){r.flags&=32767,Be=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Be=null;return}}else if(r=H0(r,t,Tt),r!==null){Be=r;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);qe===0&&(qe=5)}function ln(e,t,r){var n=he,s=Bt.transition;try{Bt.transition=null,he=1,tx(e,t,r,n)}finally{Bt.transition=s,he=n}return null}function tx(e,t,r,n){do rs();while(zr!==null);if(ue&6)throw Error(F(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Rv(e,a),e===Qe&&(Be=Qe=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ka||(Ka=!0,uf(ki,function(){return rs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Bt.transition,Bt.transition=null;var o=he;he=1;var l=ue;ue|=4,hd.current=null,Q0(e,r),tf(r,e),b0(Ul),Si=!!$l,Ul=$l=null,e.current=r,J0(r),Cv(),ue=l,he=o,Bt.transition=a}else e.current=r;if(Ka&&(Ka=!1,zr=e,zi=s),a=e.pendingLanes,a===0&&(Kr=null),Tv(r.stateNode),_t(e,Le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ui)throw Ui=!1,e=ic,ic=null,e;return zi&1&&e.tag!==0&&rs(),a=e.pendingLanes,a&1?e===oc?Ks++:(Ks=0,oc=e):Ks=0,en(),null}function rs(){if(zr!==null){var e=zp(zi),t=Bt.transition,r=he;try{if(Bt.transition=null,he=16>e?16:e,zr===null)var n=!1;else{if(e=zr,zr=null,zi=0,ue&6)throw Error(F(331));var s=ue;for(ue|=4,Q=e.current;Q!==null;){var a=Q,o=a.child;if(Q.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(Q=u;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:qs(8,p,a)}var h=p.child;if(h!==null)h.return=p,Q=h;else for(;Q!==null;){p=Q;var m=p.sibling,y=p.return;if(Yh(p),p===u){Q=null;break}if(m!==null){m.return=y,Q=m;break}Q=y}}}var v=a.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}Q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Q=o;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qs(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Q=w;break e}Q=a.return}}var f=e.current;for(Q=f;Q!==null;){o=Q;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,Q=g;else e:for(o=f;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(E){De(l,l.return,E)}if(l===o){Q=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Q=_;break e}Q=l.return}}if(ue=s,en(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(no,e)}catch{}n=!0}return n}finally{he=r,Bt.transition=t}}return!1}function im(e,t,r){t=cs(r,t),t=zh(e,t,1),e=Hr(e,t,1),t=ft(),e!==null&&(wa(e,1,t),_t(e,t))}function De(e,t,r){if(e.tag===3)im(e,e,r);else for(;t!==null;){if(t.tag===3){im(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kr===null||!Kr.has(n))){e=cs(r,e),e=Bh(t,e,1),t=Hr(t,e,1),e=ft(),t!==null&&(wa(t,1,e),_t(t,e));break}}t=t.return}}function rx(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&r,Qe===e&&(tt&r)===r&&(qe===4||qe===3&&(tt&130023424)===tt&&500>Le()-gd?vn(e,0):fd|=r),_t(e,t)}function cf(e,t){t===0&&(e.mode&1?(t=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):t=1);var r=ft();e=Sr(e,t),e!==null&&(wa(e,t,r),_t(e,r))}function nx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),cf(e,r)}function sx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(t),cf(e,r)}var df;df=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)xt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return xt=!1,q0(e,t,r);xt=!!(e.flags&131072)}else xt=!1,Ee&&t.flags&1048576&&ph(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;hi(e,t),e=t.pendingProps;var s=as(t,ct.current);ts(t,r),s=cd(null,t,n,e,s,r);var a=dd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(n)?(a=!0,Oi(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sd(t),s.updater=uo,t.stateNode=s,s._reactInternals=t,Ql(t,n,e,r),t=Yl(null,t,n,!0,a,r)):(t.tag=0,Ee&&a&&Xc(t),pt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(hi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ix(n),e=Qt(n,e),s){case 0:t=Xl(null,t,n,e,r);break e;case 1:t=Ju(null,t,n,e,r);break e;case 11:t=Gu(null,t,n,e,r);break e;case 14:t=Qu(null,t,n,Qt(n.type,e),r);break e}throw Error(F(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),Xl(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),Ju(e,t,n,s,r);case 3:e:{if(Hh(t),e===null)throw Error(F(387));n=t.pendingProps,a=t.memoizedState,s=a.element,xh(e,t),Ri(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=cs(Error(F(423)),t),t=Xu(e,t,n,r,s);break e}else if(n!==s){s=cs(Error(F(424)),t),t=Xu(e,t,n,r,s);break e}else for(At=qr(t.stateNode.containerInfo.firstChild),jt=t,Ee=!0,Zt=null,r=yh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(is(),n===s){t=Cr(e,t,r);break e}pt(e,t,n,r)}t=t.child}return t;case 5:return wh(t),e===null&&Hl(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,zl(n,s)?o=null:a!==null&&zl(n,a)&&(t.flags|=32),qh(e,t),pt(e,t,o,r),t.child;case 6:return e===null&&Hl(t),null;case 13:return Kh(e,t,r);case 4:return ad(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=os(t,null,n,r):pt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),Gu(e,t,n,s,r);case 7:return pt(e,t,t.pendingProps,r),t.child;case 8:return pt(e,t,t.pendingProps.children,r),t.child;case 12:return pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,_e(ji,n._currentValue),n._currentValue=o,a!==null)if(nr(a.value,o)){if(a.children===s.children&&!wt.current){t=Cr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(a.tag===1){d=_r(-1,r&-r),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?d.next=d:(d.next=p.next,p.next=d),u.pending=d}}a.lanes|=r,d=a.alternate,d!==null&&(d.lanes|=r),Kl(a.return,r,t),l.lanes|=r;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(F(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Kl(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}pt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ts(t,r),s=Vt(s),n=n(s),t.flags|=1,pt(e,t,n,r),t.child;case 14:return n=t.type,s=Qt(n,t.pendingProps),s=Qt(n.type,s),Qu(e,t,n,s,r);case 15:return Vh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qt(n,s),hi(e,t),t.tag=1,bt(n)?(e=!0,Oi(t)):e=!1,ts(t,r),Uh(t,n,s),Ql(t,n,s,r),Yl(null,t,n,!0,e,r);case 19:return Gh(e,t,r);case 22:return Wh(e,t,r)}throw Error(F(156,t.tag))};function uf(e,t){return Mp(e,t)}function ax(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,r,n){return new ax(e,t,r,n)}function wd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ix(e){if(typeof e=="function")return wd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$c)return 11;if(e===Uc)return 14}return 2}function Qr(e,t){var r=e.alternate;return r===null?(r=zt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yi(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")wd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Un:return xn(r.children,s,a,t);case Fc:o=8,s|=8;break;case xl:return e=zt(12,r,t,s|2),e.elementType=xl,e.lanes=a,e;case wl:return e=zt(13,r,t,s),e.elementType=wl,e.lanes=a,e;case bl:return e=zt(19,r,t,s),e.elementType=bl,e.lanes=a,e;case wp:return ho(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vp:o=10;break e;case xp:o=9;break e;case $c:o=11;break e;case Uc:o=14;break e;case Rr:o=16,n=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=zt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function xn(e,t,r,n){return e=zt(7,e,n,t),e.lanes=r,e}function ho(e,t,r,n){return e=zt(22,e,n,t),e.elementType=wp,e.lanes=r,e.stateNode={isHidden:!1},e}function tl(e,t,r){return e=zt(6,e,null,t),e.lanes=r,e}function rl(e,t,r){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ox(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bd(e,t,r,n,s,a,o,l,d){return e=new ox(e,t,r,l,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=zt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(a),e}function lx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$n,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mf(e){if(!e)return Xr;e=e._reactInternals;e:{if(Pn(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var r=e.type;if(bt(r))return uh(e,r,t)}return t}function pf(e,t,r,n,s,a,o,l,d){return e=bd(r,n,!0,e,s,a,o,l,d),e.context=mf(null),r=e.current,n=ft(),s=Gr(r),a=_r(n,s),a.callback=t??null,Hr(r,a,s),e.current.lanes=s,wa(e,s,n),_t(e,n),e}function fo(e,t,r,n){var s=t.current,a=ft(),o=Gr(s);return r=mf(r),t.context===null?t.context=r:t.pendingContext=r,t=_r(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Hr(s,t,o),e!==null&&(rr(e,s,o,a),ui(e,s,o)),o}function Vi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function om(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _d(e,t){om(e,t),(e=e.alternate)&&om(e,t)}function cx(){return null}var hf=typeof reportError=="function"?reportError:function(e){console.error(e)};function kd(e){this._internalRoot=e}go.prototype.render=kd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));fo(e,t,null,null)};go.prototype.unmount=kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sn(function(){fo(null,e,null,null)}),t[Nr]=null}};function go(e){this._internalRoot=e}go.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mr.length&&t!==0&&t<Mr[r].priority;r++);Mr.splice(r,0,e),r===0&&Hp(e)}};function Nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lm(){}function dx(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Vi(o);a.call(u)}}var o=pf(t,n,e,0,null,!1,!1,"",lm);return e._reactRootContainer=o,e[Nr]=o.current,sa(e.nodeType===8?e.parentNode:e),Sn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Vi(d);l.call(u)}}var d=bd(e,0,!1,null,null,!1,!1,"",lm);return e._reactRootContainer=d,e[Nr]=d.current,sa(e.nodeType===8?e.parentNode:e),Sn(function(){fo(t,d,r,n)}),d}function vo(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var d=Vi(o);l.call(d)}}fo(t,o,e,s)}else o=dx(r,t,e,s,n);return Vi(o)}Bp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ls(t.pendingLanes);r!==0&&(Vc(t,r|1),_t(t,Le()),!(ue&6)&&(ds=Le()+500,en()))}break;case 13:Sn(function(){var n=Sr(e,1);if(n!==null){var s=ft();rr(n,e,1,s)}}),_d(e,1)}};Wc=function(e){if(e.tag===13){var t=Sr(e,134217728);if(t!==null){var r=ft();rr(t,e,134217728,r)}_d(e,134217728)}};Vp=function(e){if(e.tag===13){var t=Gr(e),r=Sr(e,t);if(r!==null){var n=ft();rr(r,e,t,n)}_d(e,t)}};Wp=function(){return he};qp=function(e,t){var r=he;try{return he=e,t()}finally{he=r}};Il=function(e,t,r){switch(t){case"input":if(Nl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=oo(n);if(!s)throw Error(F(90));_p(n),Nl(n,s)}}}break;case"textarea":Np(e,r);break;case"select":t=r.value,t!=null&&Xn(e,!!r.multiple,t,!1)}};Ip=yd;Ap=Sn;var ux={usingClientEntryPoint:!1,Events:[_a,Wn,oo,Tp,Op,yd]},js={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mx={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rp(e),e===null?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{no=Ga.inject(mx),ur=Ga}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ux;Lt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(t))throw Error(F(200));return lx(e,t,null,r)};Lt.createRoot=function(e,t){if(!Nd(e))throw Error(F(299));var r=!1,n="",s=hf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=bd(e,1,!1,null,null,r,!1,n,s),e[Nr]=t.current,sa(e.nodeType===8?e.parentNode:e),new kd(t)};Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Rp(t),e=e===null?null:e.stateNode,e};Lt.flushSync=function(e){return Sn(e)};Lt.hydrate=function(e,t,r){if(!yo(t))throw Error(F(200));return vo(null,e,t,!0,r)};Lt.hydrateRoot=function(e,t,r){if(!Nd(e))throw Error(F(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=hf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=pf(t,null,e,1,r??null,s,!1,a,o),e[Nr]=t.current,sa(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new go(t)};Lt.render=function(e,t,r){if(!yo(t))throw Error(F(200));return vo(null,e,t,!1,r)};Lt.unmountComponentAtNode=function(e){if(!yo(e))throw Error(F(40));return e._reactRootContainer?(Sn(function(){vo(null,null,e,!1,function(){e._reactRootContainer=null,e[Nr]=null})}),!0):!1};Lt.unstable_batchedUpdates=yd;Lt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!yo(r))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return vo(e,t,r,!1,n)};Lt.version="18.3.1-next-f1338f8080-20240426";function ff(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ff)}catch(e){console.error(e)}}ff(),hp.exports=Lt;var px=hp.exports,cm=px;yl.createRoot=cm.createRoot,yl.hydrateRoot=cm.hydrateRoot;var oe=(e=>(e.CEO="CEO",e.ADMIN="Admin",e.ACCOUNT_MANAGER="Account Manager",e.STORE_MANAGER="Store Manager",e.STORE_STAFF="Store Staff",e.POS_OPERATOR="POS Operator",e))(oe||{}),Me=(e=>(e.IN_STOCK="In Stock",e.LOW_STOCK="Low Stock",e.OUT_OF_STOCK="Out of Stock",e))(Me||{}),dc=(e=>(e.PENDING="Pending",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e))(dc||{}),vi=(e=>(e.CUSTOMER_CHOICE="Customer Choice",e.DAMAGED_PRODUCT="Damaged Product",e.WRONG_ITEM="Wrong Item",e))(vi||{}),er=(e=>(e.PENDING="Pending",e.PROCESSING="Processing",e.READY_FOR_PICKUP="Ready for Pickup",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e))(er||{}),ie=(e=>(e.UNPAID="Unpaid",e.PAID="Paid",e.PARTIALLY_PAID="Partially Paid",e.REFUNDED="Refunded",e.CONSOLIDATED="Consolidated",e))(ie||{}),Ue=(e=>(e.DUE="Due",e.PAID="Paid",e.OVERDUE="Overdue",e))(Ue||{});const hx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 6.087c0-.355.186-.676.401-.959.221-.29.359-.6.359-.962a2.25 2.25 0 0 0-4.5 0c0 .362.138.672.359.962.215.283.401.604.401.959v.458c0 .355-.186.676-.401.959a2.25 2.25 0 0 1-3.59 1.908c-.29-.221-.6-.359-.962-.359a2.25 2.25 0 0 0 0 4.5c.362 0 .672-.138.962-.359a2.25 2.25 0 0 1 3.59 1.908c.215.283.401.604.401.959v.458c0 .355-.186.676-.401.959a2.25 2.25 0 1 1-3.59-1.908c-.29-.221-.6-.359-.962-.359a2.25 2.25 0 0 0-2.25 2.25c0 .362.138.672.359.962.215.283.401.604.401.959v.458c0 .355-.186.676-.401.959a2.25 2.25 0 1 0 4.5 0c0-.362-.138-.672-.359-.962-.215-.283-.401-.604-.401-.959v-.458c0-.355.186-.676.401-.959a2.25 2.25 0 0 1 3.59-1.908c.29.221.6.359.962.359a2.25 2.25 0 0 0 2.25-2.25c0-.362-.138-.672-.359-.962a2.25 2.25 0 0 1-3.59-1.908c-.215-.283-.401-.604-.401-.959v-.458ZM12 12a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"})}),fx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"})}),gf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75 14.25 12m0 0 2.25 2.25M14.25 12 12 14.25m-2.58 4.92-6.374-6.375a1.125 1.125 0 0 1 0-1.59L9.42 4.83c.21-.211.497-.33.795-.33H19.5a2.25 2.25 0 0 1 2.25 2.25v10.5a2.25 2.25 0 0 1-2.25 2.25h-9.284c-.298 0-.585-.119-.795-.33Z"})}),gx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),yf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l.354-.354a3.75 3.75 0 0 0-5.303-5.303l-.354.353.354.354 5.303 5.303-.354-.354Zm-4.638-5.303L6.406 4.44l-3.372 3.372a5.25 5.25 0 0 0 7.425 7.425l3.372-3.372-5.303-5.303Z"})}),vf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),xf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),yx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),xo=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),Sd=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"})}),us=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),Cn=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),vx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})}),ys=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Tn=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),sr=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.124-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.077-2.09.921-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Rt=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ar=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),wn=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),xi=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})}),xx=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5A.75.75 0 0 1 4.5 3.75h4.5a.75.75 0 0 1 0 1.5H5.25V9a.75.75 0 0 1-1.5 0V4.5Zm15 0A.75.75 0 0 0 19.5 3.75h-4.5a.75.75 0 0 0 0 1.5h3.75V9a.75.75 0 0 0 1.5 0V4.5Zm-15 15A.75.75 0 0 0 4.5 20.25h4.5a.75.75 0 0 0 0-1.5H5.25V15a.75.75 0 0 0-1.5 0v4.5ZM19.5 15a.75.75 0 0 0-1.5 0v3.75h-3.75a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 .75-.75v-4.5Z"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 12h9M12 7.5v9"})]}),Cd=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),vs=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),Na=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),wf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5v15a.75.75 0 0 0 .75.75h15a.75.75 0 0 0 .75-.75V4.5a.75.75 0 0 0-.75-.75h-15a.75.75 0 0 0-.75.75Zm4.5 0v15m4.5-15v15m4.5-15v15"})}),xe=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),wo=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),Wi=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),wx=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.211 2.211 0 0 1 5.25 4.5h13.5c1.152 0 2.185.74 2.535 1.838l.053.161.053.161A2.211 2.211 0 0 1 20.25 9.25h-5.462c.328.058.656.124.98.195l.328.071c.327.07.652.146.97.218l.32.074c.319.074.63.155.934.24l.322.091a2.21 2.21 0 0 1 1.76 2.053l-.003.003-.002.002-.001.001-.001.001-.001.001a2.21 2.21 0 0 1-2.21-2.209l.002-.002.003-.003.004-.004.004-.004.004-.004.004-.004.004-.003.004-.003.004-.003.003-.003.003-.002.003-.002.003-.002c-.004-.336-.01-.67-.018-1H5.25a2.211 2.211 0 0 1-2.21-2.209l.004-.004Z"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"})]}),bx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.211-.992-.58-1.355l-3.116-3.117a2.25 2.25 0 0 0-1.581-.659h-1.592a2.25 2.25 0 0 0-2.15 1.614l-.248 1.118a2.25 2.25 0 0 1-2.175 1.834h-1.5a2.25 2.25 0 0 1-2.25-2.25Z"})}),_x=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),kx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),bo=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Nx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),bf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),_f=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),Sx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),Cx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),Ed=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15A2.25 2.25 0 0 0 2.25 6.75v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),kf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})}),Nf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),xs=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0c1.291.243 2.56.486 3.831.686a1.125 1.125 0 0 1 .844 1.246l-.153.868A1.125 1.125 0 0 1 20.341 22.5H3.659a1.125 1.125 0 0 1-.844-1.77l-.153-.868a1.125 1.125 0 0 1 .844-1.246c1.271-.2 2.54-.443 3.831-.686M6.34 18v-4.161c0-.858.71-1.57 1.571-1.57h.643a1.571 1.571 0 0 1 1.57 1.57v4.161m8.883-4.161v4.161c0 .858-.71 1.57-1.57 1.57h-.644a1.571 1.571 0 0 0-1.57-1.57V13.83c0-.857.71-1.57 1.57-1.57h.644a1.571 1.571 0 0 1 1.57 1.57Z"})}),Ex=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})]}),Px=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c.51 0 .962-.343 1.087-.835l1.838-5.513a1.875 1.875 0 0 0-1.642-2.583H5.169m-1.5-3V3"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 21a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-9 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})]}),Tx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Pd=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.742-.511 7.475 7.475 0 0 0-11.484 0A9.095 9.095 0 0 0 6 18.72m12 0a9.043 9.043 0 0 1-12 0m12 0c0-2.392-1.332-4.542-3.334-5.667C15.334 12.022 13.667 12 12 12c-1.667 0-3.334.022-4.666.386C5.332 13.51 4 15.668 4 18m12-6.75a3 3 0 1 0-6 0 3 3 0 0 0 6 0Zm-9-3a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm12 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"})}),Td=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 0 0 3.375-3.375h1.5a1.125 1.125 0 0 1 1.125 1.125v-1.5a3.375 3.375 0 0 0 3.375-3.375H9.75"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 18.75h-1.5a3.375 3.375 0 0 0-3.375-3.375H12m0 0V9.75m0 5.625v-1.5a2.25 2.25 0 0 0-2.25-2.25H3.375M19.5 12.75v-1.5a2.25 2.25 0 0 0-2.25-2.25H3.375"})]}),pr=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9H3.75M12 12.75h.008v.008H12v-.008Z"})}),Ox=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),Ix=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.742-.511 7.475 7.475 0 0 0-11.484 0A9.095 9.095 0 0 0 6 18.72m12 0a9.043 9.043 0 0 1-12 0m12 0c0-2.392-1.332-4.542-3.334-5.667C15.334 12.022 13.667 12 12 12c-1.667 0-3.334.022-4.666.386C5.332 13.51 4 15.668 4 18"})}),pa=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18"})}),Sf=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 18 9-9 4.5 4.5L21.75 6"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 18v-6h-6"})]}),Ax=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-12v.75m0 3v.75m0 3v.75m0 3V18m-3 .75h18A2.25 2.25 0 0 0 21 16.5V7.5A2.25 2.25 0 0 0 18.75 5.25H5.25A2.25 2.25 0 0 0 3 7.5v9A2.25 2.25 0 0 0 5.25 18.75h1.5"})}),Cf=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})}),uc=({className:e})=>c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 0 1 0 1.985c.002.379.137.752.43.992l1.003.827c.424.35.534.954.26 1.431l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.333.183-.582.495-.645.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-1.985c-.002-.379-.137-.752-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.281Z"}),i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),ha=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jx=({className:e})=>i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:i("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Dx=({currentUser:e,onNavigate:t,activeView:r,links:n,storeSettings:s,t:a,language:o,onLogout:l,isOpen:d,onClose:u,originalUser:p,onStartSimulation:h,onStopSimulation:m})=>{var S,O;const y=C=>{t(C),u()},v=()=>{l(),u()},b=C=>e.permissions?!!e.permissions.sidebar[C]:!1,k=Object.fromEntries(Object.entries(n).filter(([C])=>!["my_profile","store_settings"].includes(C)&&b(C))),w=(S=e.permissions)==null?void 0:S.store_settings.read,f=(O=e.permissions)==null?void 0:O.dashboard_management.write,g=C=>{const P=`role_${C.toLowerCase().replace(/\s/g,"_")}`;return a(P)},_=p||e,E=_.role.includes(oe.ADMIN)||_.role.includes(oe.CEO);return c("aside",{className:`bg-primary text-white flex flex-col p-4 no-print w-64 fixed inset-y-0 left-0 z-40 transition-transform duration-300 ease-in-out md:relative md:translate-x-0 md:flex-shrink-0 ${d?"translate-x-0":"-translate-x-full"}`,children:[c("div",{className:"flex items-center gap-3 mb-8 px-2 flex-shrink-0",children:[s!=null&&s.logo_url?i("img",{src:s.logo_url,alt:"Store Logo",className:"h-[4.5rem] w-auto"}):i(yf,{className:"h-14 w-14 text-secondary"}),i("h1",{className:"text-lg font-bold",children:s!=null&&s.store_name?s.store_name[o]:" "})]}),c("div",{className:"flex-1 overflow-y-auto",children:[c("button",{onClick:()=>y("my_profile"),className:"flex items-center text-left w-full gap-3 mb-4 p-3 bg-blue-900/50 rounded-lg hover:bg-blue-900 transition-colors",children:[i("img",{src:e.avatar,alt:e.name,className:"h-10 w-10 rounded-full border-2 border-secondary"}),c("div",{children:[i("p",{className:"font-semibold",children:e.name}),i("p",{className:"text-xs text-blue-200",children:e.role.map(g).join(", ")})]})]}),E&&i("div",{className:"mb-4 px-2 py-3 bg-blue-900/50 rounded-lg",children:p?c("div",{children:[i("p",{className:"text-xs font-medium text-blue-200",children:"Simulation Active"}),c("p",{className:"font-semibold text-white",children:["As: ",e.role.map(g).join(", ")]}),i("button",{onClick:m,className:"w-full mt-2 text-center text-sm font-medium text-white bg-secondary py-1.5 rounded-md hover:bg-orange-700",children:"Stop Simulation"})]}):c("div",{children:[i("label",{htmlFor:"simulate-role",className:"block text-xs font-medium text-blue-200",children:a("simulate_user")}),c("select",{id:"simulate-role",value:"",onChange:C=>h(C.target.value),className:"mt-1 block w-full pl-3 pr-10 py-1.5 text-base border-gray-300 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm rounded-md bg-blue-800 text-white",children:[i("option",{value:"",disabled:!0,children:"Select a role..."}),Object.values(oe).filter(C=>C!==oe.CEO).map(C=>i("option",{value:C,children:a(`role_${C.toLowerCase().replace(/\s/g,"_")}`)},C))]})]})}),i("nav",{className:"space-y-2",children:Object.entries(k).map(([C,P])=>c("button",{onClick:()=>y(C),className:`w-full text-left flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors duration-200 ${r===C?"bg-secondary text-white":"text-blue-100 hover:bg-blue-800"}`,children:[i("span",{className:"text-lg",children:P}),a(C)]},C))})]}),c("div",{className:"border-t border-blue-700/50 pt-2 space-y-1 flex-shrink-0",children:[w&&c("button",{onClick:()=>y("store_settings"),className:`w-full text-left flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors duration-200 ${r==="store_settings"?"bg-secondary text-white":"text-blue-100 hover:bg-blue-800"}`,children:[i(uc,{className:"h-5 w-5"}),a("store_settings")]}),f&&c("button",{onClick:()=>y("dashboard_management"),className:`w-full text-left flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors duration-200 ${r==="dashboard_management"?"bg-secondary text-white":"text-blue-100 hover:bg-blue-800"}`,children:[i(hx,{className:"h-5 w-5"}),a("dashboard_management")]}),w&&c("button",{onClick:()=>y("category_management"),className:`w-full text-left flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors duration-200 ${r==="category_management"?"bg-secondary text-white":"text-blue-100 hover:bg-blue-800"}`,children:[i(uc,{className:"h-5 w-5"}),a("category_management")]}),c("button",{onClick:()=>y("my_profile"),className:`w-full text-left flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors duration-200 ${r==="my_profile"?"bg-secondary text-white":"text-blue-100 hover:bg-blue-800"}`,children:[i(xf,{className:"h-5 w-5"}),a("my_profile")]}),c("button",{onClick:v,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium text-blue-100 hover:bg-blue-800 transition-colors duration-200",children:[i(vf,{className:"h-5 w-5"}),a("logout")]})]})]})},Rx=({currentUser:e,activeView:t,language:r,setLanguage:n,t:s,onOpenSidebar:a,onBack:o,canGoBack:l,originalUser:d,onStopSimulation:u})=>{const p=t,h=d?e.role[0]:"";return c(Re,{children:[d&&c("div",{className:"bg-yellow-400 text-yellow-900 px-4 py-1.5 text-sm font-semibold flex items-center justify-center gap-4 no-print z-20",children:[i(Cn,{className:"h-5 w-5"}),c("span",{children:["You are simulating the role: ",i("strong",{children:s(`role_${h.toLowerCase().replace(/\s/g,"_")}`)})]}),i("button",{onClick:u,className:"ml-4 px-3 py-0.5 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-xs font-bold",children:"Stop Simulation"})]}),c("header",{className:"bg-surface shadow-sm p-4 flex justify-between items-center flex-shrink-0 z-10 no-print",children:[c("div",{className:"flex items-center gap-2",children:[i("button",{onClick:a,className:"p-1 text-text-secondary hover:text-primary md:hidden","aria-label":"Open sidebar",children:i(gx,{className:"h-6 w-6"})}),l&&i("button",{onClick:o,className:"p-1 text-text-secondary hover:text-primary","aria-label":"Go back",children:i(fx,{className:"h-6 w-6"})}),i("h2",{className:"text-xl md:text-2xl font-bold text-text-primary",children:s(p)})]}),c("div",{className:"flex items-center gap-4",children:[c("div",{className:"relative",children:[c("select",{value:r,onChange:m=>n(m.target.value),className:"appearance-none bg-transparent pl-8 pr-4 py-1.5 text-sm font-medium text-text-primary focus:outline-none",children:[i("option",{value:"en",children:"English"}),i("option",{value:"th",children:""})]}),i(Sd,{className:"h-5 w-5 text-gray-400 absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none"})]}),c("button",{className:"relative text-text-secondary hover:text-primary",children:[i(yx,{className:"h-6 w-6"}),i("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-surface"})]})]})]})]})},Ne=({title:e,value:t,icon:r,color:n,onClick:s,isClickable:a,className:o})=>{const l=`bg-surface p-6 rounded-lg shadow flex items-center justify-between ${a?"cursor-pointer hover:shadow-md hover:border-primary border-transparent border":""} ${o||""}`;return c("div",{className:l,onClick:s,children:[c("div",{children:[i("p",{className:"text-sm font-medium text-text-secondary",children:e}),i("p",{className:"text-3xl font-bold text-text-primary",children:t})]}),i("div",{className:`p-3 bg-gray-100 rounded-full ${n}`,children:r})]})},Lx=({transactions:e,t,onNavigate:r})=>{const n=x.useMemo(()=>{const a=new Date().toDateString();return e.filter(o=>new Date(o.date).toDateString()===a).reduce((o,l)=>o+l.total,0)},[e]),s=x.useMemo(()=>{const a=new Date().getMonth(),o=new Date().getFullYear();return e.filter(l=>{const d=new Date(l.date);return d.getMonth()===a&&d.getFullYear()===o}).reduce((l,d)=>l+d.total,0)},[e]);return c("div",{className:"bg-surface rounded-lg shadow p-4 animate-fade-in",children:[i("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t("sales_overview")}),c("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i(Ne,{title:t("sales_today"),value:`${n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(ys,{className:"h-6 w-6"}),color:"text-green-500",onClick:()=>r("sales_history"),isClickable:!0}),i(Ne,{title:t("sales_this_month"),value:`${s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(Sf,{className:"h-6 w-6"}),color:"text-blue-500",onClick:()=>r("sales_history"),isClickable:!0})]})]})},Mx=({bills:e,t,onNavigate:r})=>{const n=x.useMemo(()=>{const s=new Date;s.setHours(0,0,0,0);const a=e.filter(u=>u.status!==Ue.PAID),o=a.reduce((u,p)=>u+(p.amount-p.paidAmount),0),d=a.filter(u=>u.status!==Ue.PAID&&new Date(u.dueDate)<s).reduce((u,p)=>u+(p.amount-p.paidAmount),0);return{totalOwed:o,overdueAmount:d}},[e]);return c("div",{className:"bg-surface rounded-lg shadow p-4 animate-fade-in",children:[i("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t("accounts_payable")}),c("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i(Ne,{title:t("total_owed"),value:`${n.totalOwed.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-orange-500",onClick:()=>r("accounts_payable"),isClickable:!0}),i(Ne,{title:t("overdue_bills"),value:`${n.overdueAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(Cn,{className:"h-6 w-6"}),color:"text-red-500",onClick:()=>r("accounts_payable"),isClickable:!0})]})]})},Fx=({products:e,t,onNavigate:r})=>{const n=x.useMemo(()=>{const s=e.reduce((o,l)=>o+l.variants.length,0),a=e.flatMap(o=>o.variants).filter(o=>o.status===Me.OUT_OF_STOCK).length;return{totalSKUs:s,outOfStockSKUs:a}},[e]);return c("div",{className:"bg-surface rounded-lg shadow p-4 animate-fade-in",children:[i("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t("inventory_overview")}),c("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i(Ne,{title:t("total_skus"),value:n.totalSKUs.toLocaleString(),icon:i(us,{className:"h-6 w-6"}),color:"text-blue-500",onClick:()=>r("inventory"),isClickable:!0}),i(Ne,{title:t("out_of_stock_skus"),value:n.outOfStockSKUs.toLocaleString(),icon:i(vx,{className:"h-6 w-6"}),color:"text-red-500",onClick:()=>r("inventory"),isClickable:!0})]})]})},$x=({products:e,t,onNavigate:r,language:n})=>{const s=x.useMemo(()=>e.flatMap(a=>a.variants.map(o=>({...o,productName:a.name[n]}))).filter(a=>a.status===Me.LOW_STOCK).sort((a,o)=>a.stock-o.stock).slice(0,5),[e,n]);return c("div",{className:"bg-surface rounded-lg shadow p-4 animate-fade-in",children:[i("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t("low_stock_items")}),s.length>0?i("ul",{className:"divide-y divide-gray-200",children:s.map(a=>c("li",{className:"py-2 flex justify-between items-center",children:[c("div",{children:[c("p",{className:"font-medium text-sm",children:[a.productName," (",a.size,")"]}),c("p",{className:"text-xs text-text-secondary",children:["SKU: ",a.sku]})]}),i("span",{className:"font-bold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full text-sm",children:a.stock.toLocaleString()})]},a.id))}):i("p",{className:"text-sm text-text-secondary text-center py-4",children:t("no_low_stock_items")}),i("button",{onClick:()=>r("inventory"),className:"mt-4 w-full text-center text-sm font-semibold text-primary hover:underline",children:t("view_all_inventory")})]})},Ux=({transactions:e,t,onNavigate:r})=>{const n=x.useMemo(()=>{const a=new Date().toDateString(),o=e.filter(m=>new Date(m.date).toDateString()===a),l=o.reduce((m,y)=>m+y.total,0),d=o.filter(m=>m.paymentMethod==="Cash"&&m.payment_status!==ie.UNPAID).reduce((m,y)=>m+y.total,0),u=o.filter(m=>m.paymentMethod==="Card"&&m.payment_status!==ie.UNPAID).reduce((m,y)=>m+y.total,0),p=o.filter(m=>m.paymentMethod==="Bank Transfer"&&m.payment_status!==ie.UNPAID).reduce((m,y)=>m+y.total,0),h=o.filter(m=>m.payment_status===ie.UNPAID).reduce((m,y)=>m+y.total,0);return{totalSales:l,cashSales:d,cardSales:u,bankTransferSales:p,newAR:h}},[e]),s=a=>`${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;return c("div",{className:"bg-surface rounded-lg shadow p-4 animate-fade-in",children:[i("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t("daily_sales_overview")}),c("div",{className:"text-center mb-4 pb-4 border-b",children:[i("p",{className:"text-sm font-medium text-text-secondary",children:t("total_sales_today")}),i("p",{className:"text-4xl font-bold text-green-600 my-2",children:s(n.totalSales)})]}),c("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[c("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg",children:[i("div",{className:"p-2 bg-green-100 rounded-full text-green-600",children:i(pr,{className:"h-5 w-5"})}),c("div",{children:[i("p",{className:"text-text-secondary",children:t("cash_sales")}),i("p",{className:"font-bold text-text-primary",children:s(n.cashSales)})]})]}),c("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg",children:[i("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600",children:i(Ed,{className:"h-5 w-5"})}),c("div",{children:[i("p",{className:"text-text-secondary",children:t("card_sales")}),i("p",{className:"font-bold text-text-primary",children:s(n.cardSales)})]})]}),c("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg",children:[i("div",{className:"p-2 bg-purple-100 rounded-full text-purple-600",children:i(ys,{className:"h-5 w-5"})}),c("div",{children:[i("p",{className:"text-text-secondary",children:t("bank_transfer_sales")}),i("p",{className:"font-bold text-text-primary",children:s(n.bankTransferSales)})]})]}),c("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>r("accounts_receivable",{filter:"today"}),children:[i("div",{className:"p-2 bg-yellow-100 rounded-full text-yellow-600",children:i(ha,{className:"h-5 w-5"})}),c("div",{children:[i("p",{className:"text-text-secondary",children:t("ar_new")}),i("p",{className:"font-bold text-text-primary",children:s(n.newAR)})]})]})]})]})},zx={sales_overview:Lx,accounts_payable:Mx,inventory_overview:Fx,low_stock_list:$x},Bx=["daily_sales_overview","sales_overview","accounts_payable","inventory_overview","low_stock_list"],dm=({products:e,users:t,transactions:r,bills:n,t:s,language:a,onNavigate:o,currentUser:l,storeSettings:d})=>{const u=x.useMemo(()=>{const h=l.role[0],m=d==null?void 0:d.dashboard_widget_visibility;let y;return m&&m[h]?y=m[h]:y=Bx,y.filter(v=>v!=="daily_sales_overview")},[l,d]),p={products:e,transactions:r,bills:n,t:s,language:a,onNavigate:o};return c("div",{className:"space-y-8",children:[i(Ux,{transactions:r,t:s,onNavigate:o}),u.map(h=>{const m=zx[h];return m?i(m,{...p},h):null})]})},hr=[{key:"building_materials",name:{en:"Building & Construction Materials",th:""},subCategories:[{key:"cement_aggregates",name:{en:"Cement & Aggregates",th:""},description:{en:"Basic materials for concrete mixing and foundational work, including various types of cement and aggregates like sand and gravel.",th:"    "},examples:{en:"Portland Cement, Masonry Cement, Premixed Concrete, Sand Bags, Gravel",th:", , , , "}},{key:"steel_metal",name:{en:"Steel & Metal",th:""},description:{en:"Structural and reinforcement steel products used in construction framing and concrete reinforcement.",th:""},examples:{en:"Rebar, Steel Bars (Round/Deformed), Wire Mesh, C-channel Steel, Steel Plate",th:", , , , "}},{key:"bricks_blocks",name:{en:"Bricks & Blocks",th:""},description:{en:"Masonry units for constructing walls and partitions.",th:""},examples:{en:"Concrete Blocks, Red Bricks, Lightweight AAC Blocks, Decorative Blocks",th:", , , "}},{key:"wood_boards",name:{en:"Wood & Boards",th:""},description:{en:"Lumber, engineered wood, and various types of boards for structural, finishing, and partitioning purposes.",th:",   ,  "},examples:{en:"Lumber, Plywood, Fiber Cement Board (Shera/Smartboard), Gypsum Board",th:", ,  (/), "}},{key:"roofing_insulation",name:{en:"Roofing & Insulation",th:""},description:{en:"Materials for roof construction and thermal/acoustic insulation.",th:"/"},examples:{en:"Concrete Roof Tiles, Metal Sheet Roofing, Heat Insulation Sheets, Waterproofing Membrane",th:", , , "}}]},{key:"tools_equipment",name:{en:"Tools & Equipment",th:""},subCategories:[{key:"hand_tools",name:{en:"Hand Tools",th:""},description:{en:"Manual tools for general construction, repair, and maintenance tasks.",th:",  "},examples:{en:"Hammers, Screwdrivers, Wrenches, Pliers, Hand Saws, Trowels",th:", , , , , "}},{key:"power_tools",name:{en:"Power Tools",th:""},description:{en:"Electrically powered tools for cutting, drilling, grinding, and other heavy-duty tasks.",th:", ,  "},examples:{en:"Electric Drills, Angle Grinders, Sanders, Circular Saws, Welding Machines",th:",  (), , , "}},{key:"safety_gear",name:{en:"Safety Gear",th:""},description:{en:"Personal Protective Equipment (PPE) to ensure worker safety on site.",th:" (PPE) "},examples:{en:"Safety Helmets, Work Gloves, Safety Glasses, Dust Masks, Safety Boots",th:", , , , "}}]},{key:"plumbing_water",name:{en:"Plumbing & Water Systems",th:""},subCategories:[{key:"pipes_fittings",name:{en:"Pipes & Fittings",th:""},description:{en:"Pipes and connectors for water supply and drainage systems.",th:""},examples:{en:"PVC Pipes, PVC Fittings (Elbows, Tees), Ball Valves, Pipe Glue",th:" PVC,  PVC (, ), , "}},{key:"pumps_tanks",name:{en:"Pumps & Tanks",th:""},description:{en:"Equipment for water storage and distribution within a building.",th:""},examples:{en:"Water Pumps, Water Tanks, Pressure Boosters",th:", , "}}]},{key:"electrical",name:{en:"Electrical Systems",th:""},subCategories:[{key:"wiring_conduits",name:{en:"Wiring & Conduits",th:""},description:{en:"Cables and protective conduits for electrical installations.",th:""},examples:{en:"THW Wire, VAF Wire, Electrical Conduits (PVC/Metal), Cable Ties",th:" THW,  VAF,  (PVC/), "}},{key:"lighting_switches",name:{en:"Lighting, Switches & Outlets",th:""},description:{en:"Fixtures for lighting, and devices for controlling electrical circuits.",th:""},examples:{en:"LED Bulbs, Light Switches, Electrical Outlets, Breakers, Electrical Tape",th:" LED, , , , "}}]},{key:"paints_chemicals",name:{en:"Paints & Chemicals",th:""},subCategories:[{key:"paints_primers",name:{en:"Paints & Primers",th:""},description:{en:"Coatings for finishing and protecting surfaces, including interior, exterior, and primer paints.",th:" ,  "},examples:{en:"Interior Emulsion Paint, Exterior Acrylic Paint, Metal Primer, Wood Stain",th:", , , "}},{key:"painting_tools",name:{en:"Painting Tools",th:""},description:{en:"Tools and supplies required for paint application.",th:""},examples:{en:"Paint Brushes, Rollers, Paint Trays, Masking Tape, Thinner",th:", , , , "}},{key:"sealants_adhesives",name:{en:"Sealants & Adhesives",th:""},description:{en:"Chemical products for sealing joints, waterproofing, and bonding materials.",th:", , "},examples:{en:"Silicone Sealant, Acrylic Sealant, Construction Adhesive, Waterproofing Solution",th:", , , "}}]},{key:"hardware_supplies",name:{en:"Hardware & Supplies",th:""},subCategories:[{key:"fasteners",name:{en:"Fasteners",th:""},description:{en:"Items used to mechanically join or affix objects together.",th:""},examples:{en:"Screws, Nails, Bolts & Nuts, Wall Anchors, Rivets",th:", , , , "}},{key:"door_window_hardware",name:{en:"Door & Window Hardware",th:"-"},description:{en:"Functional and decorative hardware for doors and windows.",th:""},examples:{en:"Hinges, Door Knobs, Locks, Cabinet Handles, Window Latches",th:", , , , "}}]}],qi=e=>{if(!e)return{main:void 0,sub:void 0};const[t,r]=e.split("."),n=hr.find(a=>a.key===t),s=n==null?void 0:n.subCategories.find(a=>a.key===r);return{main:n,sub:s}},Od=(e,t)=>{const{main:r,sub:n}=qi(e);return!r||!n?e:`${r.name[t]} > ${n.name[t]}`},Vx=(e,t)=>{for(const r of hr)if(r.name.en===e||r.name.th===e){for(const n of r.subCategories)if(n.name.en===t||n.name.th===t)return`${r.key}.${n.key}`}return null},Wx=e=>{switch(e){case Me.IN_STOCK:return"bg-green-100 text-green-800";case Me.LOW_STOCK:return"bg-yellow-100 text-yellow-800";case Me.OUT_OF_STOCK:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},qx=({products:e,currentUser:t,onAddProductClick:r,onAddProductByScan:n,onImportProductsClick:s,onEditProduct:a,onDeleteProduct:o,onViewProduct:l,onShowBarcode:d,openScanner:u,inventorySearchCode:p,setInventorySearchCode:h,t:m,language:y})=>{var I,A;const[v,b]=x.useState(""),[k,w]=x.useState("All"),[f,g]=x.useState(new Set),_=(I=t.permissions)==null?void 0:I.inventory.write,E=(A=t.permissions)==null?void 0:A.inventory.delete;x.useEffect(()=>{p&&(b(p),h(null))},[p,h]);const S=x.useMemo(()=>{const T=v.toLowerCase();return e.filter(R=>R.variants.some(J=>{var te,Z,U,V;const ne=k==="All"||J.status===k,D=qi(R.category),L=`${(te=D.main)==null?void 0:te.name.en} ${(Z=D.main)==null?void 0:Z.name.th} ${(U=D.sub)==null?void 0:U.name.en} ${(V=D.sub)==null?void 0:V.name.th}`.toLowerCase(),j=!T||Object.values(R.name).some(de=>String(de).toLowerCase().includes(T))||J.sku.toLowerCase().includes(T)||J.barcode&&J.barcode.toLowerCase().includes(T)||L.includes(T);return ne&&j}))},[e,v,k]),O=T=>{g(R=>{const $=new Set(R);return $.has(T)?$.delete(T):$.add(T),$})},C=()=>{const T=S.flatMap(J=>{const{main:ne,sub:D}=qi(J.category);return J.variants.map(L=>{var j,te;return{"Product Name":J.name.en,"Product Name (TH)":J.name.th,"Description (EN)":((j=J.description)==null?void 0:j.en)||"","Description (TH)":((te=J.description)==null?void 0:te.th)||"","Main Category":(ne==null?void 0:ne.name.en)||"","Sub Category":(D==null?void 0:D.name.en)||"","Image URL":J.imageUrl,"Variant Size":L.size,SKU:L.sku,Stock:L.stock,"Cost Price":L.price.cost,"Walk-in Price":L.price.walkIn,"Contractor Price":L.price.contractor,"Government Price":L.price.government,Barcode:L.barcode||"",Status:L.status}})}),R=XLSX.utils.json_to_sheet(T);R["!cols"]=[{wch:30},{wch:30},{wch:40},{wch:40},{wch:25},{wch:25},{wch:40},{wch:15},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:15},{wch:20},{wch:15}];const $=XLSX.utils.book_new();XLSX.utils.book_append_sheet($,R,"Inventory"),XLSX.writeFile($,"InventoryExport.xlsx")},P=()=>{u(T=>{b(T)})},N=e.length===0&&v===""&&k==="All";return c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:m("inventory_management")}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:m("search_or_scan_barcode_placeholder"),value:v,onChange:T=>b(T.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),c("button",{onClick:P,className:"flex items-center gap-2 bg-gray-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:[i(wf,{className:"h-5 w-5"}),m("scan")]}),c("select",{value:k,onChange:T=>w(T.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background text-text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",children:[i("option",{value:"All",children:m("all_statuses")}),i("option",{value:Me.IN_STOCK,children:m("in_stock")}),i("option",{value:Me.LOW_STOCK,children:m("low_stock")}),i("option",{value:Me.OUT_OF_STOCK,children:m("out_of_stock")})]}),_&&c("button",{onClick:C,className:"flex items-center gap-2 bg-green-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:[i(Na,{className:"h-5 w-5"}),m("export")]}),_&&c("button",{onClick:s,className:"flex items-center gap-2 bg-blue-500 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:[i(vs,{className:"h-5 w-5"}),m("import")]}),_&&c("button",{onClick:n,className:"flex items-center gap-2 bg-secondary text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-orange-700 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),m("add_by_scan")]}),_&&c("button",{onClick:r,className:"flex items-center gap-2 bg-primary text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-800 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),m("add_product")]})]})]}),c("div",{className:"overflow-x-auto",children:[c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-2 py-3 w-12"}),i("th",{scope:"col",className:"px-6 py-3",children:m("product")}),i("th",{scope:"col",className:"px-6 py-3",children:m("category")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:m("total_stock")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:m("variants")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:m("actions")})]})}),i("tbody",{children:S.map(T=>{const R=T.variants.reduce((J,ne)=>J+ne.stock,0),$=f.has(T.id);return c(ro.Fragment,{children:[c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-2 py-2 text-center",children:i("button",{onClick:()=>O(T.id),className:"p-1 text-gray-500 hover:text-primary rounded-full hover:bg-gray-100",children:$?i(xo,{className:"h-4 w-4"}):i(Cd,{className:"h-4 w-4"})})}),i("td",{className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap",children:c("div",{className:"flex items-center gap-3",children:[i("img",{src:T.imageUrl,alt:T.name[y],className:"h-10 w-10 rounded-md object-cover"}),i("span",{children:T.name[y]})]})}),i("td",{className:"px-6 py-2 text-xs",children:Od(T.category,y)}),i("td",{className:"px-6 py-2 text-right font-medium",children:R.toLocaleString()}),i("td",{className:"px-6 py-2 text-center",children:T.variants.length.toLocaleString()}),i("td",{className:"px-6 py-2 text-center",children:c("div",{className:"flex justify-center gap-1",children:[i("button",{onClick:()=>l(T),className:"text-gray-500 hover:text-primary p-1",title:m("view_details_tooltip"),children:i(wn,{className:"h-4 w-4"})}),_&&i("button",{onClick:()=>a(T),className:"text-primary hover:text-blue-700 p-1",title:m("edit_product_tooltip"),children:i(Tn,{className:"h-4 w-4"})}),E&&i("button",{onClick:()=>o(T),className:"text-red-600 hover:text-red-800 p-1",title:m("delete_product_tooltip"),children:i(sr,{className:"h-4 w-4"})})]})})]}),$&&i("tr",{className:"bg-background",children:i("td",{colSpan:6,className:"p-0",children:i("div",{className:"p-4",children:c("table",{className:"w-full text-xs bg-white rounded-md shadow-inner",children:[i("thead",{className:"bg-gray-100",children:c("tr",{children:[i("th",{className:"p-2 text-left",children:m("size")}),i("th",{className:"p-2 text-left",children:m("sku")}),i("th",{className:"p-2 text-right",children:m("stock")}),i("th",{className:"p-2 text-right",children:m("walk_in_price")}),i("th",{className:"p-2 text-center",children:m("status")}),i("th",{className:"p-2 text-center",children:"Barcode"})]})}),i("tbody",{children:T.variants.map(J=>c("tr",{className:"border-t",children:[i("td",{className:"p-2 font-semibold",children:J.size}),i("td",{className:"p-2 font-mono",children:J.sku}),i("td",{className:"p-2 text-right font-medium",children:J.stock.toLocaleString()}),c("td",{className:"p-2 text-right",children:["",J.price.walkIn.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"p-2 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Wx(J.status)}`,children:m(J.status.toLowerCase().replace(" ","_"))})}),i("td",{className:"p-2 text-center",children:J.barcode?i("button",{onClick:()=>d(T,J),className:"text-gray-500 hover:text-primary p-1",children:i(xx,{className:"h-4 w-4"})}):"N/A"})]},J.id))})]})})})})]},T.id)})})]}),S.length===0&&c("div",{className:"text-center p-12 text-text-secondary",children:[i(us,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:m("no_products_found")}),N?i("p",{className:"text-sm mt-1",dangerouslySetInnerHTML:{__html:m("inventory_empty_message")}}):i("p",{className:"text-sm mt-1",children:m("try_adjusting_search")})]})]})]})},nl=()=>({sku:"",size:"",stock:"0",price:{walkIn:"0",contractor:"0",government:"0",cost:"0"},barcode:""}),Hx=({isOpen:e,onClose:t,onAddProduct:r,initialBarcode:n,showAlert:s,t:a})=>{const[o,l]=x.useState({en:"",th:""}),[d,u]=x.useState({en:"",th:""}),[p,h]=x.useState(null),[m,y]=x.useState([nl()]),[v,b]=x.useState(""),[k,w]=x.useState(""),f=x.useMemo(()=>{if(!v)return[];const N=hr.find(I=>I.key===v);return(N==null?void 0:N.subCategories)||[]},[v]),g=x.useMemo(()=>k?f.find(N=>N.key===k):null,[k,f]);x.useEffect(()=>{if(e){l({en:"",th:""}),u({en:"",th:""}),b(""),w(""),h(null);const N=nl();n&&(N.barcode=n),y([N])}},[e,n]);const _=N=>{b(N.target.value),w("")},E=N=>{var A;const I=(A=N.target.files)==null?void 0:A[0];if(I){const T=new FileReader;T.onloadend=()=>{h(T.result)},T.readAsDataURL(I)}},S=(N,I,A)=>{const T=[...m],R={...T[N]},$=["walkIn","contractor","government","cost"].includes(I),J=I==="stock";let ne=A;if($){if(!/^\d*\.?\d*$/.test(ne))return}else if(J&&!/^\d*$/.test(ne))return;$?R.price={...R.price,[I]:ne}:R[I]=ne,T[N]=R,y(T)},O=()=>{y([...m,nl()])},C=N=>{if(m.length>1){const I=m.filter((A,T)=>T!==N);y(I)}},P=N=>{if(N.preventDefault(),!o.en||!o.th||!v||!k||!p){s(a("missing_information"),a("add_product_validation1"));return}const I=m.map(A=>({sku:A.sku,size:A.size,stock:parseInt(A.stock,10)||0,price:{walkIn:parseFloat(A.price.walkIn)||0,contractor:parseFloat(A.price.contractor)||0,government:parseFloat(A.price.government)||0,cost:parseFloat(A.price.cost)||0},barcode:A.barcode||void 0}));if(I.some(A=>!A.sku||!A.size||A.price.walkIn<=0||A.price.cost<0)){s(a("invalid_variant"),a("add_product_validation2"));return}r({name:o,description:d,category:`${v}.${k}`,imageUrl:p,variants:I})};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-4xl m-4",onClick:N=>N.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("add_product")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:P,children:[c("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c("div",{children:[c("label",{className:"block text-sm font-medium text-text-secondary",children:[a("product")," Image"]}),i("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:c("div",{className:"space-y-1 text-center",children:[p?i("img",{src:p,alt:"Product preview",className:"mx-auto h-24 w-24 object-cover rounded-md"}):i(wo,{className:"mx-auto h-12 w-12 text-gray-400"}),i("div",{className:"flex text-sm text-gray-600 justify-center",children:c("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-blue-700 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary",children:[i("span",{children:"Upload a file"}),i("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:E,required:!0})]})}),i("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),c("div",{className:"space-y-4",children:[c("div",{children:[i("label",{htmlFor:"name_en",className:"block text-sm font-medium text-text-secondary",children:"Product Name (EN)"}),i("input",{type:"text",id:"name_en",value:o.en,onChange:N=>l(I=>({...I,en:N.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"name_th",className:"block text-sm font-medium text-text-secondary",children:"Product Name (TH)"}),i("input",{type:"text",id:"name_th",value:o.th,onChange:N=>l(I=>({...I,th:N.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"main_category",className:"block text-sm font-medium text-text-secondary",children:a("main_category")}),c("select",{id:"main_category",value:v,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0,children:[i("option",{value:"",children:a("select_main_category")}),hr.map(N=>c("option",{value:N.key,children:[N.name.en," / ",N.name.th]},N.key))]})]}),c("div",{children:[i("label",{htmlFor:"sub_category",className:"block text-sm font-medium text-text-secondary",children:a("sub_category")}),c("select",{id:"sub_category",value:k,onChange:N=>w(N.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0,disabled:!v,children:[i("option",{value:"",children:a("select_sub_category")}),f.map(N=>c("option",{value:N.key,children:[N.name.en," / ",N.name.th]},N.key))]})]})]}),g&&c("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md text-xs",children:[i("p",{className:"font-bold text-blue-800",children:a("category_helper_title")}),c("p",{className:"mt-1",children:[c("strong",{className:"text-blue-700",children:[a("description"),":"]})," ",g.description.en," / ",g.description.th]}),c("p",{className:"mt-1",children:[c("strong",{className:"text-blue-700",children:[a("example_products"),":"]})," ",g.examples.en," / ",g.examples.th]})]})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Product Description (Optional)"}),c("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i("textarea",{value:d.en,onChange:N=>u(I=>({...I,en:N.target.value})),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background",placeholder:"Description in English"}),i("textarea",{value:d.th,onChange:N=>u(I=>({...I,th:N.target.value})),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background",placeholder:" ()"})]})]}),c("div",{className:"border-t pt-4",children:[i("h4",{className:"text-md font-semibold text-text-primary mb-2",children:"Product Variants (Sizes, Types, etc.)"}),c("div",{className:"space-y-4",children:[m.map((N,I)=>c("div",{className:"grid grid-cols-12 gap-x-4 gap-y-2 items-end p-3 bg-background rounded-lg border",children:[c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("size")}),i("input",{type:"text",placeholder:"e.g., 12mm",value:N.size,onChange:A=>S(I,"size",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("sku")}),i("input",{type:"text",placeholder:"SKU",value:N.sku,onChange:A=>S(I,"sku",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("stock")}),i("input",{type:"text",inputMode:"numeric",value:N.stock,onChange:A=>S(I,"stock",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("cost_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.cost,onChange:A=>S(I,"cost",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("walk_in_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.walkIn,onChange:A=>S(I,"walkIn",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("contractor_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.contractor,onChange:A=>S(I,"contractor",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[c("label",{className:"block text-xs font-medium text-text-secondary",children:[a("government")," Price"]}),i("input",{type:"text",inputMode:"decimal",value:N.price.government,onChange:A=>S(I,"government",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-11",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:"Barcode (Optional)"}),i("input",{type:"text",value:N.barcode,onChange:A=>S(I,"barcode",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),i("div",{className:"col-span-1 flex items-center justify-end",children:i("button",{type:"button",onClick:()=>C(I),disabled:m.length<=1,className:"text-red-500 hover:text-red-700 disabled:text-gray-300 p-1",children:i(sr,{className:"h-5 w-5"})})})]},I)),c("button",{type:"button",onClick:O,className:"flex items-center gap-2 text-sm font-medium text-primary hover:text-blue-700 mt-2",children:[i(Rt,{className:"h-4 w-4"})," Add Another Variant"]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:"Add Product"}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}):null},Kx=()=>({sku:"",size:"",stock:"0",price:{walkIn:"0",contractor:"0",government:"0",cost:"0"},barcode:""}),Gx=({isOpen:e,onClose:t,onEditProduct:r,product:n,showAlert:s,t:a})=>{const[o,l]=x.useState({en:"",th:""}),[d,u]=x.useState({en:"",th:""}),[p,h]=x.useState(null),[m,y]=x.useState([]),[v,b]=x.useState(""),[k,w]=x.useState(""),f=x.useMemo(()=>{if(!v)return[];const N=hr.find(I=>I.key===v);return(N==null?void 0:N.subCategories)||[]},[v]),g=x.useMemo(()=>k?f.find(N=>N.key===k):null,[k,f]);x.useEffect(()=>{if(n){l(n.name),u(n.description||{en:"",th:""}),h(n.imageUrl);const N=n.variants.map(T=>({...T,stock:String(T.stock),price:{walkIn:String(T.price.walkIn),contractor:String(T.price.contractor),government:String(T.price.government),cost:String(T.price.cost)},barcode:T.barcode||""}));y(N);const[I,A]=n.category.split(".");b(I||""),w(A||"")}},[n]);const _=N=>{b(N.target.value),w("")},E=N=>{var A;const I=(A=N.target.files)==null?void 0:A[0];if(I){const T=new FileReader;T.onloadend=()=>{h(T.result)},T.readAsDataURL(I)}},S=(N,I,A)=>{const T=[...m],R={...T[N]},$=["walkIn","contractor","government","cost"].includes(I),J=I==="stock";let ne=A;if($){if(!/^\d*\.?\d*$/.test(ne))return}else if(J&&!/^\d*$/.test(ne))return;$?R.price={...R.price,[I]:ne}:R[I]=ne,T[N]=R,y(T)},O=()=>{y([...m,Kx()])},C=N=>{if(m.length>1){const I=m.filter((A,T)=>T!==N);y(I)}},P=N=>{if(N.preventDefault(),!n||!o.en||!o.th||!v||!k||!p){s(a("missing_information"),a("add_product_validation1"));return}const I=m.map(T=>({...T,id:T.id,status:T.status,history:T.history,stock:parseInt(T.stock,10)||0,price:{walkIn:parseFloat(T.price.walkIn)||0,contractor:parseFloat(T.price.contractor)||0,government:parseFloat(T.price.government)||0,cost:parseFloat(T.price.cost)||0},barcode:T.barcode||void 0}));if(I.some(T=>!T.sku||!T.size||T.price.walkIn<=0||T.price.cost<0)){s(a("invalid_variant"),a("add_product_validation2"));return}const A={name:o,description:d,category:`${v}.${k}`,imageUrl:p,variants:I};r(n.id,A)};return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-4xl m-4",onClick:N=>N.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold text-text-primary",children:[a("edit"),' "',o.en,'"']}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:P,children:[c("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Product Image"}),i("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:c("div",{className:"space-y-1 text-center",children:[p?i("img",{src:p,alt:"Product preview",className:"mx-auto h-24 w-24 object-cover rounded-md"}):i(wo,{className:"mx-auto h-12 w-12 text-gray-400"}),i("div",{className:"flex text-sm text-gray-600 justify-center",children:c("label",{htmlFor:"edit-file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-blue-700 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary",children:[i("span",{children:"Change image"}),i("input",{id:"edit-file-upload",name:"edit-file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:E})]})})]})})]}),c("div",{className:"space-y-4",children:[c("div",{children:[i("label",{htmlFor:"edit-name_en",className:"block text-sm font-medium text-text-secondary",children:"Product Name (EN)"}),i("input",{type:"text",id:"edit-name_en",value:o.en,onChange:N=>l(I=>({...I,en:N.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"edit-name_th",className:"block text-sm font-medium text-text-secondary",children:"Product Name (TH)"}),i("input",{type:"text",id:"edit-name_th",value:o.th,onChange:N=>l(I=>({...I,th:N.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"main_category",className:"block text-sm font-medium text-text-secondary",children:a("main_category")}),c("select",{id:"main_category",value:v,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0,children:[i("option",{value:"",children:a("select_main_category")}),hr.map(N=>c("option",{value:N.key,children:[N.name.en," / ",N.name.th]},N.key))]})]}),c("div",{children:[i("label",{htmlFor:"sub_category",className:"block text-sm font-medium text-text-secondary",children:a("sub_category")}),c("select",{id:"sub_category",value:k,onChange:N=>w(N.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0,disabled:!v,children:[i("option",{value:"",children:a("select_sub_category")}),f.map(N=>c("option",{value:N.key,children:[N.name.en," / ",N.name.th]},N.key))]})]})]}),g&&c("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md text-xs",children:[i("p",{className:"font-bold text-blue-800",children:a("category_helper_title")}),c("p",{className:"mt-1",children:[c("strong",{className:"text-blue-700",children:[a("description"),":"]})," ",g.description.en," / ",g.description.th]}),c("p",{className:"mt-1",children:[c("strong",{className:"text-blue-700",children:[a("example_products"),":"]})," ",g.examples.en," / ",g.examples.th]})]})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Product Description (Optional)"}),c("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i("textarea",{value:d.en,onChange:N=>u(I=>({...I,en:N.target.value})),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background",placeholder:"Description in English"}),i("textarea",{value:d.th,onChange:N=>u(I=>({...I,th:N.target.value})),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background",placeholder:" ()"})]})]}),c("div",{className:"border-t pt-4",children:[i("h4",{className:"text-md font-semibold text-text-primary mb-2",children:"Product Variants"}),c("div",{className:"space-y-4",children:[m.map((N,I)=>c("div",{className:"grid grid-cols-12 gap-x-4 gap-y-2 items-end p-3 bg-background rounded-lg border",children:[c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("size")}),i("input",{type:"text",placeholder:"e.g., 12mm",value:N.size,onChange:A=>S(I,"size",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("sku")}),i("input",{type:"text",placeholder:"SKU",value:N.sku,onChange:A=>S(I,"sku",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("stock")}),i("input",{type:"text",inputMode:"numeric",value:N.stock,onChange:A=>S(I,"stock",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-6 sm:col-span-2",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("cost_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.cost,onChange:A=>S(I,"cost",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("walk_in_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.walkIn,onChange:A=>S(I,"walkIn",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2",required:!0})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:a("contractor_price")}),i("input",{type:"text",inputMode:"decimal",value:N.price.contractor,onChange:A=>S(I,"contractor",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-12 sm:col-span-4",children:[c("label",{className:"block text-xs font-medium text-text-secondary",children:[a("government")," Price"]}),i("input",{type:"text",inputMode:"decimal",value:N.price.government,onChange:A=>S(I,"government",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),c("div",{className:"col-span-11",children:[i("label",{className:"block text-xs font-medium text-text-secondary",children:"Barcode (Optional)"}),i("input",{type:"text",value:N.barcode||"",onChange:A=>S(I,"barcode",A.target.value),className:"mt-1 block w-full rounded-md text-sm p-2"})]}),i("div",{className:"col-span-1 flex items-center justify-end",children:i("button",{type:"button",onClick:()=>C(I),disabled:m.length<=1,className:"text-red-500 hover:text-red-700 disabled:text-gray-300 p-1",children:i(sr,{className:"h-5 w-5"})})})]},N.id||I)),c("button",{type:"button",onClick:O,className:"flex items-center gap-2 text-sm font-medium text-primary hover:text-blue-700 mt-2",children:[i(Rt,{className:"h-4 w-4"})," Add Another Variant"]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:"Save Changes"}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},fr=({isOpen:e,onClose:t,onConfirm:r,title:n,message:s,t:a,confirmText:o,confirmButtonClass:l})=>e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:d=>d.stopPropagation(),children:[i("div",{className:"p-4 sm:p-6",children:c("div",{className:"sm:flex sm:items-start",children:[i("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:i(Cn,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),c("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i("h3",{className:"text-lg leading-6 font-medium text-text-primary",id:"modal-title",children:n}),i("div",{className:"mt-2",children:i("div",{className:"text-sm text-text-secondary",dangerouslySetInnerHTML:{__html:s}})})]})]})}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${l||"bg-red-600 hover:bg-red-700 focus:ring-red-500"}`,onClick:r,children:o||a("delete")}),i("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm",onClick:t,children:a("cancel")})]})]})}):null,Qx=e=>{switch(e){case Me.IN_STOCK:return"bg-green-100 text-green-800";case Me.LOW_STOCK:return"bg-yellow-100 text-yellow-800";case Me.OUT_OF_STOCK:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ef=({isOpen:e,onClose:t,product:r,t:n,language:s})=>!e||!r?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-4xl m-4",onClick:a=>a.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:n("product_details")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[i("div",{className:"w-full md:w-1/3",children:i("img",{src:r.imageUrl.replace("/400/400","/800/600"),alt:r.name[s],className:"w-full h-auto object-cover rounded-lg shadow-md"})}),c("div",{className:"w-full md:w-2/3 space-y-4",children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:r.name[s]}),r.description&&r.description[s]&&i("p",{className:"text-sm text-text-secondary",children:r.description[s]}),i("div",{className:"border-t pt-4",children:i("dl",{children:c("div",{className:"flex justify-between text-sm py-1",children:[i("dt",{className:"text-text-secondary",children:n("category")}),i("dd",{className:"text-text-primary",children:Od(r.category,s)})]})})})]})]}),c("div",{className:"mt-6 border-t pt-4",children:[i("h4",{className:"font-semibold text-text-primary mb-2",children:n("available_variants")}),i("div",{className:"overflow-x-auto border rounded-lg",children:c("table",{className:"w-full text-sm",children:[i("thead",{className:"bg-background text-left text-text-secondary",children:c("tr",{children:[i("th",{className:"p-3 font-medium",children:n("size")}),i("th",{className:"p-3 font-medium",children:n("sku")}),i("th",{className:"p-3 font-medium text-right",children:n("stock")}),i("th",{className:"p-3 font-medium text-right",children:n("walk_in_price")}),i("th",{className:"p-3 font-medium text-right",children:n("contractor_price")}),i("th",{className:"p-3 font-medium text-center",children:n("status")})]})}),i("tbody",{className:"divide-y",children:r.variants.map(a=>c("tr",{className:"hover:bg-gray-50",children:[i("td",{className:"p-3 font-semibold",children:a.size}),i("td",{className:"p-3 font-mono text-xs",children:a.sku}),i("td",{className:"p-3 text-right",children:a.stock.toLocaleString()}),c("td",{className:"p-3 text-right font-semibold text-primary",children:["",a.price.walkIn.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:"p-3 text-right font-semibold text-secondary",children:["",a.price.contractor.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"p-3 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Qx(a.status)}`,children:n(a.status.toLowerCase().replace(/\s/g,"_"))})})]},a.id))})]})})]})]}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:w-auto sm:text-sm",children:n("close")})})]})}),Jx={dashboard:{read:!1},pos:{read:!1,write:!1},inventory:{read:!1,write:!1,delete:!1},returns:{read:!1,write:!1},customers:{read:!1,write:!1,delete:!1},suppliers:{read:!1,write:!1,delete:!1},accounts_payable:{read:!1,write:!1,delete:!1},accounts_receivable:{read:!1,write:!1,delete:!1},sales_history:{read:!1,write:!1,delete:!1},order_fulfillment:{read:!1,write:!1},customer_assist:{read:!1},end_of_day:{read:!1,write:!1},shift_history:{read:!1},activity_log:{read:!1},user_management:{read:!1,write:!1,delete:!1,reset_password:!1},store_settings:{read:!1,write:!1},dashboard_management:{read:!1,write:!1},sidebar:{dashboard:!1,pos:!1,inventory:!1,returns:!1,customers:!1,suppliers:!1,accounts_payable:!1,accounts_receivable:!1,sales_history:!1,order_fulfillment:!1,customer_assist:!1,end_of_day:!1,shift_history:!1,activity_log:!1,user_management:!1,store_settings:!1,dashboard_management:!1}},um={dashboard:{read:!0},pos:{read:!0,write:!0},inventory:{read:!0,write:!0,delete:!0},returns:{read:!0,write:!0},customers:{read:!0,write:!0,delete:!0},suppliers:{read:!0,write:!0,delete:!0},accounts_payable:{read:!0,write:!0,delete:!0},accounts_receivable:{read:!0,write:!0,delete:!0},sales_history:{read:!0,write:!0,delete:!0},order_fulfillment:{read:!0,write:!0},customer_assist:{read:!0},end_of_day:{read:!0,write:!0},shift_history:{read:!0},activity_log:{read:!0},user_management:{read:!0,write:!0,delete:!0,reset_password:!0},store_settings:{read:!0,write:!0},dashboard_management:{read:!0,write:!0},sidebar:{dashboard:!0,pos:!0,inventory:!0,returns:!0,customers:!0,suppliers:!0,accounts_payable:!0,accounts_receivable:!0,sales_history:!0,order_fulfillment:!0,customer_assist:!0,end_of_day:!0,shift_history:!0,activity_log:!0,user_management:!0,store_settings:!0,dashboard_management:!0}},Xx={[oe.CEO]:um,[oe.ADMIN]:um,[oe.ACCOUNT_MANAGER]:{dashboard:{read:!0},customers:{read:!0,write:!0,delete:!1},suppliers:{read:!0,write:!0,delete:!1},accounts_payable:{read:!0,write:!0,delete:!0},accounts_receivable:{read:!0,write:!0,delete:!0},sales_history:{read:!0,write:!1,delete:!1},end_of_day:{read:!0,write:!0},shift_history:{read:!0},activity_log:{read:!0},store_settings:{read:!0,write:!0},sidebar:{dashboard:!0,pos:!1,inventory:!1,returns:!1,customers:!0,suppliers:!0,accounts_payable:!0,accounts_receivable:!0,sales_history:!0,order_fulfillment:!1,customer_assist:!1,end_of_day:!0,shift_history:!0,activity_log:!0,user_management:!1,store_settings:!0,dashboard_management:!0}},[oe.STORE_MANAGER]:{dashboard:{read:!0},pos:{read:!0,write:!0},inventory:{read:!0,write:!0,delete:!0},returns:{read:!0,write:!0},customers:{read:!0,write:!0,delete:!1},suppliers:{read:!0,write:!0,delete:!1},accounts_payable:{read:!0,write:!0,delete:!1},accounts_receivable:{read:!0,write:!0,delete:!1},sales_history:{read:!0,write:!1,delete:!1},order_fulfillment:{read:!0,write:!0},customer_assist:{read:!0},end_of_day:{read:!0,write:!0},shift_history:{read:!0},activity_log:{read:!0},store_settings:{read:!0,write:!0},sidebar:{dashboard:!0,pos:!0,inventory:!0,returns:!0,customers:!0,suppliers:!0,accounts_payable:!0,accounts_receivable:!0,sales_history:!0,order_fulfillment:!0,customer_assist:!0,end_of_day:!0,shift_history:!0,activity_log:!0,user_management:!1,store_settings:!0,dashboard_management:!0}},[oe.STORE_STAFF]:{dashboard:{read:!0},pos:{read:!0,write:!0},inventory:{read:!0,write:!0,delete:!1},returns:{read:!0,write:!0},customers:{read:!0,write:!0,delete:!1},order_fulfillment:{read:!0,write:!0},customer_assist:{read:!0},sidebar:{dashboard:!0,pos:!0,inventory:!0,returns:!0,customers:!0,suppliers:!1,accounts_payable:!1,accounts_receivable:!1,sales_history:!1,order_fulfillment:!0,customer_assist:!0,end_of_day:!1,shift_history:!1,activity_log:!1,user_management:!1,store_settings:!1,dashboard_management:!1}},[oe.POS_OPERATOR]:{dashboard:{read:!0},pos:{read:!0,write:!0},returns:{read:!0,write:!0},customers:{read:!0,write:!1,delete:!1},customer_assist:{read:!0},sidebar:{dashboard:!0,pos:!0,inventory:!1,returns:!0,customers:!0,suppliers:!1,accounts_payable:!1,accounts_receivable:!1,sales_history:!1,order_fulfillment:!1,customer_assist:!0,end_of_day:!1,shift_history:!1,activity_log:!1,user_management:!1,store_settings:!1,dashboard_management:!1}}},Hi=e=>{var r;const t=JSON.parse(JSON.stringify(Jx));for(const n of e){const s=Xx[n];if(s)for(const a of Object.keys(t)){const o=a;if(s[o])for(const l of Object.keys(t[o])){const d=l;(r=s[o])!=null&&r[d]&&(t[o][d]=!0)}}}return t},Yx=({isOpen:e,onClose:t,onEditUser:r,user:n,showAlert:s,t:a})=>{const[o,l]=x.useState(""),[d,u]=x.useState([]),[p,h]=x.useState(null),[m,y]=x.useState(""),[v,b]=x.useState("monthly");x.useEffect(()=>{n&&(l(n.name),u(n.role),h(n.avatar),y(n.salary||""),b(n.wageType||"monthly"))},[n]);const k=g=>{u(_=>_.includes(g)?_.filter(E=>E!==g):[..._,g])},w=g=>{var E;const _=(E=g.target.files)==null?void 0:E[0];if(_){const S=new FileReader;S.onloadend=()=>{h(S.result)},S.readAsDataURL(_)}},f=g=>{if(g.preventDefault(),!o||d.length===0||!p){s(a("missing_information"),a("edit_user_validation"));return}const _=Hi(d);r({name:o,role:d,avatar:p,salary:Number(m)||void 0,wageType:m?v:void 0,permissions:_})};return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:g=>g.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold text-text-primary",children:[a("edit"),' "',n.name,'"']}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:f,children:[c("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"User Avatar"}),i("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:c("div",{className:"space-y-1 text-center",children:[p?i("img",{src:p,alt:"Avatar preview",className:"mx-auto h-24 w-24 object-cover rounded-full"}):i(wo,{className:"mx-auto h-12 w-12 text-gray-400"}),i("div",{className:"flex text-sm text-gray-600 justify-center",children:c("label",{htmlFor:"edit-avatar-file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-blue-700 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary",children:[i("span",{children:"Change image"}),i("input",{id:"edit-avatar-file-upload",name:"edit-avatar-file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:w})]})}),i("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 1MB"})]})})]}),c("div",{children:[i("label",{htmlFor:"edit-name",className:"block text-sm font-medium text-text-secondary",children:a("full_name")}),i("input",{type:"text",id:"edit-name",value:o,onChange:g=>l(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:a("roles")}),i("div",{className:"mt-2 space-y-2 grid grid-cols-2",children:Object.values(oe).map(g=>c("div",{className:"flex items-center",children:[i("input",{id:`edit-role-${g}`,name:"role",type:"checkbox",checked:d.includes(g),onChange:()=>k(g),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),i("label",{htmlFor:`edit-role-${g}`,className:"ml-3 block text-sm text-text-primary",children:a(`role_${g.toLowerCase().replace(/\s/g,"_")}`)})]},g))})]}),c("div",{className:"border-t pt-4",children:[i("h4",{className:"text-md font-medium text-text-primary mb-1",children:a("payroll_info")}),i("p",{className:"text-xs text-text-secondary mb-3",children:a("payroll_info_desc")}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"edit-salary",className:"block text-sm font-medium text-text-secondary",children:a("salary")}),i("input",{type:"number",id:"edit-salary",value:m,onChange:g=>y(Number(g.target.value)),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",placeholder:"e.g., 30000"})]}),c("div",{children:[i("label",{htmlFor:"edit-wage-type",className:"block text-sm font-medium text-text-secondary",children:a("wage_type")}),c("select",{id:"edit-wage-type",value:v,onChange:g=>b(g.target.value),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",children:[i("option",{value:"monthly",children:a("wage_type_monthly")}),i("option",{value:"daily",children:a("wage_type_daily")})]})]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:a("save")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:a("cancel")})]})]})]})})},Zx=({users:e,currentUser:t,onAddUserClick:r,onEditUser:n,onDeleteUser:s,onResetPassword:a,showAlert:o,t:l})=>{var E,S,O;const[d,u]=x.useState(null),[p,h]=x.useState(null),[m,y]=x.useState(null),v=(E=t.permissions)==null?void 0:E.user_management.write,b=(S=t.permissions)==null?void 0:S.user_management.delete,k=(O=t.permissions)==null?void 0:O.user_management.reset_password,w=C=>{switch(C){case oe.ADMIN:return"bg-red-100 text-red-800";case oe.ACCOUNT_MANAGER:return"bg-blue-100 text-blue-800";case oe.STORE_MANAGER:return"bg-purple-100 text-purple-800";case oe.STORE_STAFF:return"bg-green-100 text-green-800";case oe.POS_OPERATOR:return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},f=()=>{d&&(s(d.id),u(null))},g=C=>{p&&(n(p.id,C),h(null))},_=()=>{m&&(a(m.id),y(null))};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:l("system_users")}),v&&c("button",{onClick:r,className:"flex items-center gap-2 bg-primary text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-800 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),l("add_new_user")]})]}),i("div",{className:"overflow-x-auto",children:c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:"User"}),i("th",{scope:"col",className:"px-6 py-3",children:"Role"}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:"Actions"})]})}),i("tbody",{children:e.map(C=>c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:c("div",{className:"flex items-center gap-3",children:[i("img",{src:C.avatar,alt:C.name,className:"h-10 w-10 rounded-full object-cover"}),i("span",{children:C.name})]})}),i("td",{className:"px-6 py-4",children:i("div",{className:"flex flex-wrap gap-1",children:C.role.map(P=>i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(P)}`,children:P},P))})}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center gap-2",children:[i("button",{onClick:()=>h(C),disabled:!v,className:"text-primary hover:text-blue-700 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",children:i(Tn,{className:"h-4 w-4"})}),i("button",{onClick:()=>y(C),disabled:!k||t.id===C.id,className:"text-yellow-600 hover:text-yellow-800 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",title:l("reset_password"),children:i(Nf,{className:"h-4 w-4"})}),i("button",{onClick:()=>u(C),disabled:!b||t.id===C.id,className:"text-red-600 hover:text-red-800 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",children:i(sr,{className:"h-4 w-4"})})]})})]},C.id))})]})})]}),p&&i(Yx,{isOpen:!!p,onClose:()=>h(null),onEditUser:g,user:p,showAlert:o,t:l}),d&&i(fr,{isOpen:!!d,onClose:()=>u(null),onConfirm:f,title:l("delete_user_title"),message:l("delete_user_confirm_message",{userName:d.name}),t:l}),m&&i(fr,{isOpen:!!m,onClose:()=>y(null),onConfirm:_,title:l("reset_password_confirm_title"),message:l("reset_password_confirm_message",{userName:m.name}),confirmText:l("reset_password"),confirmButtonClass:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",t:l})]})},ew=({isOpen:e,onClose:t,onAddUser:r,showAlert:n,t:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState([oe.STORE_STAFF]),[u,p]=x.useState(null),[h,m]=x.useState(""),[y,v]=x.useState("monthly");x.useEffect(()=>{e&&(o(""),d([oe.STORE_STAFF]),p(null),m(""),v("monthly"))},[e]);const b=f=>{d(g=>g.includes(f)?g.filter(_=>_!==f):[...g,f])},k=f=>{var _;const g=(_=f.target.files)==null?void 0:_[0];if(g){const E=new FileReader;E.onloadend=()=>{p(E.result)},E.readAsDataURL(g)}},w=f=>{if(f.preventDefault(),!a||l.length===0){n(s("missing_information"),s("add_user_validation"));return}const g=u||`https://i.pravatar.cc/150?u=${a.split(" ").join("")}`,_=Hi(l);r({name:a,role:l,avatar:g,salary:Number(h)||void 0,wageType:h?y:void 0,permissions:_})};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:f=>f.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:s("add_new_user")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:w,children:[c("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"User Avatar (Optional)"}),i("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:c("div",{className:"space-y-1 text-center",children:[u?i("img",{src:u,alt:"Avatar preview",className:"mx-auto h-24 w-24 object-cover rounded-full"}):i(wo,{className:"mx-auto h-12 w-12 text-gray-400"}),i("div",{className:"flex text-sm text-gray-600 justify-center",children:c("label",{htmlFor:"avatar-file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-blue-700 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary",children:[i("span",{children:"Upload an image"}),i("input",{id:"avatar-file-upload",name:"avatar-file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:k})]})}),i("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 1MB"})]})})]}),c("div",{children:[i("label",{htmlFor:"name",className:"block text-sm font-medium text-text-secondary",children:s("full_name")}),i("input",{type:"text",id:"name",value:a,onChange:f=>o(f.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:s("roles")}),i("div",{className:"mt-2 space-y-2 grid grid-cols-2",children:Object.values(oe).map(f=>c("div",{className:"flex items-center",children:[i("input",{id:`add-role-${f}`,name:"role",type:"checkbox",checked:l.includes(f),onChange:()=>b(f),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),i("label",{htmlFor:`add-role-${f}`,className:"ml-3 block text-sm text-text-primary",children:s(`role_${f.toLowerCase().replace(/\s/g,"_")}`)})]},f))})]}),c("div",{className:"border-t pt-4",children:[i("h4",{className:"text-md font-medium text-text-primary mb-1",children:s("payroll_info")}),i("p",{className:"text-xs text-text-secondary mb-3",children:s("payroll_info_desc")}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"salary",className:"block text-sm font-medium text-text-secondary",children:s("salary")}),i("input",{type:"number",id:"salary",value:h,onChange:f=>m(Number(f.target.value)),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",placeholder:"e.g., 30000"})]}),c("div",{children:[i("label",{htmlFor:"wage-type",className:"block text-sm font-medium text-text-secondary",children:s("wage_type")}),c("select",{id:"wage-type",value:y,onChange:f=>v(f.target.value),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",children:[i("option",{value:"monthly",children:s("wage_type_monthly")}),i("option",{value:"daily",children:s("wage_type_daily")})]})]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:s("add_new_user")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:s("cancel")})]})]})]})}):null},tw=({users:e,currentUser:t,onAddUser:r,onEditUser:n,onDeleteUser:s,onResetPassword:a,showAlert:o,t:l})=>{const[d,u]=x.useState(!1);return c(Re,{children:[i("div",{className:"space-y-6",children:i(Zx,{users:e,currentUser:t,onAddUserClick:()=>u(!0),onEditUser:n,onDeleteUser:s,onResetPassword:a,showAlert:o,t:l})}),i(ew,{isOpen:d,onClose:()=>u(!1),onAddUser:h=>{r(h),u(!1)},showAlert:o,t:l})]})},rw=({isOpen:e,onClose:t,onEditSupplier:r,supplier:n,showAlert:s,t:a})=>{const[o,l]=x.useState(""),[d,u]=x.useState(""),[p,h]=x.useState(""),[m,y]=x.useState(""),[v,b]=x.useState(""),[k,w]=x.useState("");x.useEffect(()=>{n&&(l(n.name),u(n.logo),h(n.contactPerson),y(n.email),b(n.phone),w(n.address))},[n]);const f=g=>{if(g.preventDefault(),!o||!p||!m){s(a("missing_information"),a("add_supplier_validation"));return}r({name:o,logo:d,contactPerson:p,email:m,phone:v,address:k})};return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:g=>g.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold text-text-primary",children:[a("edit"),' "',n.name,'"']}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:f,children:[c("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[c("div",{children:[i("label",{htmlFor:"s-edit-name",className:"block text-sm font-medium text-text-secondary",children:"Supplier Name"}),i("input",{type:"text",id:"s-edit-name",value:o,onChange:g=>l(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"s-edit-contact",className:"block text-sm font-medium text-text-secondary",children:a("contact_person")}),i("input",{type:"text",id:"s-edit-contact",value:p,onChange:g=>h(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"s-edit-email",className:"block text-sm font-medium text-text-secondary",children:a("email")}),i("input",{type:"email",id:"s-edit-email",value:m,onChange:g=>y(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"s-edit-phone",className:"block text-sm font-medium text-text-secondary",children:a("phone")}),i("input",{type:"tel",id:"s-edit-phone",value:v,onChange:g=>b(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]}),c("div",{children:[i("label",{htmlFor:"s-edit-address",className:"block text-sm font-medium text-text-secondary",children:a("address")}),i("textarea",{id:"s-edit-address",value:k,onChange:g=>w(g.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]}),c("div",{children:[i("label",{htmlFor:"s-edit-logo",className:"block text-sm font-medium text-text-secondary",children:"Logo URL"}),i("input",{type:"url",id:"s-edit-logo",value:d,onChange:g=>u(g.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:a("save")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:a("cancel")})]})]})]})})},nw=e=>{switch(e){case dc.COMPLETED:return i(bo,{className:"h-5 w-5 text-green-500"});case dc.PENDING:return i(Wi,{className:"h-5 w-5 text-yellow-500"});default:return null}},sw=({isOpen:e,onClose:t,supplier:r})=>!e||!r?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4",onClick:n=>n.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Supplier Details"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c("div",{className:"flex items-start gap-6",children:[i("img",{src:r.logo,alt:r.name,className:"h-24 w-24 rounded-full object-cover border-4 border-gray-200"}),c("div",{className:"flex-1",children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:r.name}),i("p",{className:"text-text-secondary",children:r.address}),c("div",{className:"mt-4 flex flex-wrap gap-x-6 gap-y-2 text-sm",children:[c("div",{className:"flex items-center gap-2 text-text-primary",children:[i(_x,{className:"h-4 w-4 text-gray-400"}),i("a",{href:`mailto:${r.email}`,className:"hover:underline",children:r.email})]}),c("div",{className:"flex items-center gap-2 text-text-primary",children:[i(bx,{className:"h-4 w-4 text-gray-400"}),i("span",{children:r.phone})]})]})]})]}),c("div",{className:"mt-6 border-t pt-4",children:[i("h4",{className:"font-semibold text-text-primary mb-2",children:"Order History"}),r.orderHistory.length>0?i("div",{className:"overflow-x-auto border rounded-lg",children:c("table",{className:"w-full text-sm",children:[i("thead",{className:"bg-background text-left text-text-secondary",children:c("tr",{children:[i("th",{className:"p-3 font-medium",children:"Order ID"}),i("th",{className:"p-3 font-medium",children:"Date"}),i("th",{className:"p-3 font-medium text-right",children:"Amount"}),i("th",{className:"p-3 font-medium text-center",children:"Status"})]})}),i("tbody",{className:"divide-y",children:r.orderHistory.map(n=>c("tr",{className:"hover:bg-gray-50",children:[i("td",{className:"p-3 font-mono text-xs",children:n.orderId}),i("td",{className:"p-3",children:new Date(n.date).toLocaleDateString()}),c("td",{className:"p-3 text-right font-semibold",children:["",n.totalAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"p-3 text-center",children:c("span",{className:"flex items-center justify-center gap-2",children:[nw(n.status),i("span",{children:n.status})]})})]},n.orderId))})]})}):i("p",{className:"text-center text-text-secondary p-4 bg-background rounded-md",children:"No order history available for this supplier."})]})]}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:w-auto sm:text-sm",children:"Close"})})]})}),aw=({suppliers:e,currentUser:t,onAddSupplierClick:r,onImportSuppliersClick:n,onEditSupplier:s,onDeleteSupplier:a,showAlert:o,t:l})=>{var S,O;const[d,u]=x.useState(""),[p,h]=x.useState(null),[m,y]=x.useState(null),[v,b]=x.useState(null),k=(S=t.permissions)==null?void 0:S.suppliers.write,w=(O=t.permissions)==null?void 0:O.suppliers.delete,f=x.useMemo(()=>{const C=d.toLowerCase();return C?e.filter(P=>P.name.toLowerCase().includes(C)||P.email.toLowerCase().includes(C)||P.contactPerson.toLowerCase().includes(C)):e},[e,d]),g=()=>{p&&(a(p.id),h(null))},_=C=>{m&&(s(m.id,C),y(null))},E=()=>{const C=f.map(I=>({Name:I.name,"Contact Person":I.contactPerson,Email:I.email,Phone:I.phone||"",Address:I.address||"","Logo URL":I.logo||""})),P=XLSX.utils.json_to_sheet(C);P["!cols"]=[{wch:30},{wch:25},{wch:30},{wch:20},{wch:40},{wch:40}];const N=XLSX.utils.book_new();XLSX.utils.book_append_sheet(N,P,"Suppliers"),XLSX.writeFile(N,"SuppliersExport.xlsx")};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:l("suppliers_overview")}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:l("search_suppliers_placeholder"),value:d,onChange:C=>u(C.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),k&&c(Re,{children:[c("button",{onClick:E,className:"flex items-center gap-2 bg-green-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:[i(Na,{className:"h-5 w-5"}),l("export")]}),c("button",{onClick:n,className:"flex items-center gap-2 bg-blue-500 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:[i(vs,{className:"h-5 w-5"}),l("import")]}),c("button",{onClick:r,className:"flex items-center gap-2 bg-primary text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-800 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),l("add_new_supplier")]})]})]})]}),c("div",{className:"overflow-x-auto",children:[c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:l("suppliers")}),i("th",{scope:"col",className:"px-6 py-3",children:l("contact_person")}),i("th",{scope:"col",className:"px-6 py-3",children:l("email")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("actions")})]})}),i("tbody",{children:f.map(C=>c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:c("div",{className:"flex items-center gap-3",children:[i("img",{src:C.logo,alt:C.name,className:"h-10 w-10 rounded-full object-cover"}),i("span",{children:C.name})]})}),i("td",{className:"px-6 py-4",children:C.contactPerson}),i("td",{className:"px-6 py-4",children:C.email}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center gap-2",children:[i("button",{onClick:()=>b(C),className:"text-gray-500 hover:text-primary p-1",children:i(wn,{className:"h-4 w-4"})}),i("button",{onClick:()=>y(C),disabled:!k,className:"text-primary hover:text-blue-700 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",children:i(Tn,{className:"h-4 w-4"})}),i("button",{onClick:()=>h(C),disabled:!w,className:"text-red-600 hover:text-red-800 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",children:i(sr,{className:"h-4 w-4"})})]})})]},C.id))})]}),f.length===0&&c("div",{className:"text-center p-12 text-text-secondary",children:[i(Td,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:l("no_suppliers_found")}),i("p",{className:"text-sm mt-1",children:l("try_adjusting_search")})]})]})]}),v&&i(sw,{isOpen:!!v,onClose:()=>b(null),supplier:v}),m&&i(rw,{isOpen:!!m,onClose:()=>y(null),onEditSupplier:_,supplier:m,showAlert:o,t:l}),p&&i(fr,{isOpen:!!p,onClose:()=>h(null),onConfirm:g,title:l("delete_supplier_title"),message:l("delete_supplier_confirm_message",{supplierName:p.name}),t:l})]})},iw=({suppliers:e,currentUser:t,onAddSupplier:r,onEditSupplier:n,onDeleteSupplier:s,onImportSuppliersClick:a,showAlert:o,t:l})=>i("div",{className:"space-y-6",children:i(aw,{suppliers:e,currentUser:t,onAddSupplierClick:r,onImportSuppliersClick:a,onEditSupplier:n,onDeleteSupplier:s,showAlert:o,t:l})}),ow=({isOpen:e,onClose:t,title:r,message:n})=>e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[100] flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:s=>s.stopPropagation(),children:[i("div",{className:"p-4 sm:p-6",children:c("div",{className:"sm:flex sm:items-start",children:[i("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10",children:i(Cn,{className:"h-6 w-6 text-yellow-600","aria-hidden":"true"})}),c("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[i("h3",{className:"text-lg leading-6 font-medium text-text-primary",id:"modal-title",children:r}),i("div",{className:"mt-2",children:i("p",{className:"text-sm text-text-secondary",dangerouslySetInnerHTML:{__html:n}})})]})]})}),i("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"OK"})})]})}):null,lw=({isOpen:e,onClose:t,onScanSuccess:r})=>{const n=x.useRef(null),[s,a]=x.useState(null),[o,l]=x.useState("Initializing..."),d=x.useRef(null);x.useEffect(()=>{if(!e){u();return}return(async()=>{if(!("BarcodeDetector"in window)){a("Barcode Detector is not supported by this browser."),l("Not supported");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){a("Camera access is not supported by this browser."),l("Not supported");return}try{l("Requesting camera access...");const h=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});d.current=h,n.current&&(n.current.srcObject=h,await n.current.play()),l("Scanning for codes...");const m=new window.BarcodeDetector,y=setInterval(async()=>{if(!(!n.current||n.current.readyState<2))try{const v=await m.detect(n.current);v.length>0&&(clearInterval(y),u(),r(v[0].rawValue))}catch(v){console.error("Detection error:",v)}},200);return()=>{clearInterval(y),u()}}catch(h){console.error("Error accessing camera:",h),a("Could not access the camera. Please check permissions."),l("Permission denied"),u()}})(),()=>{u()}},[e,r]);const u=()=>{d.current&&(d.current.getTracks().forEach(p=>p.stop()),d.current=null)};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-[100] flex justify-center items-center","aria-modal":"true",role:"dialog",children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-lg m-4",onClick:p=>p.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Scan Barcode / QR Code"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-4 relative bg-black aspect-video",children:[i("video",{ref:n,className:"w-full h-full",playsInline:!0}),i("div",{className:"absolute inset-0 flex items-center justify-center p-8",children:i("div",{className:"w-full h-1/2 border-4 border-dashed border-white/50 rounded-lg"})})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-between items-center rounded-b-lg",children:[i("p",{className:"text-sm text-text-secondary italic",children:o}),s&&i("p",{className:"text-sm text-red-600 font-medium",children:s}),i("button",{type:"button",onClick:t,className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:text-sm",children:"Cancel"})]})]})}):null},cw=({isOpen:e,onClose:t,product:r,variant:n,t:s,language:a})=>{var l;if(!e||!r||!n)return null;const o=()=>{const d=document.getElementById("barcode-to-print");if(!d)return;const u=window.open("","_blank");if(!u){alert("Please allow pop-ups to print the barcode.");return}const p=document.querySelector('script[src="https://cdn.tailwindcss.com"]'),h=Array.from(document.querySelectorAll("script")).find(y=>{var v;return(v=y.textContent)==null?void 0:v.includes("tailwind.config")}),m=Array.from(document.querySelectorAll("style"));u.document.write("<html><head><title>Print Barcode</title>"),p&&u.document.write(p.outerHTML),h&&u.document.write(`<script>${h.innerHTML}<\/script>`),m.forEach(y=>u.document.write(`<style>${y.innerHTML}</style>`)),u.document.write('</head><body class="bg-white print-center-container">'),u.document.write(d.outerHTML),u.document.write("</body></html>"),u.document.close(),setTimeout(()=>{u.focus(),u.print(),u.close()},500)};return i(Re,{children:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center no-print","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-sm m-4",onClick:d=>d.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Product Barcode"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{id:"barcode-to-print",className:"p-6 text-center bg-white",children:[i("h4",{className:"font-semibold text-text-primary",children:r.name[a]}),i("p",{className:"text-sm text-text-secondary",children:n.size}),c("div",{className:"my-4",children:[i("div",{className:"flex h-20 items-end justify-center gap-[1px]",children:(l=n.barcode)==null?void 0:l.split("").map((d,u)=>{const p=Math.random()*40+60,h=Math.random()>.5?"2px":"1px";return i("div",{style:{height:`${p}%`,width:h,backgroundColor:"black"}},u)})}),i("p",{className:"font-mono tracking-widest text-lg mt-2",children:n.barcode})]}),c("p",{className:"text-xs text-text-secondary",children:["SKU: ",n.sku]}),c("p",{className:"text-lg font-bold text-primary mt-1",children:["",n.price.walkIn.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[c("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",onClick:o,children:[i(xs,{className:"h-5 w-5 mr-2"})," Print"]}),i("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:"Close"})]})]})})})};var Pf={exports:{}},dw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uw=dw,mw=uw;function Tf(){}function Of(){}Of.resetWarningCache=Tf;var pw=function(){function e(n,s,a,o,l,d){if(d!==mw){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Of,resetWarningCache:Tf};return r.PropTypes=r,r};Pf.exports=pw();var hw=Pf.exports;const ve=rp(hw);var mc=function(e,t){return mc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},mc(e,t)};function If(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mc(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ki=function(){return Ki=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ki.apply(this,arguments)};function ws(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Af(e,t,r,n){var s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(t,r,a):o(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function jf(e,t){return function(r,n){t(r,n,e)}}function Df(e,t,r,n,s,a){function o(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var l=n.kind,d=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,m=!1,y=r.length-1;y>=0;y--){var v={};for(var b in n)v[b]=b==="access"?{}:n[b];for(var b in n.access)v.access[b]=n.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(w||null))};var k=(0,r[y])(l==="accessor"?{get:p.get,set:p.set}:p[d],v);if(l==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(h=o(k.get))&&(p.get=h),(h=o(k.set))&&(p.set=h),(h=o(k.init))&&s.unshift(h)}else(h=o(k))&&(l==="field"?s.unshift(h):p[d]=h)}u&&Object.defineProperty(u,n.name,p),m=!0}function Rf(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function Lf(e){return typeof e=="symbol"?e:"".concat(e)}function Mf(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Ff(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function K(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(p){try{u(n.next(p))}catch(h){o(h)}}function d(p){try{u(n.throw(p))}catch(h){o(h)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((n=n.apply(e,t||[])).next())})}function $f(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(p){return d([u,p])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(p){u=[6,p],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var _o=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Uf(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_o(t,e,r)}function Gi(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Id(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function zf(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Id(arguments[t]));return e}function Bf(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,s++)n[s]=a[o];return n}function Vf(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function ms(e){return this instanceof ms?(this.v=e,this):new ms(e)}function Wf(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(v){return Promise.resolve(v).then(y,h)}}function l(y,v){n[y]&&(s[y]=function(b){return new Promise(function(k,w){a.push([y,b,k,w])>1||d(y,b)})},v&&(s[y]=v(s[y])))}function d(y,v){try{u(n[y](v))}catch(b){m(a[0][3],b)}}function u(y){y.value instanceof ms?Promise.resolve(y.value.v).then(p,h):m(a[0][2],y)}function p(y){d("next",y)}function h(y){d("throw",y)}function m(y,v){y(v),a.shift(),a.length&&d(a[0][0],a[0][1])}}function qf(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,a){t[s]=e[s]?function(o){return(r=!r)?{value:ms(e[s](o)),done:!1}:a?a(o):o}:a}}function Hf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Gi=="function"?Gi(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(o){return new Promise(function(l,d){o=e[a](o),s(l,d,o.done,o.value)})}}function s(a,o,l,d){Promise.resolve(d).then(function(u){a({value:u,done:l})},o)}}function Kf(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var fw=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},pc=function(e){return pc=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},pc(e)};function Gf(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=pc(e),n=0;n<r.length;n++)r[n]!=="default"&&_o(t,e,r[n]);return fw(t,e),t}function Qf(e){return e&&e.__esModule?e:{default:e}}function Jf(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Xf(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Yf(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Zf(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var gw=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function eg(e){function t(a){e.error=e.hasError?new gw(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function tg(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,a,o){return n?t?".jsx":".js":s&&(!a||!o)?r:s+a+"."+o.toLowerCase()+"js"}):e}const yw={__extends:If,__assign:Ki,__rest:ws,__decorate:Af,__param:jf,__esDecorate:Df,__runInitializers:Rf,__propKey:Lf,__setFunctionName:Mf,__metadata:Ff,__awaiter:K,__generator:$f,__createBinding:_o,__exportStar:Uf,__values:Gi,__read:Id,__spread:zf,__spreadArrays:Bf,__spreadArray:Vf,__await:ms,__asyncGenerator:Wf,__asyncDelegator:qf,__asyncValues:Hf,__makeTemplateObject:Kf,__importStar:Gf,__importDefault:Qf,__classPrivateFieldGet:Jf,__classPrivateFieldSet:Xf,__classPrivateFieldIn:Yf,__addDisposableResource:Zf,__disposeResources:eg,__rewriteRelativeImportExtension:tg},vw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Zf,get __assign(){return Ki},__asyncDelegator:qf,__asyncGenerator:Wf,__asyncValues:Hf,__await:ms,__awaiter:K,__classPrivateFieldGet:Jf,__classPrivateFieldIn:Yf,__classPrivateFieldSet:Xf,__createBinding:_o,__decorate:Af,__disposeResources:eg,__esDecorate:Df,__exportStar:Uf,__extends:If,__generator:$f,__importDefault:Qf,__importStar:Gf,__makeTemplateObject:Kf,__metadata:Ff,__param:jf,__propKey:Lf,__read:Id,__rest:ws,__rewriteRelativeImportExtension:tg,__runInitializers:Rf,__setFunctionName:Mf,__spread:zf,__spreadArray:Vf,__spreadArrays:Bf,__values:Gi,default:yw},Symbol.toStringTag,{value:"Module"})),xw=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ps(e,t,r){const n=ww(e),{webkitRelativePath:s}=e,a=typeof t=="string"?t:typeof s=="string"&&s.length>0?s:`./${e.name}`;return typeof n.path!="string"&&mm(n,"path",a),r!==void 0&&Object.defineProperty(n,"handle",{value:r,writable:!1,configurable:!1,enumerable:!0}),mm(n,"relativePath",a),n}function ww(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const n=t.split(".").pop().toLowerCase(),s=xw.get(n);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}function mm(e,t,r){Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const bw=[".DS_Store","Thumbs.db"];function _w(e){return K(this,void 0,void 0,function*(){return Qi(e)&&kw(e.dataTransfer)?Ew(e.dataTransfer,e.type):Nw(e)?Sw(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Cw(e):[]})}function kw(e){return Qi(e)}function Nw(e){return Qi(e)&&Qi(e.target)}function Qi(e){return typeof e=="object"&&e!==null}function Sw(e){return hc(e.target.files).map(t=>ps(t))}function Cw(e){return K(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>r.getFile()))).map(r=>ps(r))})}function Ew(e,t){return K(this,void 0,void 0,function*(){if(e.items){const r=hc(e.items).filter(s=>s.kind==="file");if(t!=="drop")return r;const n=yield Promise.all(r.map(Pw));return pm(rg(n))}return pm(hc(e.files).map(r=>ps(r)))})}function pm(e){return e.filter(t=>bw.indexOf(t.name)===-1)}function hc(e){if(e===null)return[];const t=[];for(let r=0;r<e.length;r++){const n=e[r];t.push(n)}return t}function Pw(e){if(typeof e.webkitGetAsEntry!="function")return hm(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?ng(t):hm(e,t)}function rg(e){return e.reduce((t,r)=>[...t,...Array.isArray(r)?rg(r):[r]],[])}function hm(e,t){return K(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const a=yield e.getAsFileSystemHandle();if(a===null)throw new Error(`${e} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,ps(o)}}const n=e.getAsFile();if(!n)throw new Error(`${e} is not a File`);return ps(n,(r=t==null?void 0:t.fullPath)!==null&&r!==void 0?r:void 0)})}function Tw(e){return K(this,void 0,void 0,function*(){return e.isDirectory?ng(e):Ow(e)})}function ng(e){const t=e.createReader();return new Promise((r,n)=>{const s=[];function a(){t.readEntries(o=>K(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Tw));s.push(l),a()}else try{const l=yield Promise.all(s);r(l)}catch(l){n(l)}}),o=>{n(o)})}a()})}function Ow(e){return K(this,void 0,void 0,function*(){return new Promise((t,r)=>{e.file(n=>{const s=ps(n,e.fullPath);t(s)},n=>{r(n)})})})}var sl=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var n=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):s===l})}return!0};function fm(e){return jw(e)||Aw(e)||ag(e)||Iw()}function Iw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jw(e){if(Array.isArray(e))return fc(e)}function gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(r),!0).forEach(function(n){sg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fa(e,t){return Lw(e)||Rw(e,t)||ag(e,t)||Dw()}function Dw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ag(e,t){if(e){if(typeof e=="string")return fc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fc(e,t)}}function fc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rw(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],s=!0,a=!1,o,l;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function Lw(e){if(Array.isArray(e))return e}var Mw=typeof sl=="function"?sl:sl.default,Fw="file-invalid-type",$w="file-too-large",Uw="file-too-small",zw="too-many-files",Bw=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:Fw,message:"File type must be ".concat(n)}},vm=function(t){return{code:$w,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},xm=function(t){return{code:Uw,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Vw={code:zw,message:"Too many files"};function ig(e,t){var r=e.type==="application/x-moz-file"||Mw(e,t);return[r,r?null:Bw(t)]}function og(e,t,r){if(dn(e.size))if(dn(t)&&dn(r)){if(e.size>r)return[!1,vm(r)];if(e.size<t)return[!1,xm(t)]}else{if(dn(t)&&e.size<t)return[!1,xm(t)];if(dn(r)&&e.size>r)return[!1,vm(r)]}return[!0,null]}function dn(e){return e!=null}function Ww(e){var t=e.files,r=e.accept,n=e.minSize,s=e.maxSize,a=e.multiple,o=e.maxFiles,l=e.validator;return!a&&t.length>1||a&&o>=1&&t.length>o?!1:t.every(function(d){var u=ig(d,r),p=fa(u,1),h=p[0],m=og(d,n,s),y=fa(m,1),v=y[0],b=l?l(d):null;return h&&v&&!b})}function Ji(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Qa(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function wm(e){e.preventDefault()}function qw(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Hw(e){return e.indexOf("Edge/")!==-1}function Kw(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return qw(e)||Hw(e)}function lr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return t.some(function(l){return!Ji(n)&&l&&l.apply(void 0,[n].concat(a)),Ji(n)})}}function Gw(){return"showOpenFilePicker"in window}function Qw(e){if(dn(e)){var t=Object.entries(e).filter(function(r){var n=fa(r,2),s=n[0],a=n[1],o=!0;return lg(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(cg))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,n){var s=fa(n,2),a=s[0],o=s[1];return ym(ym({},r),{},sg({},a,o))},{});return[{description:"Files",accept:t}]}return e}function Jw(e){if(dn(e))return Object.entries(e).reduce(function(t,r){var n=fa(r,2),s=n[0],a=n[1];return[].concat(fm(t),[s],fm(a))},[]).filter(function(t){return lg(t)||cg(t)}).join(",")}function Xw(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Yw(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function lg(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function cg(e){return/^.*\.[\w]+$/.test(e)}var Zw=["children"],eb=["open"],tb=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],rb=["refKey","onChange","onClick"];function nb(e){return ib(e)||ab(e)||dg(e)||sb()}function sb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ab(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ib(e){if(Array.isArray(e))return gc(e)}function al(e,t){return cb(e)||lb(e,t)||dg(e,t)||ob()}function ob(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dg(e,t){if(e){if(typeof e=="string")return gc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gc(e,t)}}function gc(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lb(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],s=!0,a=!1,o,l;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&r.return!=null&&r.return()}finally{if(a)throw l}}return n}}function cb(e){if(Array.isArray(e))return e}function bm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bm(Object(r),!0).forEach(function(n){yc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xi(e,t){if(e==null)return{};var r=db(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function db(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var Ad=x.forwardRef(function(e,t){var r=e.children,n=Xi(e,Zw),s=jd(n),a=s.open,o=Xi(s,eb);return x.useImperativeHandle(t,function(){return{open:a}},[a]),ro.createElement(x.Fragment,null,r(Pe(Pe({},o),{},{open:a})))});Ad.displayName="Dropzone";var ug={disabled:!1,getFilesFromEvent:_w,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ad.defaultProps=ug;Ad.propTypes={children:ve.func,accept:ve.objectOf(ve.arrayOf(ve.string)),multiple:ve.bool,preventDropOnDocument:ve.bool,noClick:ve.bool,noKeyboard:ve.bool,noDrag:ve.bool,noDragEventsBubbling:ve.bool,minSize:ve.number,maxSize:ve.number,maxFiles:ve.number,disabled:ve.bool,getFilesFromEvent:ve.func,onFileDialogCancel:ve.func,onFileDialogOpen:ve.func,useFsAccessApi:ve.bool,autoFocus:ve.bool,onDragEnter:ve.func,onDragLeave:ve.func,onDragOver:ve.func,onDrop:ve.func,onDropAccepted:ve.func,onDropRejected:ve.func,onError:ve.func,validator:ve.func};var vc={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function jd(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Pe(Pe({},ug),e),r=t.accept,n=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,l=t.multiple,d=t.maxFiles,u=t.onDragEnter,p=t.onDragLeave,h=t.onDragOver,m=t.onDrop,y=t.onDropAccepted,v=t.onDropRejected,b=t.onFileDialogCancel,k=t.onFileDialogOpen,w=t.useFsAccessApi,f=t.autoFocus,g=t.preventDropOnDocument,_=t.noClick,E=t.noKeyboard,S=t.noDrag,O=t.noDragEventsBubbling,C=t.onError,P=t.validator,N=x.useMemo(function(){return Jw(r)},[r]),I=x.useMemo(function(){return Qw(r)},[r]),A=x.useMemo(function(){return typeof k=="function"?k:_m},[k]),T=x.useMemo(function(){return typeof b=="function"?b:_m},[b]),R=x.useRef(null),$=x.useRef(null),J=x.useReducer(ub,vc),ne=al(J,2),D=ne[0],L=ne[1],j=D.isFocused,te=D.isFileDialogActive,Z=x.useRef(typeof window<"u"&&window.isSecureContext&&w&&Gw()),U=function(){!Z.current&&te&&setTimeout(function(){if($.current){var X=$.current.files;X.length||(L({type:"closeDialog"}),T())}},300)};x.useEffect(function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}},[$,te,T,Z]);var V=x.useRef([]),de=function(X){R.current&&R.current.contains(X.target)||(X.preventDefault(),V.current=[])};x.useEffect(function(){return g&&(document.addEventListener("dragover",wm,!1),document.addEventListener("drop",de,!1)),function(){g&&(document.removeEventListener("dragover",wm),document.removeEventListener("drop",de))}},[R,g]),x.useEffect(function(){return!n&&f&&R.current&&R.current.focus(),function(){}},[R,f,n]);var ge=x.useCallback(function(z){C?C(z):console.error(z)},[C]),Ce=x.useCallback(function(z){z.preventDefault(),z.persist(),St(z),V.current=[].concat(nb(V.current),[z.target]),Qa(z)&&Promise.resolve(s(z)).then(function(X){if(!(Ji(z)&&!O)){var fe=X.length,B=fe>0&&Ww({files:X,accept:N,minSize:o,maxSize:a,multiple:l,maxFiles:d,validator:P}),we=fe>0&&!B;L({isDragAccept:B,isDragReject:we,isDragActive:!0,type:"setDraggedFiles"}),u&&u(z)}}).catch(function(X){return ge(X)})},[s,u,ge,O,N,o,a,l,d,P]),nt=x.useCallback(function(z){z.preventDefault(),z.persist(),St(z);var X=Qa(z);if(X&&z.dataTransfer)try{z.dataTransfer.dropEffect="copy"}catch{}return X&&h&&h(z),!1},[h,O]),st=x.useCallback(function(z){z.preventDefault(),z.persist(),St(z);var X=V.current.filter(function(B){return R.current&&R.current.contains(B)}),fe=X.indexOf(z.target);fe!==-1&&X.splice(fe,1),V.current=X,!(X.length>0)&&(L({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Qa(z)&&p&&p(z))},[R,p,O]),Je=x.useCallback(function(z,X){var fe=[],B=[];z.forEach(function(we){var Ke=ig(we,N),mt=al(Ke,2),ir=mt[0],Pr=mt[1],q=og(we,o,a),se=al(q,2),Tr=se[0],On=se[1],gr=P?P(we):null;if(ir&&Tr&&!gr)fe.push(we);else{var Or=[Pr,On];gr&&(Or=Or.concat(gr)),B.push({file:we,errors:Or.filter(function(rn){return rn})})}}),(!l&&fe.length>1||l&&d>=1&&fe.length>d)&&(fe.forEach(function(we){B.push({file:we,errors:[Vw]})}),fe.splice(0)),L({acceptedFiles:fe,fileRejections:B,isDragReject:B.length>0,type:"setFiles"}),m&&m(fe,B,X),B.length>0&&v&&v(B,X),fe.length>0&&y&&y(fe,X)},[L,l,N,o,a,d,m,y,v,P]),je=x.useCallback(function(z){z.preventDefault(),z.persist(),St(z),V.current=[],Qa(z)&&Promise.resolve(s(z)).then(function(X){Ji(z)&&!O||Je(X,z)}).catch(function(X){return ge(X)}),L({type:"reset"})},[s,Je,ge,O]),He=x.useCallback(function(){if(Z.current){L({type:"openDialog"}),A();var z={multiple:l,types:I};window.showOpenFilePicker(z).then(function(X){return s(X)}).then(function(X){Je(X,null),L({type:"closeDialog"})}).catch(function(X){Xw(X)?(T(X),L({type:"closeDialog"})):Yw(X)?(Z.current=!1,$.current?($.current.value=null,$.current.click()):ge(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ge(X)});return}$.current&&(L({type:"openDialog"}),A(),$.current.value=null,$.current.click())},[L,A,T,w,Je,ge,I,l]),kt=x.useCallback(function(z){!R.current||!R.current.isEqualNode(z.target)||(z.key===" "||z.key==="Enter"||z.keyCode===32||z.keyCode===13)&&(z.preventDefault(),He())},[R,He]),Nt=x.useCallback(function(){L({type:"focus"})},[]),dt=x.useCallback(function(){L({type:"blur"})},[]),qt=x.useCallback(function(){_||(Kw()?setTimeout(He,0):He())},[_,He]),Fe=function(X){return n?null:X},Ft=function(X){return E?null:Fe(X)},Xe=function(X){return S?null:Fe(X)},St=function(X){O&&X.stopPropagation()},at=x.useMemo(function(){return function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=z.refKey,fe=X===void 0?"ref":X,B=z.role,we=z.onKeyDown,Ke=z.onFocus,mt=z.onBlur,ir=z.onClick,Pr=z.onDragEnter,q=z.onDragOver,se=z.onDragLeave,Tr=z.onDrop,On=Xi(z,tb);return Pe(Pe(yc({onKeyDown:Ft(lr(we,kt)),onFocus:Ft(lr(Ke,Nt)),onBlur:Ft(lr(mt,dt)),onClick:Fe(lr(ir,qt)),onDragEnter:Xe(lr(Pr,Ce)),onDragOver:Xe(lr(q,nt)),onDragLeave:Xe(lr(se,st)),onDrop:Xe(lr(Tr,je)),role:typeof B=="string"&&B!==""?B:"presentation"},fe,R),!n&&!E?{tabIndex:0}:{}),On)}},[R,kt,Nt,dt,qt,Ce,nt,st,je,E,S,n]),ut=x.useCallback(function(z){z.stopPropagation()},[]),Ct=x.useMemo(function(){return function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=z.refKey,fe=X===void 0?"ref":X,B=z.onChange,we=z.onClick,Ke=Xi(z,rb),mt=yc({accept:N,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Fe(lr(B,je)),onClick:Fe(lr(we,ut)),tabIndex:-1},fe,$);return Pe(Pe({},mt),Ke)}},[$,r,l,je,n]);return Pe(Pe({},D),{},{isFocused:j&&!n,getRootProps:at,getInputProps:Ct,rootRef:R,inputRef:$,open:Fe(He)})}function ub(e,t){switch(t.type){case"focus":return Pe(Pe({},e),{},{isFocused:!0});case"blur":return Pe(Pe({},e),{},{isFocused:!1});case"openDialog":return Pe(Pe({},vc),{},{isFileDialogActive:!0});case"closeDialog":return Pe(Pe({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Pe(Pe({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Pe(Pe({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Pe({},vc);default:return e}}function _m(){}const mb=({isOpen:e,onClose:t,onApplyImport:r,products:n,t:s})=>{const[a,o]=x.useState(null),[l,d]=x.useState(null),[u,p]=x.useState(null),h=x.useMemo(()=>new Map(n.flatMap(g=>g.variants).map(g=>[g.sku,g])),[n]),m=x.useCallback(g=>{o(null),d(null),p(null);const _=g[0];if(!_)return;p(_.name);const E=new FileReader;E.onload=S=>{var O;try{const C=new Uint8Array((O=S.target)==null?void 0:O.result),P=XLSX.read(C,{type:"array"}),N=P.SheetNames[0],I=P.Sheets[N],A=XLSX.utils.sheet_to_json(I);if(A.length===0){d({creations:0,updates:0,skipped:0,errors:["The file is empty or in an incorrect format."]});return}const T=new Map,R=[];let $=0;const J=[];for(const[D,L]of A.entries()){const j=L.SKU?String(L.SKU):null;if(!j){$++,J.push(`Row ${D+2}: Missing required 'SKU'. Row skipped.`);continue}const te={sku:j,size:String(L["Variant Size"]||"Standard"),stock:Number(L.Stock||0),price:{walkIn:Number(L["Walk-in Price"]||0),contractor:Number(L["Contractor Price"]||0),government:Number(L["Government Price"]||0),cost:Number(L["Cost Price"]||0)},barcode:L.Barcode?String(L.Barcode):void 0};if(h.has(j)){const Z=h.get(j);R.push({...Z,...te})}else{const Z=L["Product Name"]?String(L["Product Name"]):null,U=L["Main Category"]?String(L["Main Category"]):null,V=L["Sub Category"]?String(L["Sub Category"]):null;if(!Z||!U||!V){$++,J.push(`Row ${D+2}: New SKU "${j}" requires a 'Product Name', 'Main Category', and 'Sub Category'. Row skipped.`);continue}const de=Vx(U,V);if(!de){$++,J.push(`Row ${D+2}: Category combination "${U} > ${V}" not found. Row skipped.`);continue}T.has(Z)?T.get(Z).variants.push(te):T.set(Z,{name:{en:Z,th:Z},description:{en:L["Description (EN)"]||"",th:L["Description (TH)"]||""},category:de,imageUrl:String(L["Image URL"]||`https://picsum.photos/seed/${Z.replace(/\s/g,"")}/400/400`),variants:[te]})}}const ne={productsToCreate:Array.from(T.values()),variantsToUpdate:R};o(ne),d({creations:ne.productsToCreate.length,updates:ne.variantsToUpdate.length,skipped:$,errors:J})}catch(C){d({creations:0,updates:0,skipped:0,errors:[`Failed to parse file: ${C.message}`]}),console.error(C)}},E.onerror=()=>d({creations:0,updates:0,skipped:0,errors:["Failed to read the file."]}),E.readAsArrayBuffer(_)},[h]),{getRootProps:y,getInputProps:v,isDragActive:b}=jd({onDrop:m,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/csv":[".csv"]},maxFiles:1}),k=()=>{a&&r(a)},w=()=>{o(null),d(null),p(null),t()},f=g=>{g.stopPropagation();const _=[{"Product Name":"Steel Rebar","Description (EN)":"High-tensile deformed steel bars for concrete reinforcement.","Description (TH)":"","Main Category":"Building & Construction Materials","Sub Category":"Steel & Metal","Image URL":"https://picsum.photos/seed/rebar/400/400","Variant Size":"16mm",SKU:"RB-16MM",Stock:30,"Cost Price":295,"Walk-in Price":385,"Contractor Price":355,"Government Price":370,Barcode:"8854567890124"},{"Product Name":"New Concrete Block","Description (EN)":"Standard, non-load-bearing concrete blocks for wall construction.","Description (TH)":"  ","Main Category":"Building & Construction Materials","Sub Category":"Bricks & Blocks","Image URL":"https://picsum.photos/seed/new-block/400/400","Variant Size":"Standard",SKU:"NCB-STD-01",Stock:200,"Cost Price":35,"Walk-in Price":45,"Contractor Price":40,"Government Price":42,Barcode:"9988776655111"}],E=XLSX.utils.json_to_sheet(_);E["!cols"]=[{wch:30},{wch:50},{wch:50},{wch:30},{wch:30},{wch:40},{wch:15},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:15},{wch:20}];const S=XLSX.utils.book_new();XLSX.utils.book_append_sheet(S,E,"Products"),XLSX.writeFile(S,"ProductImportExample.xlsx")};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:w,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4",onClick:g=>g.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:s("import_and_update_products")}),i("button",{onClick:w,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[c("div",{...y(),className:`flex justify-center items-center w-full px-6 py-10 border-2 border-gray-300 border-dashed rounded-md cursor-pointer transition-colors ${b?"bg-blue-50 border-primary":"bg-background hover:bg-gray-100"}`,children:[i("input",{...v()}),c("div",{className:"text-center",children:[i(vs,{className:"mx-auto h-12 w-12 text-gray-400"}),c("p",{className:"mt-2 text-sm text-text-secondary",children:[i("span",{className:"font-semibold text-primary",children:s("click_to_upload")})," ",s("or_drag_and_drop")]}),c("p",{className:"text-xs text-gray-500",children:[s("xlsx_or_csv_file")," ",i("button",{type:"button",onClick:f,className:"font-semibold text-primary hover:underline",children:s("download_example_file")})]})]})]}),l&&c("div",{className:"p-4 bg-background border rounded-md text-sm",children:[c("p",{className:"font-semibold text-text-primary",children:[s("import_summary_for")," ",i("span",{className:"font-bold",children:u}),":"]}),c("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[c("li",{className:"text-green-700",children:[i("span",{className:"font-bold",children:l.creations})," ",s("new_products_will_be_created")]}),c("li",{className:"text-blue-700",children:[i("span",{className:"font-bold",children:l.updates})," ",s("existing_variants_will_be_updated")]}),l.skipped>0&&c("li",{className:"text-yellow-700",children:[i("span",{className:"font-bold",children:l.skipped})," ",s("rows_will_be_skipped")]})]}),l.errors.length>0&&c("div",{className:"mt-2 pt-2 border-t max-h-24 overflow-y-auto",children:[i("p",{className:"text-xs font-semibold text-red-700",children:s("errors_found")}),c("ul",{className:"list-disc list-inside text-xs text-red-600",children:[l.errors.slice(0,5).map((g,_)=>i("li",{children:g},_)),l.errors.length>5&&c("li",{children:["...and ",l.errors.length-5," more."]})]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",onClick:k,disabled:!a||a.productsToCreate.length===0&&a.variantsToUpdate.length===0,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm disabled:bg-blue-300 disabled:cursor-not-allowed",children:s("confirm_import")}),i("button",{type:"button",onClick:w,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:s("cancel")})]})]})}):null},pb=({products:e,onProductSelect:t,onScanClick:r,onProductMouseEnter:n,onProductMouseLeave:s,t:a,language:o})=>{const[l,d]=x.useState(""),[u,p]=x.useState("All"),h=x.useMemo(()=>["All",...hr.map(v=>v.key)],[]),m=x.useMemo(()=>{const v=l.toLowerCase();return e.filter(b=>{const k=b.category.split(".")[0],w=u==="All"||k===u,f=!v||Object.values(b.name).some(g=>String(g).toLowerCase().includes(v))||b.variants.some(g=>g.sku.toLowerCase().includes(v)||g.barcode&&g.barcode.toLowerCase().includes(v));return w&&f})},[e,l,u]),y=v=>{if(v==="All")return a("all");const b=hr.find(k=>k.key===v);return b?b.name[o]:v};return c("div",{className:"bg-surface rounded-lg shadow flex flex-col h-full",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("products")}),c("div",{className:"flex items-center gap-2 flex-wrap flex-grow sm:flex-grow-0",children:[c("div",{className:"relative flex-grow",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:a("search_products_pos_placeholder"),value:l,onChange:v=>d(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),i("select",{value:u,onChange:v=>p(v.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background text-text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",children:h.map(v=>i("option",{value:v,children:y(v)},v))}),c("button",{onClick:r,className:"flex items-center gap-2 bg-gray-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",title:a("scan_product_barcode_title"),children:[i(wf,{className:"h-5 w-5"}),i("span",{className:"hidden sm:inline",children:a("scan")})]})]})]}),i("div",{className:"flex-1 overflow-y-auto p-4",children:m.length>0?i("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:m.map(v=>{var g;const b=v.variants.reduce((_,E)=>_+E.stock,0),k=v.variants.length>1,w=((g=v.variants[0])==null?void 0:g.price.walkIn)||0,f=v.variants.some(_=>_.stock>0);return c("button",{onClick:()=>t(v),onMouseEnter:_=>n(v,_),onMouseLeave:s,className:`text-left p-2 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${f?"bg-white hover:shadow-md":"bg-gray-100 opacity-70 hover:shadow-md"}`,children:[c("div",{className:"relative",children:[i("img",{src:v.imageUrl,alt:v.name[o],className:"h-28 w-full object-cover rounded-md"}),!f&&i("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center rounded-md",children:i("span",{className:"text-white font-bold text-sm bg-red-600 px-2 py-1 rounded",children:a("out_of_stock")})})]}),c("div",{className:"mt-2",children:[i("p",{className:"font-semibold text-sm text-text-primary leading-tight h-10 overflow-hidden",children:v.name[o]}),c("div",{className:"flex justify-between items-center mt-1",children:[i("p",{className:"text-xs text-text-secondary",children:k?a("sizes_available_title",{count:v.variants.length.toString()}):a("in_stock_count",{count:b.toLocaleString()})}),c("p",{className:"text-base font-bold text-primary",children:[k&&a("price_from")," ",w.toFixed(2)]})]})]})]},v.id)})}):c("div",{className:"text-center py-16 text-text-secondary",children:[i(us,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:a("no_products_found")}),i("p",{className:"text-sm mt-1",children:a("try_adjusting_search")})]})})]})},hb=({isOpen:e,onClose:t,products:r,cartItems:n,language:s})=>{const[a,o]=x.useState([]),[l,d]=x.useState(""),[u,p]=x.useState(!1),h=x.useRef(null),m=x.useRef(null),y=()=>{var k;(k=h.current)==null||k.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{e&&(o([{sender:"ai",text:"Hello! I'm your sales assistant. How can I help you find the right products today? You can ask me to compare items, suggest alternatives, or find complementary products."}]),setTimeout(()=>{var k;return(k=m.current)==null?void 0:k.focus()},100))},[e]),x.useEffect(y,[a]);const v=async()=>{if(!l.trim()||u)return;const k=[...a,{sender:"user",text:l}];o(k);const w=l;d(""),p(!0);try{const f=`You are an expert sales assistant at " ", a hardware and concrete supply store. Your goal is to help store staff assist customers by providing accurate product information, recommendations, and comparisons.
            - Use the provided JSON data for all products and the current shopping cart for context.
            - Be friendly, concise, and helpful. Answer in the same language as the user's query (${s==="th"?"Thai":"English"}).
            - Answer questions about products, suggest alternatives, or recommend complementary items.
            - If you don't know the answer or the data is not available, say so politely.
            - Keep responses focused on the products and the customer's needs.
            - Format your responses using simple markdown for better readability (e.g., lists, bold text).`,g=r.map(P=>({name:P.name[s],category:Od(P.category,s),variants:P.variants.map(N=>({sku:N.sku,size:N.size,stock:N.stock,price:{walkIn:N.price.walkIn,contractor:N.price.contractor,government:N.price.government}}))})),_=n.map(P=>({name:P.name[s],size:P.size,quantity:P.quantity,price:{walkIn:P.price.walkIn,contractor:P.price.contractor,government:P.price.government}})),E=`
            Here is the full product catalog (do not mention this to the user unless they ask for the full list):
            ${JSON.stringify(g,null,2)}

            Here are the items currently in the customer's shopping cart:
            ${n.length>0?JSON.stringify(_,null,2):"The cart is empty."}

            Please answer the following customer query: "${w}"
            `,S=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:E,systemInstruction:f})});if(!S.ok){const P=await S.json();throw new Error(P.error||"Failed to get response from AI assistant.")}const C=(await S.json()).text;o(P=>[...P,{sender:"ai",text:C}])}catch(f){console.error("Error calling backend API:",f),o(g=>[...g,{sender:"ai",text:`Sorry, I'm having trouble connecting. Error: ${f.message}`}])}finally{p(!1),setTimeout(()=>{var f;return(f=m.current)==null?void 0:f.focus()},100)}},b=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),v())};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4 flex flex-col max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center flex-shrink-0",children:[c("h3",{className:"text-lg font-semibold text-text-primary flex items-center gap-2",children:[i(_f,{className:"h-6 w-6 text-secondary"}),"AI Sales Assistant"]}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"flex-grow p-4 overflow-y-auto bg-background",children:c("div",{className:"space-y-4",children:[a.map((k,w)=>i("div",{className:`flex ${k.sender==="user"?"justify-end":"justify-start"}`,children:i("div",{className:`max-w-prose p-3 rounded-lg ${k.sender==="user"?"bg-primary text-white":"bg-white shadow-sm"}`,children:i("div",{className:"prose prose-sm",dangerouslySetInnerHTML:{__html:k.text.replace(/\n/g,"<br />")}})})},w)),u&&i("div",{className:"flex justify-start",children:i("div",{className:"max-w-prose p-3 rounded-lg bg-white shadow-sm",children:c("div",{className:"flex items-center gap-2",children:[i("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),i("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),i("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]})})}),i("div",{ref:h})]})}),i("div",{className:"p-4 border-t flex-shrink-0",children:c("div",{className:"flex items-center gap-2",children:[i("input",{ref:m,type:"text",value:l,onChange:k=>d(k.target.value),onKeyPress:b,placeholder:"Ask about products or recommendations...",className:"flex-grow block w-full px-4 py-2 border border-gray-300 rounded-full bg-white focus:ring-primary focus:border-primary",disabled:u}),i("button",{onClick:v,disabled:u||!l.trim(),className:"bg-primary text-white rounded-full p-3 hover:bg-blue-800 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors",children:i(Cx,{className:"h-5 w-5"})})]})})]})}):null},fb=({cartItems:e,customers:t,onUpdateQuantity:r,onRemoveItem:n,onClearCart:s,subtotal:a,tax:o,total:l,onCheckout:d,onCreateInvoice:u,customerId:p,customerName:h,onCustomerNameChange:m,onCustomerInputBlur:y,customerAddress:v,onCustomerAddressChange:b,customerPhone:k,onCustomerPhoneChange:w,onSelectCustomer:f,customerType:g,onCustomerTypeChange:_,isVatIncluded:E,onVatToggle:S,appliedCredit:O,onApplyCredit:C,orderType:P,onOrderTypeChange:N,products:I,onNewUnpaidOrder:A,customerOutstandingBalance:T,carriedForwardBalance:R,onCarryForwardBalance:$,onAddMiscItemClick:J,transportationFee:ne,setTransportationFee:D,storeSettings:L,t:j,language:te})=>{const[Z,U]=x.useState([]),[V,de]=x.useState(!1),[ge,Ce]=x.useState(""),[nt,st]=x.useState(null),Je=x.useRef(null),[je,He]=x.useState(!1),[kt,Nt]=x.useState(!1),[dt,qt]=x.useState("manual"),[Fe,Ft]=x.useState(""),[Xe,St]=x.useState(""),[at,ut]=x.useState("");x.useEffect(()=>{ut((L==null?void 0:L.delivery_rate_per_km)??10)},[L]),x.useEffect(()=>{let B=0;dt==="manual"?B=typeof Fe=="number"?Fe:0:B=(typeof Xe=="number"?Xe:0)*(typeof at=="number"?at:0),D(B)},[dt,Fe,Xe,at,D]),x.useEffect(()=>{e.length===0&&ne===0&&(Ft(""),St(""))},[e,ne]),x.useEffect(()=>{const B=we=>{Je.current&&!Je.current.contains(we.target)&&de(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),x.useEffect(()=>{st(null),Ce((O==null?void 0:O.id)||""),T===0&&$(0)},[e,O,T,$]);const Ct=B=>{const we=B.target.value;if(m(we),$(0),we){const Ke=t.filter(mt=>mt.name.toLowerCase().includes(we.toLowerCase()));U(Ke),de(Ke.length>0)}else U([]),de(!1)},z=B=>{f(B),U([]),de(!1),$(0)},X=()=>{const B=C(ge);st({type:B.success?"success":"error",text:B.message})},fe=()=>P==="Delivery"||P==="Pickup"?c("div",{className:"flex gap-2",children:[i("button",{onClick:A,className:"w-1/2 bg-secondary text-white font-bold py-3 rounded-lg hover:bg-orange-700",children:j("pay_later")}),i("button",{onClick:d,className:"w-1/2 bg-primary text-white font-bold py-3 rounded-lg hover:bg-blue-800",children:j("pay_now")})]}):g==="contractor"||g==="government"||g==="organization"?c("div",{className:"flex gap-2",children:[i("button",{onClick:u,className:"w-1/2 bg-secondary text-white font-bold py-3 rounded-lg hover:bg-orange-700",children:j("create_invoice")}),i("button",{onClick:d,className:"w-1/2 bg-primary text-white font-bold py-3 rounded-lg hover:bg-blue-800",children:j("proceed_to_payment")})]}):i("button",{onClick:d,className:"w-full bg-primary text-white font-bold py-3 rounded-lg hover:bg-blue-800",children:j("proceed_to_payment")});return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow flex flex-col h-full",children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:j("current_order")}),c("div",{className:"flex items-center gap-4",children:[c("button",{onClick:J,className:"flex items-center gap-1.5 text-sm text-primary hover:text-blue-700 font-medium",title:j("add_misc_item"),children:[i(Rt,{className:"h-5 w-5"}),i("span",{children:j("misc_item")})]}),c("button",{onClick:()=>Nt(!0),className:"flex items-center gap-1.5 text-sm text-primary hover:text-blue-700 font-medium",title:"Open AI Sales Assistant",children:[i(_f,{className:"h-5 w-5 text-secondary"}),i("span",{children:j("ai_assist")})]}),e.length>0&&i("button",{onClick:s,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:j("clear_all")})]})]}),c("div",{className:"p-4 border-b",children:[c("button",{onClick:()=>He(!je),className:"w-full flex justify-between items-center font-semibold text-text-primary mb-2",children:[j("customer_and_order_type"),je?i(xo,{className:"h-5 w-5"}):i(Sx,{className:"h-5 w-5"})]}),!je&&c("div",{className:"space-y-3",children:[c("div",{ref:Je,children:[i("label",{htmlFor:"customer-name",className:"block text-sm font-medium text-text-secondary mb-1",children:j("customer_name")}),c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(xf,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",id:"customer-name",value:h,onChange:Ct,onFocus:Ct,onBlur:y,placeholder:j("search_or_enter_name_placeholder"),autoComplete:"off",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"}),V&&i("ul",{className:"absolute z-10 w-full mt-1 bg-surface border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto",children:Z.map(B=>i("li",{onClick:()=>z(B),className:"px-4 py-2 text-sm text-text-primary hover:bg-primary hover:text-white cursor-pointer",children:B.name},B.id))})]})]}),T>0&&c("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md text-sm",children:[c("p",{className:"font-semibold text-yellow-800",children:[j("outstanding_balance"),": ",T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("button",{onClick:()=>$(R>0?0:T),className:`w-full mt-2 px-3 py-1.5 text-xs font-bold rounded-md ${R>0?"bg-red-500 text-white":"bg-yellow-500 text-yellow-900"}`,children:R>0?"Cancel":j("add_balance_to_order")})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"customer-type",className:"block text-sm font-medium text-text-secondary mb-1",children:j("customer_type")}),c("select",{id:"customer-type",value:g,onChange:B=>_(B.target.value),disabled:!!p,className:"block w-full p-2 border border-gray-300 rounded-md bg-background disabled:bg-gray-200 disabled:cursor-not-allowed",children:[i("option",{value:"walkIn",children:j("walk_in")}),i("option",{value:"contractor",children:j("contractor")}),i("option",{value:"government",children:j("government")}),i("option",{value:"organization",children:j("organization")})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:j("order_type")}),i("div",{className:"flex rounded-md shadow-sm",children:["In-Store","Pickup","Delivery"].map(B=>i("button",{type:"button",onClick:()=>N(B),className:`px-2 py-2 text-xs font-medium border border-gray-300 flex-1 first:rounded-l-md last:rounded-r-md -ml-px ${P===B?"bg-primary text-white z-10":"bg-white text-gray-700 hover:bg-gray-50"}`,children:j(B.toLowerCase().replace("-","_"))},B))})]})]})]})]}),i("div",{className:"flex-1 overflow-y-auto p-4",children:e.length===0?c("div",{className:"text-center py-16 text-text-secondary",children:[i("p",{children:j("cart_is_empty")}),i("p",{className:"text-sm",children:j("cart_empty_desc")})]}):i("div",{className:"space-y-3",children:e.map(B=>c("div",{className:"flex items-center gap-3",children:[i("img",{src:B.imageUrl,alt:B.name[te],className:"h-12 w-12 rounded object-cover"}),c("div",{className:"flex-1",children:[c("p",{className:"text-sm font-medium leading-tight",children:[B.name[te]," - ",B.size]}),c("p",{className:"text-xs text-text-secondary",children:[j(B.isOutsourced?"outsourced":"stock"),": ",B.stock]})]}),c("div",{className:"flex items-center gap-2",children:[i("button",{onClick:()=>r(B.variantId,B.quantity-1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:i(Nx,{className:"h-3 w-3"})}),i("input",{type:"number",value:B.quantity,onChange:we=>r(B.variantId,parseInt(we.target.value,10)||0),className:"w-12 text-center border-gray-300 rounded-md p-1 text-sm"}),i("button",{onClick:()=>r(B.variantId,B.quantity+1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:i(Rt,{className:"h-3 w-3"})})]}),i("button",{onClick:()=>n(B.variantId),className:"text-red-500 hover:text-red-700",children:i(sr,{className:"h-4 w-4"})})]},B.variantId))})}),c("div",{className:"p-4 border-t bg-background space-y-3",children:[P==="Delivery"&&c("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i("label",{className:"text-sm font-semibold text-blue-800",children:j("transportation_fee")}),i("div",{className:"flex items-center gap-2 mt-2",children:c("div",{className:"flex rounded-md shadow-sm w-full",children:[i("button",{type:"button",onClick:()=>qt("manual"),className:`px-2 py-1 text-xs font-medium border border-gray-300 rounded-l-md -mr-px ${dt==="manual"?"bg-primary text-white":"bg-white"}`,children:j("manual")}),i("button",{type:"button",onClick:()=>qt("distance"),className:`px-2 py-1 text-xs font-medium border border-gray-300 rounded-r-md ${dt==="distance"?"bg-primary text-white":"bg-white"}`,children:j("by_distance")})]})}),dt==="manual"?i("input",{type:"number",placeholder:"Fee Amount",value:Fe,onChange:B=>Ft(B.target.value===""?"":Number(B.target.value)),className:"mt-2 w-full p-2 border rounded-md"}):c("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i("input",{type:"number",placeholder:j("distance_km"),value:Xe,onChange:B=>St(B.target.value===""?"":Number(B.target.value)),className:"p-2 border rounded-md"}),i("input",{type:"number",placeholder:j("rate_per_km"),value:at,onChange:B=>ut(B.target.value===""?"":Number(B.target.value)),className:"p-2 border rounded-md"})]})]}),c("div",{className:"flex justify-between text-sm",children:[i("span",{children:j("subtotal")}),c("span",{children:["",a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"flex justify-between text-sm",children:[i("span",{children:j("tax_7")}),c("span",{children:["",o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"flex items-center gap-2",children:[i("input",{type:"checkbox",id:"vat-toggle",checked:E,onChange:B=>S(B.target.checked),disabled:g==="government",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),i("label",{htmlFor:"vat-toggle",className:"text-sm",children:j("include_vat_7")})]}),c("div",{className:"border-t pt-2",children:[i("label",{className:"text-sm font-medium",children:j("store_credit")}),c("div",{className:"flex gap-2 mt-1",children:[i("input",{type:"text",placeholder:j("enter_code_placeholder"),value:ge,onChange:B=>Ce(B.target.value),className:"flex-grow w-full p-2 border rounded-md text-sm"}),i("button",{onClick:X,className:"px-4 py-2 bg-secondary text-white text-sm font-bold rounded-md hover:bg-orange-700",children:j("apply")})]}),nt&&c("p",{className:`text-xs mt-1 flex items-center gap-1 ${nt.type==="success"?"text-green-600":"text-red-600"}`,children:[nt.type==="success"?i(bo,{className:"h-4 w-4"}):i(bf,{className:"h-4 w-4"}),nt.text]})]}),c("div",{className:"border-t pt-3 mt-3 flex justify-between items-baseline",children:[i("span",{className:"text-lg font-bold",children:j("grand_total")}),c("span",{className:"text-2xl font-bold text-primary",children:["",l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),i("div",{className:"mt-2",children:fe()})]})]}),i(hb,{isOpen:kt,onClose:()=>Nt(!1),products:I,cartItems:e,language:te})]})},gb=({isOpen:e,onClose:t,onPaymentSuccess:r,totalAmount:n,currentUser:s,t:a})=>{var m;const[o,l]=x.useState(!1),[d,u]=x.useState(!1),p=((m=s.settings)==null?void 0:m.defaultPaymentMethod)||"Card",h=y=>{l(!0),setTimeout(()=>{l(!1),u(!0),setTimeout(()=>{r(y),u(!1)},1500)},1e3)};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:o?void 0:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-sm m-4",onClick:y=>y.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("complete_payment")}),!o&&!d&&i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-6 text-center",children:d?c("div",{className:"flex flex-col items-center gap-4 text-green-600",children:[i(bo,{className:"h-16 w-16"}),i("p",{className:"text-xl font-semibold",children:a("payment_successful")})]}):c(Re,{children:[i("p",{className:"text-text-secondary",children:a("total_amount_to_pay")}),c("p",{className:"text-4xl font-bold text-primary my-4",children:["",n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("p",{className:"text-sm text-text-secondary mt-2",children:a("choose_payment_method")})]})}),!d&&c("div",{className:"bg-background p-4 space-y-3 rounded-b-lg",children:[c("button",{onClick:()=>h("Card"),disabled:o,className:`w-full flex justify-center items-center gap-2 rounded-md border border-transparent shadow-sm px-4 py-3 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-blue-300 disabled:cursor-wait ${p==="Card"?"ring-2 ring-offset-2 ring-primary":""}`,children:[i(Ed,{className:"h-5 w-5"}),a(o?"processing":"pay_with_card")]}),c("button",{onClick:()=>h("Cash"),disabled:o,className:`w-full flex justify-center items-center gap-2 rounded-md border border-gray-300 shadow-sm px-4 py-3 bg-white text-base font-medium text-text-primary hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-gray-200 disabled:cursor-wait ${p==="Cash"?"ring-2 ring-offset-2 ring-primary":""}`,children:[i(ys,{className:"h-5 w-5"}),a(o?"processing":"pay_with_cash")]}),c("button",{onClick:()=>h("Bank Transfer"),disabled:o,className:`w-full flex justify-center items-center gap-2 rounded-md border border-gray-300 shadow-sm px-4 py-3 bg-white text-base font-medium text-text-primary hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-gray-200 disabled:cursor-wait ${p==="Bank Transfer"?"ring-2 ring-offset-2 ring-primary":""}`,children:[i(kf,{className:"h-5 w-5"}),a(o?"processing":"pay_with_bank")]})]})]})}):null},km={en:{dashboard:"Dashboard",pos:"Point of Sale",inventory:"Inventory",returns:"Returns",customers:"Customers",suppliers:"Suppliers",accounts_payable:"Accounts Payable",accounts_receivable:"Accounts Receivable",sales_history:"Sales History",order_fulfillment:"Order Fulfillment",customer_assist:"Customer Assist",end_of_day:"End of Day",activity_log:"Activity Log",user_management:"User Management",my_profile:"My Profile",store_settings:"Store Settings",logout:"Logout",simulate_user:"Simulate Role",products:"Products",search_products_pos_placeholder:"Search products or scan barcode...",scan_product_barcode_title:"Scan a product barcode to add to cart",all:"All",select_product_title:"{name} - Stock: {stock}, Variants: {variants}",sizes_available_title:"{count} sizes available",price_from:"From",no_products_found:"No Products Found",try_adjusting_search:"Try adjusting your search query or filters.",current_order:"Current Order",ai_assist:"AI Assist",clear_all:"Clear All",customer_and_order_type:"Customer & Order Type",customer_name:"Customer Name",search_or_enter_name_placeholder:"Search or enter name...",customer_phone:"Customer Phone",enter_phone_placeholder:"Enter phone number...",delivery_address:"Delivery Address",customer_address:"Customer Address",enter_delivery_address_placeholder:"Enter delivery address...",enter_tax_invoice_address_placeholder:"Enter address for tax invoice...",customer_type:"Customer Type",walk_in:"Walk-in",contractor:"Contractor",government:"Government",organization:"Organization",order_type:"Order Type",in_store:"In-Store",pickup:"Pickup",delivery:"Delivery",cart_is_empty:"Cart is empty",cart_empty_desc:"Add products to get started.",subtotal:"Subtotal",tax_7:"Tax (7%)",store_credit:"Store Credit",include_vat_7:"Include VAT 7%",store_credit_code:"Store Credit Code",enter_code_placeholder:"Enter code...",apply:"Apply",total:"Total",proceed_to_payment:"Proceed to Payment",create_order_and_pay:"Create {orderType} Order & Pay",create_delivery_order_pay_later:"Create Delivery Order (Pay Later)",select_size_for:"Select Size for",stock:"Stock",product_out_of_stock_all_sizes:"This product is out of stock in all sizes.",cancel:"Cancel",complete_payment:"Complete Payment",total_amount_to_pay:"Total amount to pay",choose_payment_method:"Choose payment method",processing:"Processing...",pay_with_card:"Pay with Card",pay_with_cash:"Pay with Cash",pay_with_bank:"Pay with Bank Transfer",payment_successful:"Payment Successful!",in_stock_count:"{count} in stock",product_details:"Product Details",category:"Category",available_variants:"Available Variants",size:"Size",sku:"SKU",walk_in_price:"Walk-in Price",contractor_price:"Contractor Price",status:"Status",close:"Close",out_of_stock:"Out of Stock",low_stock:"Low Stock",in_stock:"In Stock",delete:"Delete",delete_product_confirm_message:'Are you sure you want to delete the product "{productName}"? This action cannot be undone.',undo_consolidation_title:"Undo Consolidation",undo_consolidation_confirm_message:"Are you sure you want to undo the consolidation for invoice {invoiceId}? This will delete this invoice and restore the original invoices.",undo_consolidation:"Undo Consolidation",import_success_bills_and_suppliers:"Successfully imported {billCount} bills and created {supplierCount} new suppliers.",import_success_bills_only:"Successfully imported {billCount} bills.",password_update_success:"Password updated successfully.",force_password_change_success_desc:"Your password has been changed. You can now use the app.",past_invoice_import_success:"Successfully imported {count} past invoices.",role_ceo:"CEO",role_admin:"Admin",role_account_manager:"Account Manager",role_store_manager:"Store Manager",role_store_staff:"Store Staff",role_pos_operator:"POS Operator",dashboard_management:"Dashboard Management",category_management:"Category Management",inventory_management:"Inventory Management",search_or_scan_barcode_placeholder:"Search by name, SKU, or scan barcode...",scan:"Scan",all_statuses:"All Statuses",export:"Export",import:"Import",add_by_scan:"Add by Scan",add_product:"Add Product",product:"Product",total_stock:"Total Stock",variants:"Variants",actions:"Actions",view_details_tooltip:"View details",edit_product_tooltip:"Edit product",delete_product_tooltip:"Delete product",inventory_empty_message:"Your inventory is empty. Start by <b>adding a new product</b> or <b>importing</b> from an Excel file.",missing_information:"Missing Information",add_product_validation1:"Please fill out all required fields: Name (EN & TH), Category, and upload an image.",add_product_validation2:"Please ensure all variants have a SKU, Size, and a valid Walk-in Price and Cost Price.",invalid_variant:"Invalid Variant Information",main_category:"Main Category",select_main_category:"Select Main Category",sub_category:"Sub Category",select_sub_category:"Select Sub Category",category_helper_title:"Category Helper",description:"Description",example_products:"Example Products",cost_price:"Cost Price",edit:"Edit",delete_user_title:"Delete User",delete_user_confirm_message:'Are you sure you want to delete the user "{userName}"?',reset_password_confirm_title:"Reset Password",reset_password_confirm_message:'Are you sure you want to reset the password for "{userName}"?',reset_password:"Reset Password",add_new_user:"Add New User",full_name:"Full Name",roles:"Roles",payroll_info:"Payroll Information",payroll_info_desc:"This is optional and only visible to authorized users.",salary:"Salary / Wage",wage_type:"Wage Type",wage_type_monthly:"Monthly",wage_type_daily:"Daily",add_user_validation:"Please enter a name and select at least one role.",edit_user_validation:"Please ensure name, roles, and avatar are set.",suppliers_overview:"Suppliers Overview",search_suppliers_placeholder:"Search by name, contact, or email...",add_new_supplier:"Add New Supplier",contact_person:"Contact Person",email:"Email",phone:"Phone",address:"Address",add_supplier_validation:"Please enter a Supplier Name, Contact Person, and Email.",scan_barcode:"Scan Barcode",print:"Print",vat_invoice_requires_details_alert:"Creating a VAT invoice requires a customer phone number and address.",cart_is_empty_alert:"The cart is empty. Please add items before proceeding.",outsourced:"Outsourced",outstanding_balance:"Outstanding Balance",add_balance_to_order:"Add Balance to this Order",misc_item:"Misc. Item",transportation_fee:"Transportation Fee",manual:"Manual",by_distance:"By Distance",distance_km:"Distance (km)",rate_per_km:"Rate per km",grand_total:"Grand Total",create_invoice:"Create Invoice",payment_card:"Card",payment_cash:"Cash",payment_bank_transfer:"Bank Transfer",view_report:"View Report",close_shift:"Close Shift",sales_by_payment_method:"Sales by Payment Method",top_selling_items:"Top Selling Items",close_shift_confirm_title:"Close Current Shift?",close_shift_confirm_message:"This will finalize all sales since the last shift was closed and generate a report. This action cannot be undone.",tax_id:"Tax ID",receipt:"Receipt",receipt_id:"Receipt ID",date:"Date",operator:"Operator",item:"Item",qty:"Qty",price:"Price",receipt_footer_line1:"Thank you for your purchase!",receipt_footer_line2:"Please check your items before leaving.",bill_to:"Bill To",consolidates_invoices:"Consolidates invoices",customer_management:"Customer Management",search_customer_placeholder:"Search by name, phone, or address...",type:"Type",add_new_customer:"Add New Customer",add_customer_validation:"Please enter a name and select a customer type.",customer_assist_desc:"A customer-facing view to look up product information and availability.",search_by_name_sku_barcode_placeholder:"Search by name, SKU, or barcode...",order_management:"Order Management",search_order_id_or_customer:"Search by Order ID or customer...",fulfillment:"Fulfillment",payment:"Payment",order_id:"Order ID",mark_as_paid:"Mark as Paid",bill_customer:"Bill Customer",print_pdf:"Print/PDF",items_to_prepare:"Items to Prepare",delivery_pickup_info:"Delivery/Pickup Info",paid_via:"Paid via",confirm_payment:"Confirm Payment",total_amount_for_order:"Total amount for order",select_payment_method:"Select Payment Method",payment_received_in_cash:"Payment received in cash.",payment_confirmed_via_transfer:"Payment confirmed via bank transfer.",payment_processed_with_card:"Payment processed with card terminal.",delivery_note_pickup_slip:"Delivery Note / Pickup Slip",shipping_address:"Shipping Address",product_description:"Product Description",quantity:"Quantity",received_by:"Received By",customer_signature:"Customer's Signature",delivered_by:"Delivered By",staff_signature:"Staff's Signature",sales_and_invoices:"Sales & Invoices",sales_history_desc:"View, search, and manage all past transactions and invoices.",search_sales_history_placeholder:"Search ID, customer, or operator...",amount_paid:"Amount Paid",balance_due:"Balance Due",receive_payment:"Receive Payment",view_attached_invoice:"View attached invoice",view_receipt:"View Receipt",delete_transaction:"Delete Transaction",paid:"Paid",partially_paid:"Partially Paid",consolidated:"Consolidated",overdue:"Overdue",unpaid:"Unpaid",delete_transaction_title:"Delete Transaction",delete_transaction_confirm_message:"Are you sure you want to delete transaction {transactionId}? This action is irreversible.",user_activity_log:"User Activity Log",activity_log_desc:"A log of important actions taken by users in the system.",search_by_user_name:"Search by user name...",export_to_excel:"Export to Excel",user:"User",action:"Action",timestamp:"Timestamp",no_activity_found:"No Activity Found",no_activity_matching_search:"There is no activity matching your search.",import_and_update_products:"Import & Update Products",click_to_upload:"Click to upload",or_drag_and_drop:"or drag and drop",xlsx_or_csv_file:"XLSX or CSV file.",download_example_file:"Download example file.",import_summary_for:"Import summary for",new_products_will_be_created:"new products will be created.",existing_variants_will_be_updated:"existing variants will be updated based on SKU.",rows_will_be_skipped:"{count} rows will be skipped due to errors.",errors_found:"Errors found:",confirm_import:"Confirm Import",password_update_error_mismatch:"New passwords do not match.",password_update_error_too_short:"Password must be at least 6 characters long.",password_update_error_incorrect:"Incorrect current password.",password_update_error_db:"Database error updating password.",password_update_error_not_logged_in:"Not logged in.",save:"Save",shift_history:"Shift History",search_by_id_or_user:"Search by Shift ID or User...",shift_id:"ID ",start_time:"Start Time",end_time:"End Time",closed_by:"Closed By",no_shifts_found:"No Shift History Found",no_shifts_desc:"No shifts have been closed yet.",shift_report:"Shift Report",print_report:"Print Report",import_customers:"Import Customers",new_customers_will_be_created:"new customers will be created.",import_suppliers:"Import Suppliers",new_suppliers_will_be_created:"new suppliers will be created.",default_delivery_rate:"Default Delivery Rate per km",please_sign_in:"Please sign in to continue",username_placeholder:"Username",password_placeholder:"Password",sign_in:"Sign In",force_password_change_title:"Please Update Your Password",force_password_change_desc:"For security, you must change your temporary password before you can continue.",new_password:"New Password",confirm_new_password:"Confirm New Password",update_password:"Update Password",set_due_date:"Set Invoice Due Date",due_date:"Due Date",confirm:"Confirm",record_payment:"Record Payment",bills:"Bills",search_invoice_or_supplier:"Search by invoice # or supplier",import_bills:"Import Bills",add_bill:"Add Bill",clear_filter:"(Clear Filter)",invoice_number:"Invoice #",record_past_invoice:"Record Past Invoice",record_past_invoice_desc:"Manually enter an unpaid invoice from a previous system to track it here.",original_invoice_id:"Original Invoice ID",original_invoice_date:"Original Invoice Date",total_invoice_amount:"Total Invoice Amount",amount_already_paid:"Amount Already Paid",import_past_invoices:"Import Past Invoices",import_past_invoices_desc:"Bulk upload past unpaid invoices from an Excel file.",ceo_todo_list:"CEO To-Do List",add_task:"Add a new task...",mark_as_incomplete:"Mark as incomplete",mark_as_complete:"Mark as complete",postpone:"Postpone",no_tasks:"No tasks yet. Add one to get started!",sales_performance:"Sales Performance",sales_today:"Today's Sales",sales_month:"This Month's Sales",sales_year:"This Year's Sales",ar_new:"New A/R",daily_expenses:"Daily Expenses",wages_today:"Today's Wages (Daily)",overdue_amount:"Overdue Amount",outsource_purchase:"Outsource Purchase",cost_from_supplier:"Cost from Supplier",markup_percentage:"Markup",new_selling_price:"New Selling Price",add_to_cart:"Add to Cart",add_misc_item:"Add Misc. Item",add_misc_item_desc:"Add a one-time item to the cart that is not in inventory.",item_description:"Item Description",selling_price:"Selling Price",no_low_stock_items:"No items are currently low on stock.",bill_status_paid:"Paid",bill_status_overdue:"Overdue",bill_status_due:"Due",payment_cheque:"Cheque",reference_note:"Reference / Note",amount_to_pay:"Amount to Pay",payment_status_unpaid:"Unpaid",payment_status_paid:"Paid",payment_status_partially_paid:"Partially Paid",payment_status_refunded:"Refunded",payment_status_consolidated:"Consolidated",fulfillment_status_pending:"Pending",fulfillment_status_processing:"Processing",fulfillment_status_ready_for_pickup:"Ready for Pickup",fulfillment_status_completed:"Completed",fulfillment_status_cancelled:"Cancelled",bill_customer_confirm_title:"Convert Order to Invoice?",bill_customer_confirm_message:"This will convert order {orderId} into an unpaid invoice and move it to Accounts Receivable. This action cannot be undone.",confirm_and_bill:"Confirm & Bill",no_transactions_found:"No Transactions Found",system_users:"System Users",no_suppliers_found:"No Suppliers Found",delete_supplier_title:"Delete Supplier",delete_supplier_confirm_message:"Are you sure you want to delete {supplierName}?",no_customers_found:"No Customers Found",try_adjusting_search_or_add_customer:"Try adjusting your search or add a new customer.",delete_customer_title:"Delete Customer",delete_customer_confirm_message:"Are you sure you want to delete {customerName}?",delivery_requires_details_alert:"Delivery orders require a customer phone number and address.",no_bills_found:"No bills found",delete_bill_title:"Delete Bill",delete_bill_message:"Are you sure you want to delete bill #{invoiceNumber}?",total_owed:"Total Owed",overdue_bills:"Overdue Bills",due_in_days:"Due in {days} Days",import_bills_desc:"Bulk upload bills from an Excel file. New suppliers will be created automatically.",bills_to_create:"{count} bills will be created.",new_suppliers_to_create:"{count} new suppliers will be created.",profit_margin:"Profit Margin",avg_transaction:"Avg. Transaction",save_changes:"Save Changes",bill_date:"Bill Date",attach_invoice:"Attach Invoice",add_bill_validation:"Please ensure all required fields are filled correctly.",sales_overview:"Sales Overview",sales_this_month:"This Month's Sales",inventory_overview:"Inventory Overview",total_skus:"Total SKUs",out_of_stock_skus:"Out of Stock SKUs",low_stock_items:"Low Stock Items",view_all_inventory:"View All Inventory",widget_sales_overview:"Sales Overview",widget_accounts_payable:"Accounts Payable",widget_inventory_overview:"Inventory Overview",widget_low_stock_list:"Low Stock List",due_today:"Due Today",undo_consolidation_success:"Undo consolidation successful. The original invoices have been restored.",product_not_found:"Product Not Found",product_not_found_alert:'Product with barcode "{code}" was not found in the inventory.',total_sales:"Total Sales",total_profit:"Total Profit",customer:"Customer",payment_method:"Payment Method",name:"Name",edit_customer:"Edit Customer",delete_customer:"Delete Customer",notes:"Notes",no_orders_found:"No Orders Found",try_adjusting_filters:"Try adjusting your search or filters.",order_details:"Order Details",items_in_order:"Items in Order",delivery_note:"Delivery Note",pickup_note:"Pickup Note",no_sales_matching_search:"No sales records match your search criteria.",payment_amount:"Payment Amount",amount:"Amount",payment_date:"Payment Date",total_receivables:"Total Receivables",show_all_invoices:"Show All Invoices",group_by_customer:"Group by Customer",create_consolidated_invoice:"Create Consolidated Invoice",consolidated_invoice:"Consolidated Invoice",daily_sales_overview:"Daily Sales Overview",total_sales_today:"Total Sales Today",cash_sales:"Cash Sales",card_sales:"Card Sales",bank_transfer_sales:"Bank Transfer Sales",new_accounts_receivable:"New Accounts Receivable",pay_later:"Pay Later",pay_now:"Pay Now",no_items_sold_yet:"No items sold in this shift yet.",end_of_day_summary_desc:"Summary of sales since the last shift was closed.",shift_start_time:"Shift start time",transactions:"Transactions"},th:{dashboard:"",pos:" (POS)",inventory:"",returns:"",customers:"",suppliers:"",accounts_payable:"",accounts_receivable:"",sales_history:"",order_fulfillment:"",customer_assist:"",end_of_day:"",activity_log:"",user_management:"",my_profile:"",store_settings:"",logout:"",simulate_user:"",products:"",search_products_pos_placeholder:"...",scan_product_barcode_title:"",all:"",select_product_title:"{name} - : {stock}, : {variants}",sizes_available_title:" {count} ",price_from:"",no_products_found:"",try_adjusting_search:"",current_order:"",ai_assist:" AI",clear_all:"",customer_and_order_type:"",customer_name:"",search_or_enter_name_placeholder:"...",customer_phone:"",enter_phone_placeholder:"...",delivery_address:"",customer_address:"",enter_delivery_address_placeholder:"...",enter_tax_invoice_address_placeholder:"...",customer_type:"",walk_in:"",contractor:"",government:"",organization:"",order_type:"",in_store:"",pickup:"",delivery:"",cart_is_empty:"",cart_empty_desc:"",subtotal:"",tax_7:" (7%)",store_credit:"",include_vat_7:" 7%",store_credit_code:"",enter_code_placeholder:"...",apply:"",total:"",proceed_to_payment:"",create_order_and_pay:" {orderType} ",create_delivery_order_pay_later:" ()",select_size_for:"",stock:"",product_out_of_stock_all_sizes:"",cancel:"",complete_payment:"",total_amount_to_pay:"",choose_payment_method:"",processing:"...",pay_with_card:"",pay_with_cash:"",pay_with_bank:"",payment_successful:"!",in_stock_count:" {count} ",product_details:"",category:"",available_variants:"/",size:"",sku:"SKU",walk_in_price:"",contractor_price:"",status:"",close:"",out_of_stock:"",low_stock:"",in_stock:"",delete:"",delete_product_confirm_message:' "{productName}"? ',undo_consolidation_title:"",undo_consolidation_confirm_message:" {invoiceId}? ",undo_consolidation:"",import_success_bills_and_suppliers:" {billCount}  {supplierCount} ",import_success_bills_only:" {billCount} ",password_update_success:"",force_password_change_success_desc:" ",past_invoice_import_success:" {count} ",role_ceo:"",role_admin:"",role_account_manager:"",role_store_manager:"",role_store_staff:"",role_pos_operator:"",dashboard_management:"",category_management:"",inventory_management:"",search_or_scan_barcode_placeholder:", SKU, ...",scan:"",all_statuses:"",export:"",import:"",add_by_scan:"",add_product:"",product:"",total_stock:"",variants:"",actions:"",view_details_tooltip:"",edit_product_tooltip:"",delete_product_tooltip:"",inventory_empty_message:"  <b></b>  <b></b>  Excel",missing_information:"",add_product_validation1:":  (), , ",add_product_validation2:" SKU, ,  ",invalid_variant:"",main_category:"",select_main_category:"",sub_category:"",select_sub_category:"",category_helper_title:"",description:"",example_products:"",cost_price:"",edit:"",delete_user_title:"",delete_user_confirm_message:' "{userName}"?',reset_password_confirm_title:"",reset_password_confirm_message:' "{userName}"?',reset_password:"",add_new_user:"",full_name:"-",roles:"",payroll_info:"",payroll_info_desc:"",salary:" / ",wage_type:"",wage_type_monthly:"",wage_type_daily:"",add_user_validation:"",edit_user_validation:", , ",suppliers_overview:"",search_suppliers_placeholder:", , ...",add_new_supplier:"",contact_person:"",email:"",phone:"",address:"",add_supplier_validation:", , ",scan_barcode:"",print:"",vat_invoice_requires_details_alert:"",cart_is_empty_alert:" ",outsourced:"",outstanding_balance:"",add_balance_to_order:"",misc_item:"",transportation_fee:"",manual:"",by_distance:"",distance_km:" (.)",rate_per_km:" .",grand_total:"",create_invoice:"",payment_card:"",payment_cash:"",payment_bank_transfer:"",view_report:"",close_shift:"",sales_by_payment_method:"",top_selling_items:"",close_shift_confirm_title:"?",close_shift_confirm_message:" ",tax_id:"",receipt:"",receipt_id:"",date:"",operator:"",item:"",qty:"",price:"",receipt_footer_line1:"!",receipt_footer_line2:"",bill_to:"",consolidates_invoices:"",customer_management:"",search_customer_placeholder:", , ...",type:"",add_new_customer:"",add_customer_validation:"",customer_assist_desc:"",search_by_name_sku_barcode_placeholder:", SKU, ...",order_management:"",search_order_id_or_customer:"...",fulfillment:"",payment:"",order_id:"",mark_as_paid:"",bill_customer:"",print_pdf:"/PDF",items_to_prepare:"",delivery_pickup_info:"/",paid_via:"",confirm_payment:"",total_amount_for_order:"",select_payment_method:"",payment_received_in_cash:"",payment_confirmed_via_transfer:"",payment_processed_with_card:"",delivery_note_pickup_slip:" / ",shipping_address:"",product_description:"",quantity:"",received_by:"",customer_signature:"",delivered_by:"",staff_signature:"",sales_and_invoices:"",sales_history_desc:", , ",search_sales_history_placeholder:" ID, , ...",amount_paid:"",balance_due:"",receive_payment:"",view_attached_invoice:"",view_receipt:"",delete_transaction:"",paid:"",partially_paid:"",consolidated:"",overdue:"",unpaid:"",delete_transaction_title:"",delete_transaction_confirm_message:" {transactionId}? ",user_activity_log:"",activity_log_desc:"",search_by_user_name:"...",export_to_excel:" Excel",user:"",action:"",timestamp:"",no_activity_found:"",no_activity_matching_search:"",import_and_update_products:"",click_to_upload:"",or_drag_and_drop:"",xlsx_or_csv_file:" XLSX  CSV",download_example_file:"",import_summary_for:"",new_products_will_be_created:"",existing_variants_will_be_updated:" SKU",rows_will_be_skipped:"{count} ",errors_found:":",confirm_import:"",password_update_error_mismatch:"",password_update_error_too_short:" 6 ",password_update_error_incorrect:"",password_update_error_db:"",password_update_error_not_logged_in:"",save:"",shift_history:"",search_by_id_or_user:" ID ...",shift_id:"ID ",start_time:"",end_time:"",closed_by:"",no_shifts_found:"",no_shifts_desc:"",shift_report:"",print_report:"",import_customers:"",new_customers_will_be_created:"",import_suppliers:"",new_suppliers_will_be_created:"",default_delivery_rate:"",please_sign_in:"",username_placeholder:"",password_placeholder:"",sign_in:"",force_password_change_title:"",force_password_change_desc:" ",new_password:"",confirm_new_password:"",update_password:"",set_due_date:"",due_date:"",confirm:"",record_payment:"",bills:"",search_invoice_or_supplier:"",import_bills:"",add_bill:"",clear_filter:"()",invoice_number:"",record_past_invoice:"",record_past_invoice_desc:"",original_invoice_id:"",original_invoice_date:"",total_invoice_amount:"",amount_already_paid:"",import_past_invoices:"",import_past_invoices_desc:" Excel",ceo_todo_list:" (CEO)",add_task:"...",mark_as_incomplete:"",mark_as_complete:"",postpone:"",no_tasks:" !",sales_performance:"",sales_today:"",sales_month:"",sales_year:"",ar_new:"",daily_expenses:"",wages_today:" ()",overdue_amount:"",outsource_purchase:"",cost_from_supplier:"",markup_percentage:"",new_selling_price:"",add_to_cart:"",add_misc_item:"",add_misc_item_desc:"",item_description:"",selling_price:"",no_low_stock_items:"",bill_status_paid:"",bill_status_overdue:"",bill_status_due:"",payment_cheque:"",reference_note:" / ",amount_to_pay:"",payment_status_unpaid:"",payment_status_paid:"",payment_status_partially_paid:"",payment_status_refunded:"",payment_status_consolidated:"",fulfillment_status_pending:"Pending",fulfillment_status_processing:"",fulfillment_status_ready_for_pickup:"",fulfillment_status_completed:"",fulfillment_status_cancelled:"",bill_customer_confirm_title:"?",bill_customer_confirm_message:" {orderId}   ",confirm_and_bill:"",no_transactions_found:"",system_users:"",no_suppliers_found:"",delete_supplier_title:"",delete_supplier_confirm_message:" {supplierName}?",no_customers_found:"",try_adjusting_search_or_add_customer:"",delete_customer_title:"",delete_customer_confirm_message:" {customerName}?",delivery_requires_details_alert:"",no_bills_found:"",delete_bill_title:"",delete_bill_message:" #{invoiceNumber}?",total_owed:"",overdue_bills:"",due_in_days:" {days} ",import_bills_desc:" Excel  ",bills_to_create:" {count} ",new_suppliers_to_create:" {count} ",profit_margin:" (%)",avg_transaction:"",save_changes:"",bill_date:"",attach_invoice:"",add_bill_validation:"",sales_overview:"Sales Overview",sales_this_month:"This Month's Sales",inventory_overview:"Inventory Overview",total_skus:"Total SKUs",out_of_stock_skus:"Out of Stock SKUs",low_stock_items:"Low Stock Items",view_all_inventory:"View All Inventory",widget_sales_overview:"Sales Overview",widget_accounts_payable:"Accounts Payable",widget_inventory_overview:"Inventory Overview",widget_low_stock_list:"Low Stock List",due_today:"",undo_consolidation_success:" ",product_not_found:"",product_not_found_alert:' "{code}" ',total_sales:"Total Sales",transactions:"Transactions",total_profit:"Total Profit",customer:"Customer",payment_method:"Payment Method",name:"Name",edit_customer:"Edit Customer",delete_customer:"Delete Customer",notes:"Notes",no_orders_found:"No Orders Found",try_adjusting_filters:"Try adjusting your search or filters.",order_details:"Order Details",items_in_order:"Items in Order",delivery_note:"Delivery Note",pickup_note:"Pickup Note",no_sales_matching_search:"No sales records match your search criteria.",payment_amount:"Payment Amount",amount:"Amount",payment_date:"Payment Date",total_receivables:"Total Receivables",show_all_invoices:"Show All Invoices",group_by_customer:"Group by Customer",create_consolidated_invoice:"Create Consolidated Invoice",consolidated_invoice:"Consolidated Invoice",daily_sales_overview:"Daily Sales Overview",total_sales_today:"Total Sales Today",cash_sales:"Cash Sales",card_sales:"Card Sales",bank_transfer_sales:"Bank Transfer Sales",new_accounts_receivable:"New Accounts Receivable",pay_later:"Pay Later",pay_now:"Pay Now",no_items_sold_yet:"",end_of_day_summary_desc:"",shift_start_time:""}},Dd=e=>x.useMemo(()=>function(r,n={}){let a=(km[e]||km.en)[r]||r;for(const o in n){const l=new RegExp(`{${o}}`,"g");a=a.replace(l,String(n[o]))}return a},[e]),mg=({isOpen:e,onClose:t,transaction:r,storeSettings:n,t:s,language:a})=>{const[o,l]=x.useState(a),d=Dd(o);if(x.useEffect(()=>{e&&l(a)},[e,a]),!e||!r)return null;const u=()=>{const h=document.getElementById("receipt-to-print");if(!h)return;const m=window.open("","_blank");if(!m){alert("Please allow pop-ups to print the receipt.");return}const y=document.querySelector('script[src="https://cdn.tailwindcss.com"]'),v=Array.from(document.querySelectorAll("script")).find(k=>{var w;return(w=k.textContent)==null?void 0:w.includes("tailwind.config")}),b=Array.from(document.querySelectorAll("style"));m.document.write("<html><head><title>Print Receipt</title>"),y&&m.document.write(y.outerHTML),v&&m.document.write(`<script>${v.innerHTML}<\/script>`),b.forEach(k=>m.document.write(`<style>${k.innerHTML}</style>`)),m.document.write('</head><body class="bg-white">'),m.document.write(h.outerHTML),m.document.write("</body></html>"),m.document.close(),setTimeout(()=>{m.focus(),m.print(),m.close()},500)},p=h=>{const m=`payment_${h.toLowerCase().replace(/\s/g,"_")}`;return d(m)};return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center no-print","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-sm m-4",onClick:h=>h.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Transaction Receipt"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-4 border-b",children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Receipt Language"}),c("div",{className:"flex gap-2",children:[i("button",{onClick:()=>l("en"),className:`px-4 py-1 text-sm rounded-md transition-colors ${o==="en"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"English"}),i("button",{onClick:()=>l("th"),className:`px-4 py-1 text-sm rounded-md transition-colors ${o==="th"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]}),i("div",{className:"p-2 max-h-[60vh] overflow-y-auto",children:c("div",{id:"receipt-to-print",className:"bg-white text-black p-4 w-full mx-auto text-sm leading-relaxed font-sans",children:[c("div",{className:"text-center font-sans",children:[i("h1",{className:"text-2xl font-bold",children:n==null?void 0:n.store_name[o]}),i("p",{children:n==null?void 0:n.address[o]}),c("p",{children:["Tel: ",n==null?void 0:n.phone[o]]}),c("p",{className:"mt-2 text-xs",children:[d("tax_id"),": ",n==null?void 0:n.tax_id[o]]}),i("p",{className:"font-bold my-2 text-lg",children:d("receipt")})]}),c("div",{className:"border-t border-b border-dashed border-black my-2 py-1 text-xs font-sans",children:[c("p",{children:[d("receipt_id"),": ",i("span",{className:"font-mono",children:r.id})]}),c("p",{children:[d("date"),": ",new Date(r.date).toLocaleString()]}),c("p",{children:[d("operator"),": ",r.operator]}),c("p",{children:[d("customer"),": ",r.customerName]})]}),c("table",{className:"w-full text-sm font-sans",children:[i("thead",{children:c("tr",{className:"border-b border-dashed border-black",children:[i("th",{className:"text-left py-1",children:d("item")}),i("th",{className:"text-center py-1",children:d("qty")}),i("th",{className:"text-right py-1",children:d("price")}),i("th",{className:"text-right py-1",children:d("total")})]})}),i("tbody",{children:r.items.map(h=>{const m=r.customerType==="government"?h.price.government:r.customerType==="contractor"?h.price.contractor:h.price.walkIn;return c("tr",{children:[c("td",{className:"align-top",children:[h.name[o]," (",h.size,")"]}),i("td",{className:"text-center align-top",children:h.quantity}),i("td",{className:"text-right align-top",children:m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),i("td",{className:"text-right align-top",children:(m*h.quantity).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},h.variantId)})})]}),c("div",{className:"border-t border-dashed border-black mt-2 pt-1 font-sans",children:[c("div",{className:"flex justify-between",children:[c("span",{children:[d("subtotal"),":"]}),i("span",{children:r.subtotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),c("div",{className:"flex justify-between",children:[c("span",{children:[d("tax_7"),":"]}),i("span",{children:r.tax.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),r.appliedStoreCredit&&c("div",{className:"flex justify-between",children:[c("span",{children:[d("store_credit"),":"]}),c("span",{children:["-",r.appliedStoreCredit.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"flex justify-between font-bold text-lg mt-1",children:[c("span",{children:[d("total"),":"]}),c("span",{children:["",r.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),i("div",{className:"border-t border-dashed border-black mt-2 pt-1 text-xs font-sans",children:c("p",{children:[d("payment_method"),": ",p(r.paymentMethod)]})}),c("div",{className:"text-center text-xs mt-4 font-sans",children:[i("p",{children:d("receipt_footer_line1")}),i("p",{children:d("receipt_footer_line2")})]})]})}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[c("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm-text-sm",onClick:u,children:[i(xs,{className:"h-5 w-5 mr-2"})," ",s("print")]}),i("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:t,children:s("close")})]})]})})},yb=({isOpen:e,onClose:t,product:r,onSelectVariant:n,t:s,language:a})=>!e||!r?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-lg m-4",onClick:o=>o.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold text-text-primary",children:[s("select_size_for"),' "',r.name[a],'"']}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:r.variants.length>0?i("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.variants.map(o=>c("button",{onClick:()=>n(r,o),className:`text-left p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors ${o.stock>0?"hover:border-primary hover:bg-blue-50":"bg-gray-100 opacity-80 hover:border-secondary hover:bg-orange-50"}`,children:[i("p",{className:"font-bold text-lg text-text-primary",children:o.size}),i("p",{className:`text-sm ${o.stock>0?"text-text-secondary":"text-red-600 font-semibold"}`,children:o.stock>0?`${s("stock")}: ${o.stock}`:s("out_of_stock")}),c("p",{className:"text-md font-semibold text-primary mt-2",children:["",o.price.walkIn.toFixed(2)]})]},o.id))}):i("p",{className:"text-center text-text-secondary",children:s("product_out_of_stock_all_sizes")})}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:w-auto sm:text-sm",children:s("cancel")})})]})}),vb=({isOpen:e,onClose:t,onConfirm:r,t:n})=>{const[s,a]=x.useState("");if(x.useEffect(()=>{if(e){const l=new Date;l.setDate(l.getDate()+30),a(l.toISOString().split("T")[0])}},[e]),!e)return null;const o=()=>{r(s)};return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-sm m-4",onClick:l=>l.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:n("set_due_date")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6",children:[i("label",{htmlFor:"due-date",className:"block text-sm font-medium text-text-secondary mb-2",children:n("due_date")}),c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(pa,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"date",id:"due-date",value:s,onChange:l=>a(l.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md bg-background"})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",onClick:o,children:n("confirm")}),i("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm",onClick:t,children:n("cancel")})]})]})})},xb=({isOpen:e,onClose:t,onConfirm:r,product:n,variant:s,storeSettings:a,t:o,language:l})=>{const[d,u]=x.useState(""),[p,h]=x.useState((a==null?void 0:a.default_outsource_markup)??20),[m,y]=x.useState("");x.useEffect(()=>{e&&(u(""),h((a==null?void 0:a.default_outsource_markup)??20),y(""))},[e,a]),x.useEffect(()=>{if(typeof d=="number"&&typeof p=="number"){const b=d*(1+p/100);y(Math.ceil(b))}else y("")},[d,p]);const v=()=>{if(!n||!s)return;if(typeof d!="number"||d<=0||typeof m!="number"||m<=0){alert("Please enter valid cost and selling price.");return}const b={productId:n.id,variantId:s.id,name:n.name,size:s.size,imageUrl:n.imageUrl,sku:s.sku,quantity:1,stock:1,price:{cost:d,walkIn:m,contractor:m,government:m},isOutsourced:!0,outsourcedCost:d};r(b)};return!e||!n||!s?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:b=>b.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:o("outsource_purchase")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 space-y-4",children:[c("div",{className:"flex items-center gap-4 p-3 bg-background rounded-lg",children:[i("img",{src:n.imageUrl,alt:n.name[l],className:"h-16 w-16 rounded-md object-cover"}),c("div",{children:[i("p",{className:"font-bold",children:n.name[l]}),c("p",{className:"text-sm text-text-secondary",children:[s.size," (SKU: ",s.sku,")"]})]})]}),c("div",{children:[c("label",{htmlFor:"cost",className:"block text-sm font-medium text-text-secondary",children:[o("cost_from_supplier")," ()"]}),i("input",{type:"number",id:"cost",value:d,onChange:b=>u(b.target.value===""?"":Number(b.target.value)),className:"mt-1 block w-full rounded-md p-2 border-gray-300 text-lg",autoFocus:!0,required:!0})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[c("label",{htmlFor:"markup",className:"block text-sm font-medium text-text-secondary",children:[o("markup_percentage")," (%)"]}),i("input",{type:"number",id:"markup",value:p,onChange:b=>h(b.target.value===""?"":Number(b.target.value)),className:"mt-1 block w-full rounded-md p-2 border-gray-300"})]}),c("div",{children:[c("label",{htmlFor:"selling-price",className:"block text-sm font-medium text-text-secondary",children:[o("new_selling_price")," ()"]}),i("input",{type:"number",id:"selling-price",value:m,onChange:b=>y(b.target.value===""?"":Number(b.target.value)),className:"mt-1 block w-full rounded-md p-2 border-gray-300 font-bold",required:!0})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 disabled:bg-blue-300",onClick:v,disabled:!d||!m,children:o("add_to_cart")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:o("cancel")})]})]})})},wb=({isOpen:e,onClose:t,onConfirm:r,t:n,language:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState(""),[u,p]=x.useState(""),[h,m]=x.useState(1);x.useEffect(()=>{e&&(o(""),d(""),p(""),m(1))},[e]);const y=b=>k=>{const{value:w}=k.target;(w===""||/^\d*\.?\d*$/.test(w))&&b(w)},v=b=>{b.preventDefault();const k=parseFloat(l),w=parseFloat(u),f=typeof h=="number"?h:parseInt(String(h),10);if(!a||isNaN(k)||k<0||isNaN(w)||w<0||isNaN(f)||f<=0)return;const g={productId:"MISC_ITEM",variantId:`misc-${Date.now()}`,name:{en:a,th:a},size:"",imageUrl:"https://picsum.photos/seed/misc/100/100",sku:"MISC",quantity:f,stock:f,price:{cost:k,walkIn:w,contractor:w,government:w},isOutsourced:!0,outsourcedCost:k};r(g)};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:b=>b.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:n("add_misc_item")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("p",{className:"px-6 pt-4 text-sm text-text-secondary",children:n("add_misc_item_desc")}),c("form",{onSubmit:v,children:[c("div",{className:"p-6 space-y-4",children:[c("div",{children:[i("label",{htmlFor:"misc-desc",className:"block text-sm font-medium text-text-secondary",children:n("item_description")}),i("input",{type:"text",id:"misc-desc",value:a,onChange:b=>o(b.target.value),className:"mt-1 block w-full rounded-md p-2 border-gray-300",autoFocus:!0,required:!0})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[c("label",{htmlFor:"misc-cost",className:"block text-sm font-medium text-text-secondary",children:[n("cost_price")," ()"]}),i("input",{type:"text",inputMode:"decimal",id:"misc-cost",value:l,onChange:y(d),className:"mt-1 block w-full rounded-md p-2 border-gray-300",required:!0,placeholder:"0.00"})]}),c("div",{children:[c("label",{htmlFor:"misc-price",className:"block text-sm font-medium text-text-secondary",children:[n("selling_price")," ()"]}),i("input",{type:"text",inputMode:"decimal",id:"misc-price",value:u,onChange:y(p),className:"mt-1 block w-full rounded-md p-2 border-gray-300",required:!0,placeholder:"0.00"})]})]}),c("div",{children:[i("label",{htmlFor:"misc-qty",className:"block text-sm font-medium text-text-secondary",children:n("quantity")}),i("input",{type:"number",id:"misc-qty",value:h,onChange:b=>m(b.target.value===""?"":Number(b.target.value)),className:"mt-1 block w-full rounded-md p-2 border-gray-300",required:!0,min:"1",step:"1"})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 disabled:bg-blue-300",disabled:!a||l===""||u===""||h===""||Number(h)<=0,children:n("add_to_cart")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:n("cancel")})]})]})]})}):null},Nm=.07,bb=({products:e,currentUser:t,customers:r,storeCredits:n,transactions:s,onNewTransaction:a,onNewInvoice:o,onNewOrder:l,onAddNewCustomerFromPOS:d,openScanner:u,posScannedCode:p,setPosScannedCode:h,showAlert:m,storeSettings:y,onProductMouseEnter:v,onProductMouseLeave:b,t:k,language:w})=>{var ks,Ns;const[f,g]=x.useState([]),[_,E]=x.useState(void 0),[S,O]=x.useState("Guest"),[C,P]=x.useState(""),[N,I]=x.useState(""),[A,T]=x.useState(((ks=t.settings)==null?void 0:ks.defaultCustomerType)||"walkIn"),[R,$]=x.useState(!1),[J,ne]=x.useState("In-Store"),[D,L]=x.useState(!0),[j,te]=x.useState(null),[Z,U]=x.useState(0),[V,de]=x.useState(0),[ge,Ce]=x.useState(!1),[nt,st]=x.useState(!1),[Je,je]=x.useState(!1),[He,kt]=x.useState(!1),[Nt,dt]=x.useState(null),[qt,Fe]=x.useState(null),[Ft,Xe]=x.useState(null),[St,at]=x.useState(!1),[ut,Ct]=x.useState(null),[z,X]=x.useState(!1),fe=x.useMemo(()=>_?s.filter(W=>W.customerId===_&&(W.payment_status===ie.UNPAID||W.payment_status===ie.PARTIALLY_PAID)).reduce((W,G)=>W+(G.total-G.paid_amount),0):0,[_,s]),B=W=>{g(G=>[...G,W]),at(!1),Ct(null)},we=W=>{g(G=>[...G,W]),X(!1)},Ke=x.useCallback((W,G)=>{G.stock>0?g(ee=>{const ye=ee.find(Et=>Et.variantId===G.id);if(ye)return ye.quantity<G.stock?ee.map(Et=>Et.variantId===G.id?{...Et,quantity:Et.quantity+1}:Et):ee;const Ht={productId:W.id,variantId:G.id,name:W.name,size:G.size,imageUrl:W.imageUrl,sku:G.sku,quantity:1,stock:G.stock,price:G.price};return[...ee,Ht]}):(Ct({product:W,variant:G}),at(!0)),je(!1),Fe(null)},[]),mt=x.useCallback(W=>{const G=W.variants.some(ee=>ee.stock>0);W.variants.length===1?Ke(W,W.variants[0]):(Fe(W),je(!0))},[Ke]),ir=x.useCallback((W,G)=>{g(ee=>G<=0?ee.filter(ye=>ye.variantId!==W):ee.map(ye=>{if(ye.variantId===W){const Ht=ye.isOutsourced?G:Math.min(G,ye.stock);return{...ye,quantity:Ht}}return ye}))},[]),Pr=x.useCallback(W=>{g(G=>G.filter(ee=>ee.variantId!==W))},[]),q=x.useCallback(()=>{var W;g([]),O("Guest"),P(""),I(""),T(((W=t.settings)==null?void 0:W.defaultCustomerType)||"walkIn"),E(void 0),L(!0),te(null),ne("In-Store"),U(0),de(0),$(!1)},[(Ns=t.settings)==null?void 0:Ns.defaultCustomerType]),se=W=>{E(W.id),O(W.name),P(W.address||""),I(W.phone||""),gr(W.type),$(!1)},Tr=()=>{if(!S||S.trim().toLowerCase()==="guest"||S.trim()===""){O("Guest"),E(void 0),$(!1);return}const W=S.trim();if(_){const ee=r.find(ye=>ye.id===_);if(ee&&ee.name.toLowerCase()===W.toLowerCase())return}const G=r.find(ee=>ee.name.toLowerCase()===W.toLowerCase());G?se(G):($(!0),E(void 0),P(""),I(""))},On=W=>{var ee;O(W),$(!1);const G=r.find(ye=>ye.id===_);G&&G.name!==W&&(E(void 0),P(""),I(""),gr(((ee=t.settings)==null?void 0:ee.defaultCustomerType)||"walkIn"))},gr=W=>{T(W),W==="government"&&L(!0)},{subtotal:Or,tax:rn,total:nn,originalTotal:No}=x.useMemo(()=>{let W=0,G=0,ee=0;A==="government"?(ee=f.reduce((Et,Ar)=>{const Ss=Ar.price.government;return Et+Ss*Ar.quantity},0),W=ee/(1+Nm),G=ee-W):(W=f.reduce((Et,Ar)=>{const Ss=A==="contractor"?Ar.price.contractor:Ar.price.walkIn;return Et+Ss*Ar.quantity},0),D&&(G=W*Nm),ee=W+G),ee+=Z,ee+=V;const ye=ee,Ht=ee-(j?j.amount:0);return{subtotal:W,tax:G,total:Ht,originalTotal:ye}},[f,A,D,j,Z,V]),Vd=W=>{if(!W)return te(null),{success:!0,message:"Credit removed."};const G=n.find(ee=>ee.id.toLowerCase()===W.toLowerCase().trim()&&!ee.isUsed);return G?No>=G.amount?(te(G),{success:!0,message:`Credit of ${G.amount.toFixed(2)} applied.`}):(te(null),{success:!1,message:`Order total must be at least ${G.amount.toFixed(2)}.`}):{success:!1,message:"Invalid or used store credit code."}},Ca=()=>{if(D&&(!(C!=null&&C.trim())||!(N!=null&&N.trim()))){m(k("missing_information"),k("vat_invoice_requires_details_alert"));return}if(f.length===0&&Z===0){m(k("cart_is_empty"),k("cart_empty_desc"));return}Ce(!0)},So=async()=>{if(f.length===0){m(k("cart_is_empty"),k("cart_empty_desc"));return}if(A==="walkIn"){m("Invalid Customer Type","Invoices can only be created for Contractors, Government, or Organization customers.");return}let W={id:_,name:S,type:A,address:C,phone:N};if(R&&S.trim()&&S.trim().toLowerCase()!=="guest"){const ee=await d({name:S.trim(),type:A,address:C,phone:N});if(!ee){m("Customer Creation Failed","Could not save the new customer. The invoice has not been created.");return}W=ee}const G={id:`${Date.now()}${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`,date:new Date().toISOString(),items:f,subtotal:Or,tax:rn,total:nn,customerId:W.id,customerName:W.name||"Guest",customerAddress:W.address,customerPhone:W.phone,customerType:A,operator:t.name,vatIncluded:D,appliedStoreCredit:j?{id:j.id,amount:j.amount}:void 0};V>0&&(G.transportationFee=V),dt(G),kt(!0)},Co=W=>{if(!Nt)return;const G={...Nt,due_date:W};o(G,f),kt(!1),dt(null),q(),m("Invoice Created",`Invoice ${G.id} has been created successfully.`)},Ir=async()=>{if(f.length===0){m(k("cart_is_empty"),k("cart_empty_desc"));return}if(!(C!=null&&C.trim())||!(N!=null&&N.trim())){m(k("missing_information"),k("delivery_requires_details_alert"));return}let W;if(R&&S.trim()&&S.trim().toLowerCase()!=="guest"){const ee=await d({name:S.trim(),type:A,address:C,phone:N});if(!ee){m("Customer Creation Failed","Could not save the new customer. The order was not created.");return}W=ee}else W=r.find(ee=>ee.id===_)||{id:`guest-${Date.now()}`,name:S,type:A,phone:N,address:C};const G={id:`ORD-${Date.now()}`,customer:W,date:new Date().toISOString(),items:f,total:nn,status:er.PROCESSING,type:"Delivery",address:C,paymentStatus:ie.UNPAID};V>0&&(G.transportationFee=V),l(G),m("Order Created",`Unpaid order ${G.id} created for ${S}.`),q()},Ea=async W=>{Ce(!1);let G={id:_,name:S,type:A,address:C,phone:N};if(R&&S.trim()&&S.trim().toLowerCase()!=="guest"){const ee=await d({name:S.trim(),type:A,address:C,phone:N});if(!ee){m("Customer Creation Failed","Could not save the new customer. The transaction has been cancelled.");return}G=ee}if(J==="In-Store"){let ee=f;Z>0&&(ee=[...f,{productId:"BALANCE_FORWARD",variantId:"BALANCE_FORWARD",name:{en:"Previous Balance Forwarded",th:""},size:"",imageUrl:"",sku:"BALANCE",quantity:1,stock:1,price:{walkIn:Z,contractor:Z,government:Z,cost:Z}}]);const ye={id:`${Date.now()}${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`,date:new Date().toISOString(),items:ee,subtotal:Or,tax:rn,total:nn,customerId:G.id,customerName:G.name||"Guest",customerAddress:G.address,customerPhone:G.phone,customerType:A,operator:t.name,paymentMethod:W,vatIncluded:D,appliedStoreCredit:j?{id:j.id,amount:j.amount}:void 0};V>0&&(ye.transportationFee=V);const Ht=await a(ye,f,j==null?void 0:j.id,Z>0&&G.id?{customerId:G.id,amount:Z}:void 0);Ht&&(Xe(Ht),st(!0),q())}else{const ee={id:`ORD-${Date.now()}`,customer:G,date:new Date().toISOString(),items:f,total:nn,transportationFee:V>0?V:void 0,status:J==="Delivery"?er.PROCESSING:er.PENDING,type:J,address:C,paymentStatus:ie.PAID,paymentMethod:W};l(ee),m("Paid Order Created",`Order ${ee.id} has been created and marked as paid.`),q()}};return x.useEffect(()=>{p&&((G=>{const ee=e.flatMap(ye=>ye.variants.map(Ht=>({product:ye,variant:Ht}))).find(ye=>ye.variant.barcode===G);ee?mt(ee.product):m(k("product_not_found"),k("product_not_found_alert",{code:G}))})(p),h(null))},[p,h,e,mt,m,k]),c("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[i(pb,{products:e,onProductSelect:mt,onScanClick:()=>u(W=>h(W)),onProductMouseEnter:v,onProductMouseLeave:b,t:k,language:w}),i(fb,{cartItems:f,customers:r,onUpdateQuantity:ir,onRemoveItem:Pr,onClearCart:q,subtotal:Or,tax:rn,total:nn,onCheckout:Ca,onCreateInvoice:So,customerName:S,onCustomerNameChange:On,onCustomerInputBlur:Tr,customerAddress:C,onCustomerAddressChange:P,customerPhone:N,onCustomerPhoneChange:I,onSelectCustomer:se,customerType:A,onCustomerTypeChange:gr,isVatIncluded:D,onVatToggle:L,appliedCredit:j,onApplyCredit:Vd,orderType:J,onOrderTypeChange:ne,products:e,onNewUnpaidOrder:Ir,customerOutstandingBalance:fe,carriedForwardBalance:Z,onCarryForwardBalance:U,onAddMiscItemClick:()=>X(!0),transportationFee:V,setTransportationFee:de,storeSettings:y,t:k,language:w}),i(gb,{isOpen:ge,onClose:()=>Ce(!1),onPaymentSuccess:Ea,totalAmount:nn,currentUser:t,t:k}),i(mg,{isOpen:nt,onClose:()=>st(!1),transaction:Ft,storeSettings:y,t:k,language:w}),i(yb,{isOpen:Je,onClose:()=>je(!1),product:qt,onSelectVariant:Ke,t:k,language:w}),i(vb,{isOpen:He,onClose:()=>kt(!1),onConfirm:Co,t:k}),i(xb,{isOpen:St,onClose:()=>at(!1),onConfirm:B,product:(ut==null?void 0:ut.product)||null,variant:(ut==null?void 0:ut.variant)||null,storeSettings:y,t:k,language:w}),i(wb,{isOpen:z,onClose:()=>X(!1),onConfirm:we,t:k,language:w})]})},_b=({isOpen:e,onClose:t,credit:r})=>!e||!r?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:n=>n.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Store Credit Issued"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 text-center",children:[i(bo,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),i("p",{className:"text-text-secondary",children:"Store credit has been successfully created."}),c("p",{className:"text-3xl font-bold text-primary my-2",children:["",r.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("div",{className:"text-left mt-6 border-t pt-4",children:[i("h4",{className:"font-semibold text-text-primary mb-2",children:"Credit Details:"}),c("div",{className:"bg-background p-3 rounded-md text-center",children:[i("p",{className:"text-sm text-text-secondary",children:"Code:"}),i("p",{className:"font-mono text-lg font-semibold text-primary tracking-wider",children:r.id})]}),i("p",{className:"text-xs text-text-secondary mt-2 text-center",children:"Please provide this code to the customer."})]})]}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:w-auto sm:text-sm",onClick:t,children:"Done"})})]})}),Sm=(e,t)=>t==="government"?e.price.government:t==="contractor"||t==="organization"?e.price.contractor:e.price.walkIn,kb=({transactions:e,products:t,onProcessReturn:r,t:n,language:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState(null),[u,p]=x.useState(new Map),[h,m]=x.useState(null),y=f=>{f.preventDefault();const g=e.find(_=>_.id.toLowerCase()===a.toLowerCase().trim());d(g||"not_found"),p(new Map)},v=(f,g,_)=>{p(E=>{const S=new Map(E),O=S.get(f);let C;_?C=_:O?C=O.reason:C=vi.CUSTOMER_CHOICE;const P={quantity:g,reason:C};return P.quantity>0?S.set(f,P):S.delete(f),S})},b=x.useMemo(()=>!l||l==="not_found"?0:Array.from(u.entries()).reduce((f,[g,{quantity:_}])=>{const E=l.items.find(A=>A.variantId===g);if(!E)return f;const S=Sm(E,l.customerType),O=E.quantity*S,C=l.subtotal>0?O/l.subtotal:0,P=(l.tax||0)*C,N=O+P,I=E.quantity>0?N/E.quantity:0;return f+_*I},0),[u,l]),k=async()=>{if(!l||l==="not_found"||u.size===0)return;const f=Array.from(u.entries()).map(([_,{quantity:E,reason:S}])=>{const O=l.items.find(R=>R.variantId===_),C=Sm(O,l.customerType),P=O.quantity*C,N=l.subtotal>0?P/l.subtotal:0,I=(l.tax||0)*N,A=P+I,T=O.quantity>0?A/O.quantity:0;return{productId:O.productId,variantId:_,name:O.name,size:O.size,quantity:E,reason:S,unitPrice:T}}),g=await r(l.id,f,b);m(g),d(null),o(""),p(new Map)};return c("div",{className:"max-w-4xl mx-auto",children:[c("div",{className:"bg-surface rounded-lg shadow p-6",children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:"Process a Return"}),i("p",{className:"text-text-secondary mt-1",children:"Enter a transaction ID to issue store credit for returned items."}),c("form",{onSubmit:y,className:"mt-4 flex gap-2",children:[i("input",{type:"text",value:a,onChange:f=>o(f.target.value),placeholder:"Enter Transaction ID...",className:"flex-grow block w-full px-4 py-2 border border-gray-300 rounded-md bg-background focus:ring-primary focus:border-primary",required:!0}),c("button",{type:"submit",className:"flex items-center gap-2 bg-primary text-white font-medium px-4 py-2 rounded-md hover:bg-blue-800",children:[i(ar,{className:"h-5 w-5"}),"Find"]})]})]}),(()=>l?l==="not_found"?c("div",{className:"text-center p-8 bg-surface rounded-lg shadow mt-6",children:[i(bf,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),i("h3",{className:"text-xl font-semibold text-text-primary",children:"Transaction Not Found"}),i("p",{className:"text-text-secondary mt-2",children:"Please check the ID and try again."})]}):c("div",{className:"mt-6 bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Transaction Details"}),c("div",{className:"text-sm text-text-secondary grid grid-cols-2 gap-x-4 gap-y-1 mt-2",children:[c("p",{children:[i("strong",{children:"ID:"})," ",l.id]}),c("p",{children:[i("strong",{children:"Customer:"})," ",l.customerName]}),c("p",{children:[i("strong",{children:"Date:"})," ",new Date(l.date).toLocaleString()]}),c("p",{children:[i("strong",{children:"Total Paid:"})," ",l.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),c("div",{className:"p-4",children:[i("h4",{className:"font-semibold mb-2",children:"Select Items to Return"}),i("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:l.items.map(f=>{var S;const g=((S=l.returnedItems)==null?void 0:S.filter(O=>O.variantId===f.variantId).reduce((O,C)=>O+C.quantity,0))||0,_=f.quantity-g,E=u.get(f.variantId);return _<=0?c("div",{className:"flex items-center gap-4 p-3 bg-gray-100 rounded-md opacity-70",children:[i("img",{src:f.imageUrl,alt:f.name[s],className:"h-12 w-12 rounded object-cover"}),c("div",{className:"flex-grow",children:[c("p",{className:"font-medium text-text-primary",children:[f.name[s]," - ",f.size]}),i("p",{className:"text-sm text-green-600 font-semibold",children:"All items returned"})]})]},f.variantId):c("div",{className:"flex flex-wrap items-center gap-4 p-3 bg-background rounded-md border",children:[i("img",{src:f.imageUrl,alt:f.name[s],className:"h-12 w-12 rounded object-cover"}),c("div",{className:"flex-grow",children:[c("p",{className:"font-medium text-text-primary",children:[f.name[s]," - ",f.size]}),c("p",{className:"text-xs text-text-secondary",children:["Purchased: ",f.quantity," | Returned: ",g]})]}),c("div",{className:"flex items-center gap-2",children:[i("label",{className:"text-sm font-medium",children:"Qty:"}),i("input",{type:"number",min:"0",max:_,value:(E==null?void 0:E.quantity)||0,onChange:O=>v(f.variantId,Math.min(_,parseInt(O.target.value,10)||0)),className:"w-16 p-1 border rounded-md"})]}),c("div",{className:"flex items-center gap-2",children:[i("label",{className:"text-sm font-medium",children:"Reason:"}),i("select",{value:(E==null?void 0:E.reason)||vi.CUSTOMER_CHOICE,onChange:O=>v(f.variantId,(E==null?void 0:E.quantity)||0,O.target.value),className:"p-1 border rounded-md text-sm",children:Object.values(vi).map(O=>i("option",{value:O,children:O},O))})]})]},f.variantId)})})]}),u.size>0&&c("div",{className:"p-4 bg-background border-t",children:[c("div",{className:"flex justify-between items-center text-xl font-bold",children:[i("span",{className:"text-text-primary",children:"Total Return Value:"}),c("span",{className:"text-primary",children:["",b.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),i("button",{onClick:k,className:"w-full mt-4 bg-primary text-white font-bold py-3 rounded-lg hover:bg-blue-800 transition-colors",children:"Issue Store Credit"})]})]}):null)(),i(_b,{isOpen:!!h,onClose:()=>m(null),credit:h})]})},Nb=[{id:"walkIn",name:"Walk-in",key:"walk_in"},{id:"contractor",name:"Contractor",key:"contractor"},{id:"government",name:"Government",key:"government"},{id:"organization",name:"Organization",key:"organization"}],Sb=({isOpen:e,onClose:t,onEditCustomer:r,customer:n,showAlert:s,t:a})=>{const[o,l]=x.useState(""),[d,u]=x.useState("walkIn"),[p,h]=x.useState(""),[m,y]=x.useState("");x.useEffect(()=>{n&&(l(n.name),u(n.type),h(n.phone||""),y(n.address||""))},[n]);const v=b=>{if(b.preventDefault(),!o||!d){s(a("missing_information"),a("add_customer_validation"));return}r({name:o,type:d,phone:p,address:m})};return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:b=>b.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold text-text-primary",children:[a("edit"),' "',n.name,'"']}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:v,children:[c("div",{className:"p-6 space-y-4",children:[c("div",{children:[i("label",{htmlFor:"c-edit-name",className:"block text-sm font-medium text-text-secondary",children:a("customer_name")}),i("input",{type:"text",id:"c-edit-name",value:o,onChange:b=>l(b.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"c-edit-type",className:"block text-sm font-medium text-text-secondary",children:a("customer_type")}),i("select",{id:"c-edit-type",value:d,onChange:b=>u(b.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",children:Nb.map(b=>i("option",{value:b.id,children:a(b.key)},b.id))})]}),c("div",{children:[c("label",{htmlFor:"c-edit-phone",className:"block text-sm font-medium text-text-secondary",children:[a("phone")," (Optional)"]}),i("input",{type:"tel",id:"c-edit-phone",value:p,onChange:b=>h(b.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]}),c("div",{children:[c("label",{htmlFor:"c-edit-address",className:"block text-sm font-medium text-text-secondary",children:[a("address")," (Optional)"]}),i("textarea",{id:"c-edit-address",value:m,onChange:b=>y(b.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:a("save")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:a("cancel")})]})]})]})})},Cb=({customers:e,currentUser:t,onAddCustomerClick:r,onImportCustomersClick:n,onEditCustomer:s,onDeleteCustomer:a,showAlert:o,t:l})=>{var S,O;const[d,u]=x.useState(""),[p,h]=x.useState(null),[m,y]=x.useState(null),v=(S=t.permissions)==null?void 0:S.customers.write,b=(O=t.permissions)==null?void 0:O.customers.delete,k=C=>{switch(C){case"walkIn":return"bg-blue-100 text-blue-800";case"contractor":return"bg-green-100 text-green-800";case"government":return"bg-indigo-100 text-indigo-800";case"organization":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},w=C=>{const P=C.replace(/([A-Z])/g,"_$1").toLowerCase();return l(P)},f=x.useMemo(()=>{const C=d.toLowerCase();return C?e.filter(P=>P.name.toLowerCase().includes(C)||P.phone&&P.phone.toLowerCase().includes(C)||P.address&&P.address.toLowerCase().includes(C)):e},[e,d]),g=()=>{p&&(a(p.id),h(null))},_=C=>{m&&(s(m.id,C),y(null))},E=()=>{const C=f.map(I=>({Name:I.name,Type:I.type,Phone:I.phone||"",Address:I.address||""})),P=XLSX.utils.json_to_sheet(C);P["!cols"]=[{wch:30},{wch:15},{wch:20},{wch:40}];const N=XLSX.utils.book_new();XLSX.utils.book_append_sheet(N,P,"Customers"),XLSX.writeFile(N,"CustomersExport.xlsx")};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:l("customer_management")}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:l("search_customer_placeholder"),value:d,onChange:C=>u(C.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),v&&c(Re,{children:[c("button",{onClick:E,className:"flex items-center gap-2 bg-green-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:[i(Na,{className:"h-5 w-5"}),l("export")]}),c("button",{onClick:n,className:"flex items-center gap-2 bg-blue-500 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:[i(vs,{className:"h-5 w-5"}),l("import")]}),c("button",{onClick:r,className:"flex items-center gap-2 bg-primary text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-800 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),l("add_new_customer")]})]})]})]}),c("div",{className:"overflow-x-auto",children:[c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:l("name")}),i("th",{scope:"col",className:"px-6 py-3",children:l("type")}),i("th",{scope:"col",className:"px-6 py-3",children:l("phone")}),i("th",{scope:"col",className:"px-6 py-3",children:l("address")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("actions")})]})}),i("tbody",{children:f.map(C=>c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium text-gray-900",children:C.name}),i("td",{className:"px-6 py-4",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(C.type)}`,children:w(C.type)})}),i("td",{className:"px-6 py-4",children:C.phone||"N/A"}),i("td",{className:"px-6 py-4 truncate max-w-xs",children:C.address||"N/A"}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center gap-2",children:[i("button",{onClick:()=>y(C),disabled:!v,className:"text-primary hover:text-blue-700 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",title:l("edit_customer"),children:i(Tn,{className:"h-4 w-4"})}),i("button",{onClick:()=>h(C),disabled:!b,className:"text-red-600 hover:text-red-800 p-1 disabled:text-gray-300 disabled:cursor-not-allowed",title:l("delete_customer"),children:i(sr,{className:"h-4 w-4"})})]})})]},C.id))})]}),f.length===0&&c("div",{className:"text-center p-12 text-text-secondary",children:[i(Pd,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:l("no_customers_found")}),i("p",{className:"text-sm mt-1",children:l("try_adjusting_search_or_add_customer")})]})]})]}),m&&i(Sb,{isOpen:!!m,onClose:()=>y(null),onEditCustomer:_,customer:m,showAlert:o,t:l}),p&&i(fr,{isOpen:!!p,onClose:()=>h(null),onConfirm:g,title:l("delete_customer_title"),message:l("delete_customer_confirm_message",{customerName:p.name}),t:l})]})},Eb=[{id:"walkIn",name:"Walk-in",key:"walk_in"},{id:"contractor",name:"Contractor",key:"contractor"},{id:"government",name:"Government",key:"government"},{id:"organization",name:"Organization",key:"organization"}],Pb=({isOpen:e,onClose:t,onAddCustomer:r,showAlert:n,t:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState("walkIn"),[u,p]=x.useState(""),[h,m]=x.useState("");x.useEffect(()=>{e&&(o(""),d("walkIn"),p(""),m(""))},[e]);const y=v=>{if(v.preventDefault(),!a||!l){n(s("missing_information"),s("add_customer_validation"));return}r({name:a,type:l,phone:u,address:h})};return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:v=>v.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:"Add New Customer"}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("form",{onSubmit:y,children:[c("div",{className:"p-6 space-y-4",children:[c("div",{children:[i("label",{htmlFor:"c-name",className:"block text-sm font-medium text-text-secondary",children:s("customer_name")}),i("input",{type:"text",id:"c-name",value:a,onChange:v=>o(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",required:!0})]}),c("div",{children:[i("label",{htmlFor:"c-type",className:"block text-sm font-medium text-text-secondary",children:s("customer_type")}),i("select",{id:"c-type",value:l,onChange:v=>d(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background",children:Eb.map(v=>i("option",{value:v.id,children:s(v.key)},v.id))})]}),c("div",{children:[c("label",{htmlFor:"c-phone",className:"block text-sm font-medium text-text-secondary",children:[s("phone")," (Optional)"]}),i("input",{type:"tel",id:"c-phone",value:u,onChange:v=>p(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]}),c("div",{children:[c("label",{htmlFor:"c-address",className:"block text-sm font-medium text-text-secondary",children:[s("address")," (Optional)"]}),i("textarea",{id:"c-address",value:h,onChange:v=>m(v.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:"Add Customer"}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:s("cancel")})]})]})]})}):null},Tb=({customers:e,currentUser:t,onAddCustomer:r,onEditCustomer:n,onDeleteCustomer:s,onImportCustomersClick:a,showAlert:o,t:l})=>{const[d,u]=x.useState(!1);return c(Re,{children:[i("div",{className:"space-y-6",children:i(Cb,{customers:e,currentUser:t,onAddCustomerClick:()=>u(!0),onImportCustomersClick:a,onEditCustomer:n,onDeleteCustomer:s,showAlert:o,t:l})}),i(Pb,{isOpen:d,onClose:()=>u(!1),onAddCustomer:h=>{r(h),u(!1)},showAlert:o,t:l})]})},Ob=e=>{switch(e){case Me.IN_STOCK:return{bg:"bg-green-100",text:"text-green-800",border:"border-green-500"};case Me.LOW_STOCK:return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-500"};case Me.OUT_OF_STOCK:return{bg:"bg-red-100",text:"text-red-800",border:"border-red-500"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-500"}}},Ib=e=>{if(!e.variants||e.variants.length===0)return Me.OUT_OF_STOCK;const t=e.variants.reduce((r,n)=>r+n.stock,0);return t===0?Me.OUT_OF_STOCK:e.variants.some(r=>r.status===Me.LOW_STOCK)||t<=10?Me.LOW_STOCK:Me.IN_STOCK},Ab=({products:e,onProductMouseEnter:t,onProductMouseLeave:r,t:n,language:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState("All"),[u,p]=x.useState(null),h=x.useMemo(()=>["All",...hr.map(v=>v.key)],[]),m=x.useMemo(()=>{const v=a.toLowerCase();return e.filter(b=>{var E,S,O,C;const k=b.category.split(".")[0],w=l==="All"||k===l,f=qi(b.category),g=`${(E=f.main)==null?void 0:E.name.en} ${(S=f.main)==null?void 0:S.name.th} ${(O=f.sub)==null?void 0:O.name.en} ${(C=f.sub)==null?void 0:C.name.th}`.toLowerCase(),_=!v||Object.values(b.name).some(P=>String(P).toLowerCase().includes(v))||b.variants.some(P=>P.sku.toLowerCase().includes(v)||P.barcode&&P.barcode.toLowerCase().includes(v))||g.includes(v);return w&&_})},[e,a,l,s]),y=v=>{if(v==="All")return n("all");const b=hr.find(k=>k.key===v);return b?b.name[s]:v};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow flex flex-col h-full",children:[c("div",{className:"p-4 border-b",children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:n("customer_assist")}),i("p",{className:"text-text-secondary mt-1",children:n("customer_assist_desc")})]}),i("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:c("div",{className:"flex items-center gap-2 flex-wrap flex-grow",children:[c("div",{className:"relative flex-grow",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:n("search_by_name_sku_barcode_placeholder"),value:a,onChange:v=>o(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),i("select",{value:l,onChange:v=>d(v.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background text-text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",children:h.map(v=>i("option",{value:v,children:y(v)},v))})]})}),i("div",{className:"flex-1 overflow-y-auto p-4",children:m.length>0?i("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:m.map(v=>{var g;const b=Ib(v),k=Ob(b),w=v.variants.reduce((_,E)=>_+E.stock,0),f=((g=v.variants[0])==null?void 0:g.price.walkIn)||0;return c("button",{onClick:()=>p(v),onMouseEnter:_=>t(v,_),onMouseLeave:r,className:`bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow text-left flex flex-col items-center p-2 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 border-b-4 ${k.border}`,children:[i("img",{src:v.imageUrl,alt:v.name[s],className:"h-40 w-full object-cover rounded-t-md"}),c("div",{className:"p-2 flex flex-col flex-grow w-full",children:[i("p",{className:"font-semibold text-sm text-text-primary flex-grow min-h-[40px]",children:v.name[s]}),c("div",{className:"flex justify-between items-center mt-2",children:[i("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${k.bg} ${k.text}`,children:n("in_stock_count",{count:w.toLocaleString()})}),c("p",{className:"font-bold text-base text-primary",children:["",f.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]},v.id)})}):c("div",{className:"text-center py-16 text-text-secondary",children:[i("p",{className:"font-semibold",children:n("no_products_found")}),i("p",{className:"text-sm mt-1",children:n("try_adjusting_search")})]})})]}),u&&i(Ef,{isOpen:!!u,onClose:()=>p(null),product:u,t:n,language:s})]})},jb=({isOpen:e,onClose:t,onConfirm:r,orderId:n,totalAmount:s,t:a})=>{const[o,l]=x.useState("Cash");if(!e)return null;const d=()=>{r(o)};return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-sm m-4",onClick:u=>u.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("confirm_payment")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6",children:[c("div",{className:"text-center mb-4",children:[c("p",{className:"text-text-secondary",children:[a("total_amount_for_order"),":"]}),i("p",{className:"text-2xl font-bold text-primary my-1 font-mono",children:n}),c("p",{className:"text-3xl font-bold text-primary",children:["",s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{className:"text-sm text-text-secondary mb-2",children:[a("select_payment_method"),":"]}),c("div",{className:"space-y-3",children:[c("button",{onClick:()=>l("Cash"),className:`w-full flex items-center gap-3 text-left p-3 rounded-lg border-2 transition-colors ${o==="Cash"?"border-primary bg-blue-50":"border-gray-300 bg-background hover:bg-gray-200"}`,children:[i(ys,{className:"h-6 w-6 text-green-600"}),c("div",{children:[i("p",{className:"font-semibold text-text-primary",children:a("payment_cash")}),i("p",{className:"text-xs text-text-secondary",children:a("payment_received_in_cash")})]})]}),c("button",{onClick:()=>l("Bank Transfer"),className:`w-full flex items-center gap-3 text-left p-3 rounded-lg border-2 transition-colors ${o==="Bank Transfer"?"border-primary bg-blue-50":"border-gray-300 bg-background hover:bg-gray-200"}`,children:[i(kf,{className:"h-6 w-6 text-purple-600"}),c("div",{children:[i("p",{className:"font-semibold text-text-primary",children:a("payment_bank_transfer")}),i("p",{className:"text-xs text-text-secondary",children:a("payment_confirmed_via_transfer")})]})]}),c("button",{onClick:()=>l("Card"),className:`w-full flex items-center gap-3 text-left p-3 rounded-lg border-2 transition-colors ${o==="Card"?"border-primary bg-blue-50":"border-gray-300 bg-background hover:bg-gray-200"}`,children:[i(Ed,{className:"h-6 w-6 text-blue-600"}),c("div",{children:[i("p",{className:"font-semibold text-text-primary",children:a("payment_card")}),i("p",{className:"text-xs text-text-secondary",children:a("payment_processed_with_card")})]})]})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",onClick:d,children:a("mark_as_paid")}),i("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm",onClick:t,children:a("cancel")})]})]})})},Db=({isOpen:e,onClose:t,order:r,storeSettings:n,language:s,t:a})=>{const o=()=>{const l=document.getElementById("delivery-note-to-print");if(!l)return;const d=window.open("","_blank");if(!d){alert("Please allow pop-ups to print the delivery note.");return}const u=document.querySelector('script[src="https://cdn.tailwindcss.com"]'),p=Array.from(document.querySelectorAll("script")).find(m=>{var y;return(y=m.textContent)==null?void 0:y.includes("tailwind.config")}),h=Array.from(document.querySelectorAll("style"));d.document.write("<html><head><title>Print Delivery Note</title>"),u&&d.document.write(u.outerHTML),p&&d.document.write(`<script>${p.innerHTML}<\/script>`),h.forEach(m=>d.document.write(`<style>${m.innerHTML}</style>`)),d.document.write("</head><body>"),d.document.write(l.outerHTML),d.document.write("</body></html>"),d.document.close(),setTimeout(()=>{d.focus(),d.print(),d.close()},500)};return!e||!r?null:i(Re,{children:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center no-print","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4",onClick:l=>l.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("delivery_note_pickup_slip")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:c("div",{id:"delivery-note-to-print",className:"bg-white text-black p-6 border",children:[c("div",{className:"flex justify-between items-start pb-4 border-b",children:[c("div",{children:[i("h1",{className:"text-xl font-bold",children:n==null?void 0:n.store_name[s]}),i("p",{className:"text-xs",children:n==null?void 0:n.address[s]}),c("p",{className:"text-xs",children:["Tel: ",n==null?void 0:n.phone[s]]})]}),c("div",{className:"text-right",children:[i("h2",{className:"text-2xl font-bold uppercase",children:a(r.type==="Delivery"?"delivery_note":"pickup_note")}),c("p",{className:"text-xs",children:[c("strong",{children:[a("order_id"),":"]})," ",r.id]}),c("p",{className:"text-xs",children:[c("strong",{children:[a("date"),":"]})," ",new Date(r.date).toLocaleDateString()]})]})]}),c("div",{className:"grid grid-cols-2 gap-4 my-4 text-sm",children:[c("div",{children:[c("h4",{className:"font-bold mb-1",children:[a("customer").toUpperCase(),":"]}),i("p",{children:r.customer.name}),i("p",{children:r.customer.phone})]}),r.address&&c("div",{className:"text-right",children:[c("h4",{className:"font-bold mb-1",children:[a("shipping_address"),":"]}),i("p",{children:r.address})]})]}),c("table",{className:"w-full text-sm border-collapse border",children:[i("thead",{className:"bg-gray-100",children:c("tr",{children:[i("th",{className:"border p-2 text-left font-bold",children:a("sku")}),i("th",{className:"border p-2 text-left font-bold",children:a("product_description")}),i("th",{className:"border p-2 text-center font-bold",children:a("quantity")})]})}),i("tbody",{children:r.items.map(l=>c("tr",{children:[i("td",{className:"border p-2 align-top font-mono",children:l.sku}),c("td",{className:"border p-2 align-top",children:[l.name[s]," (",l.size,")"]}),i("td",{className:"border p-2 text-center align-top font-bold text-lg",children:l.quantity})]},l.variantId))})]}),c("div",{className:"grid grid-cols-2 gap-8 mt-16 text-sm",children:[c("div",{className:"text-center",children:[i("div",{className:"border-t pt-2",children:a("received_by")}),c("p",{className:"mt-1 text-xs",children:["(",a("customer_signature"),")"]})]}),c("div",{className:"text-center",children:[i("div",{className:"border-t pt-2",children:a("delivered_by")}),c("p",{className:"mt-1 text-xs",children:["(",a("staff_signature"),")"]})]})]})]})}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[c("button",{type:"button",onClick:o,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:[i(xs,{className:"h-5 w-5 mr-2"})," ",a("print")]}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:a("close")})]})]})})})},Rb=e=>{switch(e){case er.PENDING:return"bg-yellow-100 text-yellow-800";case er.PROCESSING:return"bg-blue-100 text-blue-800";case er.READY_FOR_PICKUP:return"bg-purple-100 text-purple-800";case er.COMPLETED:return"bg-green-100 text-green-800";case er.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Lb=e=>{switch(e){case ie.UNPAID:return"bg-red-100 text-red-800";case ie.PAID:return"bg-green-100 text-green-800";case ie.REFUNDED:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Mb=({orders:e,onUpdateOrderStatus:t,onUpdateOrderPaymentStatus:r,onConvertOrderToInvoice:n,storeSettings:s,t:a,language:o})=>{const[l,d]=x.useState(""),[u,p]=x.useState("All"),[h,m]=x.useState("All"),[y,v]=x.useState(new Set),[b,k]=x.useState(null),[w,f]=x.useState(null),[g,_]=x.useState(null),E=T=>{v(R=>{const $=new Set(R);return $.has(T)?$.delete(T):$.add(T),$})},S=T=>{b&&r(b.id,ie.PAID,T),k(null)},O=()=>{g&&n(g),_(null)},C=x.useMemo(()=>{const T=l.toLowerCase();return e.filter(R=>{const $=u==="All"||R.status===u,J=h==="All"||R.paymentStatus===h,ne=!T||R.id.toLowerCase().includes(T)||R.customer.name.toLowerCase().includes(T);return $&&J&&ne}).sort((R,$)=>new Date($.date).getTime()-new Date(R.date).getTime())},[e,l,u,h]),P=["All",...Object.values(er)],N=["All",...Object.values(ie)],I=T=>{if(T==="All")return a("all");const R=`fulfillment_status_${T.toLowerCase().replace(/\s/g,"_")}`;return a(R)},A=T=>{if(T==="All")return a("all");const R=`payment_status_${T.toLowerCase().replace(/\s/g,"_")}`;return a(R)};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:a("order_management")}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:a("search_order_id_or_customer"),value:l,onChange:T=>d(T.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),i("select",{value:u,onChange:T=>p(T.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background text-text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",children:P.map(T=>c("option",{value:T,children:[a("fulfillment"),": ",I(T)]},T))}),i("select",{value:h,onChange:T=>m(T.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background text-text-primary focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",children:N.map(T=>c("option",{value:T,children:[a("payment"),": ",A(T)]},T))})]})]}),i("div",{className:"overflow-x-auto",children:c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-2 py-3 w-12"}),i("th",{scope:"col",className:"px-6 py-3",children:a("order_id")}),i("th",{scope:"col",className:"px-6 py-3",children:a("date")}),i("th",{scope:"col",className:"px-6 py-3",children:a("customer")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:a("total")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:a("payment")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:a("fulfillment")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:a("actions")})]})}),i("tbody",{children:C.length>0?C.map(T=>c(ro.Fragment,{children:[c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-2 py-4 text-center",children:i("button",{onClick:()=>E(T.id),className:"p-1 text-gray-500 hover:text-primary rounded-full hover:bg-gray-100",children:y.has(T.id)?i(xo,{className:"h-4 w-4"}):i(Cd,{className:"h-4 w-4"})})}),i("td",{className:"px-6 py-4 font-mono text-xs font-medium text-gray-900",children:T.id}),i("td",{className:"px-6 py-4",children:new Date(T.date).toLocaleDateString()}),i("td",{className:"px-6 py-4",children:T.customer.name}),c("td",{className:"px-6 py-4 text-right font-semibold",children:["",T.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"px-6 py-4 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Lb(T.paymentStatus)}`,children:A(T.paymentStatus)})}),i("td",{className:"px-6 py-4 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Rb(T.status)}`,children:I(T.status)})}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center items-center gap-2",children:[i("select",{value:T.status,onChange:R=>t(T.id,R.target.value),className:"text-xs p-1 border rounded-md bg-background focus:ring-primary focus:border-primary",children:Object.values(er).map(R=>i("option",{value:R,children:I(R)},R))}),T.paymentStatus===ie.UNPAID&&c(Re,{children:[i("button",{onClick:()=>k(T),className:"text-xs p-1 px-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:a("mark_as_paid")}),i("button",{onClick:()=>_(T),className:"text-xs p-1 px-2 bg-secondary text-white rounded-md hover:bg-orange-700",children:a("bill_customer")})]}),c("button",{onClick:()=>f(T),className:"text-xs flex items-center gap-1 p-1 px-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",title:"Print or Save Delivery Note as PDF",children:[i(xs,{className:"h-3 w-3"}),i("span",{children:a("print_pdf")})]})]})})]}),y.has(T.id)&&i("tr",{className:"bg-gray-50",children:i("td",{colSpan:8,className:"p-4",children:c("div",{className:"bg-white p-4 rounded-md shadow-inner grid grid-cols-1 md:grid-cols-2 gap-4",children:[c("div",{children:[c("h5",{className:"font-semibold mb-2 text-text-primary",children:[a("items_to_prepare"),":"]}),i("ul",{className:"divide-y divide-gray-200 max-h-48 overflow-y-auto",children:T.items.map(R=>c("li",{className:"py-2 flex items-center gap-4",children:[i("img",{src:R.imageUrl,alt:R.name[o],className:"h-12 w-12 rounded-md object-cover flex-shrink-0"}),c("div",{className:"flex-grow",children:[i("p",{className:"font-medium text-text-primary",children:R.name[o]}),c("p",{className:"text-xs text-text-secondary",children:[a("sku"),": ",R.sku]})]}),c("div",{className:"text-right",children:[i("p",{className:"font-bold text-lg text-primary",children:R.quantity}),i("p",{className:"text-xs text-text-secondary",children:"units"})]})]},R.variantId))})]}),c("div",{className:"text-sm",children:[c("h5",{className:"font-semibold mb-2 text-text-primary",children:[a("delivery_pickup_info"),":"]}),c("p",{children:[c("strong",{children:[a("type"),":"]})," ",a(T.type.toLowerCase())]}),c("p",{children:[c("strong",{children:[a("customer"),":"]})," ",T.customer.name," (",a(T.customer.type),")"]}),T.customer.phone&&c("p",{children:[c("strong",{children:[a("phone"),":"]})," ",T.customer.phone]}),T.address&&c("p",{children:[c("strong",{children:[a("address"),":"]})," ",T.address]}),T.notes&&c("p",{children:[c("strong",{children:[a("notes"),":"]})," ",T.notes]}),T.paymentMethod&&c("p",{className:"mt-2 pt-2 border-t",children:[c("strong",{children:[a("paid_via"),":"]})," ",a(`payment_${T.paymentMethod.toLowerCase().replace(/\s/g,"_")}`)]})]})]})})})]},T.id)):i("tr",{children:c("td",{colSpan:8,className:"text-center p-12 text-text-secondary",children:[i(Td,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:a("no_orders_found")}),i("p",{className:"text-sm mt-1",children:a("try_adjusting_filters")})]})})})]})})]}),i(jb,{isOpen:!!b,onClose:()=>k(null),onConfirm:S,orderId:(b==null?void 0:b.id)||"",totalAmount:(b==null?void 0:b.total)||0,t:a}),i(Db,{isOpen:!!w,onClose:()=>f(null),order:w,storeSettings:s,language:o,t:a}),i(fr,{isOpen:!!g,onClose:()=>_(null),onConfirm:O,title:a("bill_customer_confirm_title"),message:a("bill_customer_confirm_message",{orderId:(g==null?void 0:g.id)||""}),confirmText:a("confirm_and_bill"),confirmButtonClass:"bg-secondary hover:bg-orange-700 focus:ring-orange-500",t:a})]})},Fb=({transactions:e,currentUser:t,onDeleteTransaction:r,onReceivePaymentClick:n,onEditPastInvoiceClick:s,onUndoConsolidationClick:a,storeSettings:o,t:l,language:d})=>{var _,E;const[u,p]=x.useState(""),[h,m]=x.useState(null),[y,v]=x.useState(null),b=(_=t.permissions)==null?void 0:_.sales_history.write,k=(E=t.permissions)==null?void 0:E.sales_history.delete,w=x.useMemo(()=>{const S=u.toLowerCase(),O=[...e].sort((C,P)=>new Date(P.date).getTime()-new Date(C.date).getTime());return S?O.filter(C=>C.id.toLowerCase().includes(S)||C.customerName.toLowerCase().includes(S)||C.operator.toLowerCase().includes(S)):O},[e,u]),f=()=>{y&&(r(y.id),v(null))},g=S=>{switch(S.payment_status){case ie.PAID:return{text:l("paid"),color:"bg-green-100 text-green-800"};case ie.PARTIALLY_PAID:return{text:l("partially_paid"),color:"bg-blue-100 text-blue-800"};case ie.CONSOLIDATED:return{text:l("consolidated"),color:"bg-gray-100 text-gray-800"};case ie.UNPAID:return S.due_date&&new Date(S.due_date)<new Date?{text:l("overdue"),color:"bg-red-100 text-red-800"}:{text:l("unpaid"),color:"bg-yellow-100 text-yellow-800"};default:return{text:S.payment_status,color:"bg-gray-100 text-gray-800"}}};return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[c("div",{children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:l("sales_and_invoices")}),i("p",{className:"text-sm text-text-secondary",children:l("sales_history_desc")})]}),c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:l("search_sales_history_placeholder"),value:u,onChange:S=>p(S.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]})]}),i("div",{className:"overflow-x-auto",children:w.length>0?c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:"Transaction ID"}),i("th",{scope:"col",className:"px-6 py-3",children:l("date")}),i("th",{scope:"col",className:"px-6 py-3",children:l("customer")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:l("total")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:l("amount_paid")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:l("balance_due")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("status")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("actions")})]})}),i("tbody",{children:w.map(S=>{const O=g(S),C=S.total-S.paid_amount,P=S.id.startsWith("PAST-"),N=S.id.startsWith("C-INV-");return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-mono text-xs font-medium text-gray-900",children:S.id}),i("td",{className:"px-6 py-4",children:new Date(S.date).toLocaleString()}),i("td",{className:"px-6 py-4",children:S.customerName}),c("td",{className:"px-6 py-4 text-right font-semibold",children:["",S.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:"px-6 py-4 text-right text-green-600",children:["",S.paid_amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:`px-6 py-4 text-right font-bold ${C>0?"text-red-600":"text-text-primary"}`,children:["",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"px-6 py-4 text-center",children:i("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium ${O.color}`,children:O.text})}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center items-center gap-2",children:[C>0&&S.payment_status!==ie.CONSOLIDATED&&b&&i("button",{onClick:()=>n(S),className:"text-xs p-1 px-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:l("receive_payment")}),P&&b&&i("button",{onClick:()=>s(S),className:"text-primary hover:text-blue-700 p-1",title:l("edit"),children:i(Tn,{className:"h-4 w-4"})}),N&&b&&i("button",{onClick:()=>a(S),className:"text-yellow-600 hover:text-yellow-800 p-1",title:l("undo_consolidation"),children:i(gf,{className:"h-4 w-4"})}),S.file_url&&i("a",{href:S.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-primary p-1",title:l("view_attached_invoice"),children:i(ha,{className:"h-4 w-4"})}),i("button",{onClick:()=>m(S),className:"text-primary hover:text-blue-700 p-1",title:l("view_receipt"),children:i(xs,{className:"h-4 w-4"})}),k&&i("button",{onClick:()=>v(S),className:"text-red-600 hover:text-red-800 p-1",title:l("delete_transaction"),children:i(sr,{className:"h-4 w-4"})})]})})]},S.id)})})]}):c("div",{className:"text-center p-12 text-text-secondary",children:[i(ha,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:l("no_transactions_found")}),i("p",{className:"text-sm mt-1",children:l("no_sales_matching_search")})]})})]}),i(mg,{isOpen:!!h,onClose:()=>m(null),transaction:h,storeSettings:o,t:l,language:d}),i(fr,{isOpen:!!y,onClose:()=>v(null),onConfirm:f,title:l("delete_transaction_title"),message:l("delete_transaction_confirm_message",{transactionId:(y==null?void 0:y.id)||""}),t:l})]})},$b=({logs:e,users:t,t:r})=>{const[n,s]=x.useState(""),a=x.useMemo(()=>{const d=n.toLowerCase();if(!d)return e;const u=new Map(t.map(p=>[p.id,p.name.toLowerCase()]));return e.filter(p=>(u.get(p.userId)||"").includes(d))},[e,t,n]),o=d=>t.find(u=>u.id===d),l=()=>{const d=a.map(h=>{const m=o(h.userId);return{Timestamp:new Date(h.timestamp).toLocaleString(),User:m?m.name:"Unknown User",Action:h.action}}),u=XLSX.utils.json_to_sheet(d);u["!cols"]=[{wch:25},{wch:25},{wch:80}];const p=XLSX.utils.book_new();XLSX.utils.book_append_sheet(p,u,"Activity Log"),XLSX.writeFile(p,"ActivityLog.xlsx")};return c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[c("div",{children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:r("user_activity_log")}),i("p",{className:"text-sm text-text-secondary",children:r("activity_log_desc")})]}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:r("search_by_user_name"),value:n,onChange:d=>s(d.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]}),c("button",{onClick:l,className:"flex items-center gap-2 bg-green-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-green-700 transition-colors",title:"Export the currently filtered log to an Excel file",children:[i(Na,{className:"h-5 w-5"}),r("export_to_excel")]})]})]}),i("div",{className:"overflow-x-auto",children:a.length>0?c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:r("user")}),i("th",{scope:"col",className:"px-6 py-3",children:r("action")}),i("th",{scope:"col",className:"px-6 py-3",children:r("timestamp")})]})}),i("tbody",{children:a.map(d=>{const u=o(d.userId);return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:u?c("div",{className:"flex items-center gap-3",children:[i("img",{src:u.avatar,alt:u.name,className:"h-8 w-8 rounded-full object-cover"}),i("span",{children:u.name})]}):i("span",{children:"Unknown User"})}),i("td",{className:"px-6 py-4",children:d.action}),i("td",{className:"px-6 py-4 text-text-secondary",children:new Date(d.timestamp).toLocaleString()})]},d.id)})})]}):c("div",{className:"text-center p-12 text-text-secondary",children:[i(Cf,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:r("no_activity_found")}),i("p",{className:"text-sm mt-1",children:r("no_activity_matching_search")})]})})]})},Ub=({currentUser:e,onUpdateUser:t,onUpdatePassword:r,links:n,t:s})=>{const[a,o]=x.useState(e.name),[l,d]=x.useState(e.avatar),[u,p]=x.useState(e.settings||{}),[h,m]=x.useState(null),[y,v]=x.useState(""),[b,k]=x.useState(""),[w,f]=x.useState(""),[g,_]=x.useState(null),[E,S]=x.useState(!1),[O,C]=x.useState(!1),[P,N]=x.useState(!1);x.useEffect(()=>{o(e.name),d(e.avatar),p(e.settings||{}),m(null),_(null),v(""),k(""),f("")},[e]);const I=D=>{var j;const L=(j=D.target.files)==null?void 0:j[0];if(L){const te=new FileReader;te.onloadend=()=>{d(te.result)},te.readAsDataURL(L)}},A=D=>{D.preventDefault(),t(e.id,{name:a,avatar:l,role:e.role,settings:u}),m({type:"success",message:"Profile updated successfully!"}),setTimeout(()=>m(null),3e3)},T=async D=>{if(D.preventDefault(),_(null),b!==w){_({type:"error",message:s("password_update_error_mismatch")});return}if(b.length<6){_({type:"error",message:s("password_update_error_too_short")});return}const L=await r(e.id,y,b);_({type:L.success?"success":"error",message:s(L.message)}),L.success&&(v(""),k(""),f("")),setTimeout(()=>_(null),4e3)},R=(D,L)=>{p(j=>({...j,[D]:L}))},$=new Set(e.role),J={pos:$.has(oe.POS_OPERATOR),storeStaff:$.has(oe.STORE_STAFF),manager:$.has(oe.STORE_MANAGER)||$.has(oe.ACCOUNT_MANAGER),admin:$.has(oe.ADMIN)},ne=Object.values(J).some(Boolean);return c("div",{className:"max-w-4xl mx-auto space-y-8",children:[c("form",{onSubmit:A,children:[i("div",{className:"bg-surface rounded-lg shadow",children:c("div",{className:"p-6",children:[i("h2",{className:"text-xl font-bold text-text-primary",children:"Profile Information"}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Update your personal details here."}),c("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-6",children:[c("div",{className:"relative w-24 h-24 flex-shrink-0",children:[i("img",{src:l,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}),c("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-800 transition-colors shadow",children:[i(wx,{className:"h-4 w-4"}),i("input",{id:"avatar-upload",type:"file",className:"sr-only",accept:"image/*",onChange:I})]})]}),c("div",{className:"w-full",children:[i("label",{htmlFor:"profile-name",className:"block text-sm font-medium text-text-secondary",children:"Full Name"}),i("input",{id:"profile-name",type:"text",value:a,onChange:D=>o(D.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm p-2 bg-background"})]})]})]})}),i("div",{className:"bg-surface rounded-lg shadow mt-8",children:c("div",{className:"p-6",children:[i("h2",{className:"text-xl font-bold text-text-primary",children:"Role-Specific Settings"}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Quick actions and settings based on your role."}),ne?c("div",{className:"mt-6 space-y-6",children:[J.pos&&c("div",{children:[i("h3",{className:"font-semibold text-text-primary border-b pb-1 mb-3",children:"POS Operator Settings"}),c("div",{className:"space-y-4",children:[c("div",{children:[i("label",{htmlFor:"default-payment",className:"block text-sm font-medium text-text-secondary",children:"Default Payment Method"}),c("select",{id:"default-payment",value:u.defaultPaymentMethod||"Card",onChange:D=>R("defaultPaymentMethod",D.target.value),className:"mt-1 block w-full max-w-xs rounded-md p-2 bg-background border-gray-300 shadow-sm",children:[i("option",{value:"Card",children:"Card"}),i("option",{value:"Cash",children:"Cash"}),i("option",{value:"Bank Transfer",children:"Bank Transfer"})]})]}),c("div",{className:"flex items-center",children:[i("input",{type:"checkbox",id:"scan-sound",checked:!!u.playScanSound,onChange:D=>R("playScanSound",D.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),i("label",{htmlFor:"scan-sound",className:"ml-2 block text-sm text-text-primary",children:"Play sound on successful scan"})]})]})]}),J.storeStaff&&i("div",{children:i("h3",{className:"font-semibold text-text-primary border-b pb-1 mb-3",children:"Store Staff Settings"})}),J.manager&&c("div",{children:[i("h3",{className:"font-semibold text-text-primary border-b pb-1 mb-3",children:"Manager Settings"}),c("div",{className:"space-y-4",children:[c("div",{children:[i("label",{htmlFor:"default-view",className:"block text-sm font-medium text-text-secondary",children:"Default View on Login"}),i("select",{id:"default-view",value:u.defaultLoginView||"dashboard",onChange:D=>R("defaultLoginView",D.target.value),className:"mt-1 block w-full max-w-xs rounded-md p-2 bg-background border-gray-300 shadow-sm",children:Object.keys(n).map(D=>i("option",{value:D,children:s(D)},D))})]}),c("div",{children:[i("label",{htmlFor:"low-stock",className:"block text-sm font-medium text-text-secondary",children:'"Low Stock" Alert Threshold'}),i("input",{type:"number",id:"low-stock",value:u.lowStockThreshold||10,onChange:D=>R("lowStockThreshold",parseInt(D.target.value,10)||0),className:"mt-1 block w-24 rounded-md p-2 bg-background border-gray-300 shadow-sm"})]})]})]}),J.admin&&c("div",{children:[i("h3",{className:"font-semibold text-text-primary border-b pb-1 mb-3",children:"Admin Settings"}),c("div",{children:[i("label",{htmlFor:"default-customer-type",className:"block text-sm font-medium text-text-secondary",children:"Default Customer Type in POS"}),c("select",{id:"default-customer-type",value:u.defaultCustomerType||"walkIn",onChange:D=>R("defaultCustomerType",D.target.value),className:"mt-1 block w-full max-w-xs rounded-md p-2 bg-background border-gray-300 shadow-sm",children:[i("option",{value:"walkIn",children:"Walk-in"}),i("option",{value:"contractor",children:"Contractor"}),i("option",{value:"government",children:"Government"}),i("option",{value:"organization",children:"Organization"})]})]})]})]}):c("div",{className:"mt-4 p-4 bg-background rounded-md text-center text-text-secondary",children:[i("p",{children:"No specific settings for your role(s) yet."}),i("p",{className:"text-xs",children:"This area will contain shortcuts and options relevant to your daily tasks in the future."})]})]})}),c("div",{className:"mt-6 flex justify-end items-center gap-4 p-6 border-t bg-background rounded-b-lg",children:[h&&i("p",{className:`text-sm font-medium ${h.type==="success"?"text-green-600":"text-red-600"}`,children:h.message}),i("button",{type:"submit",className:"px-4 py-2 bg-primary text-white font-semibold rounded-md hover:bg-blue-800",children:"Save All Changes"})]})]}),i("div",{className:"bg-surface rounded-lg shadow",children:c("form",{onSubmit:T,className:"p-6",children:[c("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[i(Nf,{className:"h-5 w-5"})," Security"]}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Change your password."}),c("div",{className:"mt-6 space-y-4 max-w-sm",children:[c("div",{children:[i("label",{htmlFor:"current-password",className:"block text-sm font-medium text-text-secondary",children:"Current Password"}),c("div",{className:"relative mt-1",children:[i("input",{id:"current-password",type:E?"text":"password",value:y,onChange:D=>v(D.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background focus:ring-primary focus:border-primary",required:!0}),i("button",{type:"button",onClick:()=>S(D=>!D),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-600","aria-label":E?"Hide password":"Show password",children:E?i(xi,{className:"h-5 w-5"}):i(wn,{className:"h-5 w-5"})})]})]}),c("div",{children:[i("label",{htmlFor:"new-password",className:"block text-sm font-medium text-text-secondary",children:"New Password"}),c("div",{className:"relative mt-1",children:[i("input",{id:"new-password",type:O?"text":"password",value:b,onChange:D=>k(D.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background focus:ring-primary focus:border-primary",required:!0}),i("button",{type:"button",onClick:()=>C(D=>!D),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-600","aria-label":O?"Hide password":"Show password",children:O?i(xi,{className:"h-5 w-5"}):i(wn,{className:"h-5 w-5"})})]})]}),c("div",{children:[i("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-text-secondary",children:"Confirm New Password"}),c("div",{className:"relative mt-1",children:[i("input",{id:"confirm-password",type:P?"text":"password",value:w,onChange:D=>f(D.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm p-2 bg-background focus:ring-primary focus:border-primary",required:!0}),i("button",{type:"button",onClick:()=>N(D=>!D),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-600","aria-label":P?"Hide password":"Show password",children:P?i(xi,{className:"h-5 w-5"}):i(wn,{className:"h-5 w-5"})})]})]})]}),c("div",{className:"mt-6 flex justify-end items-center gap-4",children:[g&&i("p",{className:`text-sm font-medium ${g.type==="success"?"text-green-600":"text-red-600"}`,children:g.message}),i("button",{type:"submit",className:"px-4 py-2 bg-primary text-white font-semibold rounded-md hover:bg-blue-800",children:"Update Password"})]})]})})]})},zb=({transactions:e,products:t,shiftReports:r,currentUser:n,onCloseShift:s,t:a,language:o})=>{const[l,d]=x.useState(!1),u=x.useMemo(()=>{const h=new Map;return t.forEach(m=>{m.variants.forEach(y=>{h.set(y.id,y.price.cost)})}),h},[t]),p=x.useMemo(()=>{const h=r.length>0?new Date(r[0].endTime):new Date(0),m=e.filter(E=>!E.shiftId&&new Date(E.date)>h);let y=0,v=0;const b={cash:0,card:0,bankTransfer:0},k={};for(const E of m){switch(y+=E.total,E.paymentMethod){case"Cash":b.cash+=E.total;break;case"Card":b.card+=E.total;break;case"Bank Transfer":b.bankTransfer+=E.total;break}const S=E.subtotal>0?E.total/E.subtotal:1;for(const O of E.items){const C=O.isOutsourced&&O.outsourcedCost?O.outsourcedCost:u.get(O.variantId)||0,N=(E.customerType==="government"?O.price.government:E.customerType==="contractor"?O.price.contractor:O.price.walkIn)*O.quantity*S,I=N-O.quantity*C;v+=I,k[O.variantId]||(k[O.variantId]={quantity:0,sales:0,profit:0,name:O.name,size:O.size,productId:O.productId}),k[O.variantId].quantity+=O.quantity,k[O.variantId].sales+=N,k[O.variantId].profit+=I}}const w=Object.entries(k).sort(([,E],[,S])=>S.quantity-E.quantity).slice(0,5).map(([E,S])=>({productId:S.productId,variantId:E,productName:S.name,variantSize:S.size,quantitySold:S.quantity,totalSales:S.sales,totalProfit:S.profit})),f=m.length,g=f>0?y/f:0,_=y>0?v/y*100:0;return{totalSales:y,totalProfit:v,totalTransactions:f,avgTransactionValue:g,profitMargin:_,paymentMethodBreakdown:b,topSellingItems:w,transactions:m,startTime:h}},[e,t,r,u]);return c(Re,{children:[c("div",{className:"max-w-4xl mx-auto space-y-6",children:[i("div",{className:"bg-surface rounded-lg shadow p-6",children:c("div",{className:"flex flex-wrap justify-between items-start",children:[c("div",{children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:a("end_of_day")}),i("p",{className:"text-text-secondary mt-1",children:a("end_of_day_summary_desc")}),c("p",{className:"text-xs text-text-secondary mt-1",children:[a("shift_start_time"),": ",p.startTime.toLocaleString()]})]}),i("button",{onClick:()=>d(!0),disabled:p.transactions.length===0,className:"px-6 py-2 bg-primary text-white font-semibold rounded-md hover:bg-blue-800 disabled:bg-gray-300 disabled:cursor-not-allowed",children:a("close_shift")})]})}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i(Ne,{title:a("total_sales"),value:`${p.totalSales.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(ys,{className:"h-6 w-6"}),color:"text-green-500"}),i(Ne,{title:a("total_profit"),value:`${p.totalProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(Sf,{className:"h-6 w-6"}),color:"text-blue-500"}),i(Ne,{title:a("transactions"),value:p.totalTransactions.toLocaleString(),icon:i(Ax,{className:"h-6 w-6"}),color:"text-purple-500"}),i(Ne,{title:a("profit_margin"),value:`${p.profitMargin.toFixed(2)}%`,icon:i(pr,{className:"h-6 w-6"}),color:"text-indigo-500"})]}),c("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c("div",{className:"bg-surface rounded-lg shadow p-4",children:[i("h3",{className:"font-semibold text-text-primary mb-3",children:a("sales_by_payment_method")}),c("div",{className:"space-y-2 text-sm",children:[c("div",{className:"flex justify-between",children:[i("span",{children:a("payment_cash")}),c("span",{className:"font-semibold",children:["",p.paymentMethodBreakdown.cash.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"flex justify-between",children:[i("span",{children:a("payment_card")}),c("span",{className:"font-semibold",children:["",p.paymentMethodBreakdown.card.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{className:"flex justify-between",children:[i("span",{children:a("payment_bank_transfer")}),c("span",{className:"font-semibold",children:["",p.paymentMethodBreakdown.bankTransfer.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),c("div",{className:"bg-surface rounded-lg shadow p-4",children:[i("h3",{className:"font-semibold text-text-primary mb-3",children:a("top_selling_items")}),p.topSellingItems.length>0?i("ul",{className:"space-y-2 text-sm",children:p.topSellingItems.map(h=>c("li",{className:"flex justify-between",children:[c("span",{children:[h.productName[o]," (",h.variantSize,")"]}),c("span",{className:"font-bold",children:[h.quantitySold," units"]})]},h.variantId))}):i("p",{className:"text-sm text-center text-text-secondary py-4",children:a("no_items_sold_yet")})]})]})]}),i(fr,{isOpen:l,onClose:()=>d(!1),onConfirm:()=>{s(),d(!1)},title:a("close_shift_confirm_title"),message:a("close_shift_confirm_message"),confirmText:a("close_shift"),t:a})]})},Bb=({isOpen:e,onClose:t,report:r,user:n,t:s,language:a})=>{if(!e||!r)return null;const o=()=>{const d=document.getElementById("shift-report-to-print");if(!d)return;const u=window.open("","_blank");if(!u){alert("Please allow pop-ups to print the report.");return}const p=document.querySelector('script[src="https://cdn.tailwindcss.com"]'),h=Array.from(document.querySelectorAll("script")).find(y=>{var v;return(v=y.textContent)==null?void 0:v.includes("tailwind.config")}),m=Array.from(document.querySelectorAll("style"));u.document.write("<html><head><title>Shift Report</title>"),p&&u.document.write(p.outerHTML),h&&u.document.write(`<script>${h.innerHTML}<\/script>`),m.forEach(y=>u.document.write(`<style>${y.innerHTML}</style>`)),u.document.write('</head><body class="bg-white">'),u.document.write(d.outerHTML),u.document.write("</body></html>"),u.document.close(),setTimeout(()=>{u.focus(),u.print(),u.close()},500)},l=r.totalSales>0?r.totalProfit/r.totalSales*100:0;return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center no-print","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4",onClick:d=>d.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:s("shift_report")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:c("div",{id:"shift-report-to-print",className:"bg-white text-black p-6 w-full mx-auto text-sm leading-relaxed font-sans",children:[c("div",{className:"text-center",children:[i("h1",{className:"text-xl font-bold",children:" "}),i("p",{className:"text-xs",children:"123 Example Rd, Khon Kaen, 40000"}),i("h2",{className:"font-bold my-2 text-lg uppercase",children:s("shift_report")})]}),c("div",{className:"border-t border-b border-dashed border-black my-2 py-1 text-xs",children:[c("p",{children:[c("strong",{children:[s("shift_id"),":"]})," ",r.id]}),c("p",{children:[c("strong",{children:[s("start_time"),":"]})," ",new Date(r.startTime).toLocaleString()]}),c("p",{children:[c("strong",{children:[s("end_time"),":"]})," ",new Date(r.endTime).toLocaleString()]}),c("p",{children:[c("strong",{children:[s("closed_by"),":"]})," ",(n==null?void 0:n.name)||"Unknown"]})]}),c("div",{className:"my-4",children:[i("h3",{className:"font-bold border-b border-black pb-1 mb-1",children:"Summary"}),c("div",{className:"grid grid-cols-2 gap-x-4 text-sm",children:[c("p",{children:[c("strong",{children:[s("total_sales"),":"]})," ",c("span",{className:"float-right font-mono",children:["",r.totalSales.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{children:[c("strong",{children:[s("total_profit"),":"]})," ",c("span",{className:"float-right font-mono",children:["",r.totalProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{children:[i("strong",{children:"Transactions:"})," ",i("span",{className:"float-right font-mono",children:r.totalTransactions})]}),c("p",{children:[c("strong",{children:[s("profit_margin"),":"]})," ",c("span",{className:"float-right font-mono",children:[l.toFixed(2),"%"]})]})]})]}),c("div",{className:"my-4",children:[i("h3",{className:"font-bold border-b border-black pb-1 mb-1",children:s("sales_by_payment_method")}),c("div",{className:"grid grid-cols-2 gap-x-4 text-sm",children:[c("p",{children:[i("strong",{children:"Cash:"})," ",c("span",{className:"float-right font-mono",children:["",r.paymentMethodBreakdown.cash.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{children:[i("strong",{children:"Card:"})," ",c("span",{className:"float-right font-mono",children:["",r.paymentMethodBreakdown.card.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{children:[i("strong",{children:"Bank Transfer:"})," ",c("span",{className:"float-right font-mono",children:["",r.paymentMethodBreakdown.bankTransfer.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),c("div",{className:"my-4",children:[c("h3",{className:"font-bold border-b border-black pb-1 mb-1",children:[s("top_selling_items")," (by quantity)"]}),c("table",{className:"w-full text-xs",children:[i("thead",{children:c("tr",{className:"border-b border-dashed",children:[i("th",{className:"text-left py-1",children:"Item"}),i("th",{className:"text-center py-1",children:"Qty"}),i("th",{className:"text-right py-1",children:"Total Sales"})]})}),i("tbody",{children:r.topSellingItems.map(d=>c("tr",{children:[c("td",{children:[d.productName[a]," (",d.variantSize,")"]}),i("td",{className:"text-center font-mono",children:d.quantitySold}),c("td",{className:"text-right font-mono",children:["",d.totalSales.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},d.variantId))})]})]})]})}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[c("button",{type:"button",onClick:o,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm",children:[i(xs,{className:"h-5 w-5 mr-2"})," ",s("print_report")]}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:s("close")})]})]})})},Vb=({shiftReports:e,users:t,t:r,language:n})=>{const[s,a]=x.useState(""),[o,l]=x.useState(null),d=x.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),u=x.useMemo(()=>{const p=s.toLowerCase();return e.filter(h=>{var y;const m=((y=d.get(h.closedByUserId))==null?void 0:y.name.toLowerCase())||"";return h.id.toLowerCase().includes(p)||m.includes(p)})},[e,s,d]);return c(Re,{children:[c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[c("div",{children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:r("shift_history")}),i("p",{className:"text-sm text-text-secondary",children:"Review all previously closed sales shifts."})]}),c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:r("search_by_id_or_user"),value:s,onChange:p=>a(p.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-background text-text-primary placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm"})]})]}),i("div",{className:"overflow-x-auto",children:u.length>0?c("table",{className:"w-full text-sm text-left text-gray-500",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:r("shift_id")}),i("th",{scope:"col",className:"px-6 py-3",children:r("start_time")}),i("th",{scope:"col",className:"px-6 py-3",children:r("end_time")}),i("th",{scope:"col",className:"px-6 py-3",children:r("closed_by")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:r("total_sales")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:r("actions")})]})}),i("tbody",{children:u.map(p=>{const h=d.get(p.closedByUserId);return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-mono text-xs font-medium text-gray-900",children:p.id}),i("td",{className:"px-6 py-4",children:new Date(p.startTime).toLocaleString()}),i("td",{className:"px-6 py-4",children:new Date(p.endTime).toLocaleString()}),i("td",{className:"px-6 py-4",children:(h==null?void 0:h.name)||"Unknown"}),c("td",{className:"px-6 py-4 text-right font-semibold",children:["",p.totalSales.toFixed(2)]}),i("td",{className:"px-6 py-4 text-center",children:i("button",{onClick:()=>l(p),className:"px-3 py-1 bg-primary text-white text-xs font-semibold rounded-md hover:bg-blue-800",children:r("view_report")})})]},p.id)})})]}):c("div",{className:"text-center p-12 text-text-secondary",children:[i(pa,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:r("no_shifts_found")}),i("p",{className:"text-sm mt-1",children:r("no_shifts_desc")})]})})]}),i(Bb,{isOpen:!!o,onClose:()=>l(null),report:o,user:o&&d.get(o.closedByUserId)||null,t:r,language:n})]})},Wb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Rd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class qb extends Rd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cm extends Rd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Em extends Rd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xc||(xc={}));class Hb{constructor(t,{headers:r={},customFetch:n,region:s=xc.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Wb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return K(this,arguments,void 0,function*(r,n={}){var s;let a,o;try{const{headers:l,method:d,body:u,signal:p,timeout:h}=n;let m={},{region:y}=n;y||(y=this.region);const v=new URL(`${this.url}/${r}`);y&&y!=="any"&&(m["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let b;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",b=u):typeof u=="string"?(m["Content-Type"]="text/plain",b=u):typeof FormData<"u"&&u instanceof FormData?b=u:(m["Content-Type"]="application/json",b=JSON.stringify(u)):b=u;let k=p;h&&(o=new AbortController,a=setTimeout(()=>o.abort(),h),p?(k=o.signal,p.addEventListener("abort",()=>o.abort())):k=o.signal);const w=yield this.fetch(v.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:b,signal:k}).catch(E=>{throw new qb(E)}),f=w.headers.get("x-relay-error");if(f&&f==="true")throw new Cm(w);if(!w.ok)throw new Em(w);let g=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return g==="application/json"?_=yield w.json():g==="application/octet-stream"||g==="application/pdf"?_=yield w.blob():g==="text/event-stream"?_=w:g==="multipart/form-data"?_=yield w.formData():_=yield w.text(),{data:_,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof Em||l instanceof Cm?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var ht={};const bs=zy(vw);var Ja={},Xa={},Ya={},Za={},ei={},ti={},Pm;function pg(){if(Pm)return ti;Pm=1,Object.defineProperty(ti,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ti.default=e,ti}var Tm;function hg(){if(Tm)return ei;Tm=1,Object.defineProperty(ei,"__esModule",{value:!0});const t=bs.__importDefault(pg());class r{constructor(s){var a,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,p,h,m;let y=null,v=null,b=null,k=d.status,w=d.statusText;if(d.ok){if(this.method!=="HEAD"){const E=await d.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=E:v=JSON.parse(E))}const g=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),_=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&_&&_.length>1&&(b=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(y={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,b=null,k=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const g=await d.text();try{y=JSON.parse(g),Array.isArray(y)&&d.status===404&&(v=[],y=null,k=200,w="OK")}catch{d.status===404&&g===""?(k=204,w="No Content"):y={message:g}}if(y&&this.isMaybeSingle&&(!((m=y==null?void 0:y.details)===null||m===void 0)&&m.includes("0 rows"))&&(y=null,k=200,w="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:v,count:b,status:k,statusText:w}});return this.shouldThrowOnError||(l=l.catch(d=>{var u,p,h,m,y,v;let b="";const k=d==null?void 0:d.cause;if(k){const w=(u=k==null?void 0:k.message)!==null&&u!==void 0?u:"",f=(p=k==null?void 0:k.code)!==null&&p!==void 0?p:"";b=`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,b+=`

Caused by: ${(m=k==null?void 0:k.name)!==null&&m!==void 0?m:"Error"}: ${w}`,f&&(b+=` (${f})`),k!=null&&k.stack&&(b+=`
${k.stack}`)}else b=(y=d==null?void 0:d.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"FetchError"}: ${d==null?void 0:d.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,a)}returns(){return this}overrideTypes(){return this}}return ei.default=r,ei}var Om;function fg(){if(Om)return Za;Om=1,Object.defineProperty(Za,"__esModule",{value:!0});const t=bs.__importDefault(hg());class r extends t.default{select(s){let a=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:d=l}={}){const u=d?`${d}.order`:"order",p=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${p?`${p},`:""}${s}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:d=!1,format:u="text"}={}){var p;const h=[s?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),m=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Za.default=r,Za}var Im;function Ld(){if(Im)return Ya;Im=1,Object.defineProperty(Ya,"__esModule",{value:!0});const t=bs.__importDefault(fg()),r=new RegExp("[,()]");class n extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}regexMatch(a,o){return this.url.searchParams.append(a,`match.${o}`),this}regexIMatch(a,o){return this.url.searchParams.append(a,`imatch.${o}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}isDistinct(a,o){return this.url.searchParams.append(a,`isdistinct.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(d=>typeof d=="string"&&r.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:d}={}){let u="";d==="plain"?u="pl":d==="phrase"?u="ph":d==="websearch"&&(u="w");const p=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${p}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Ya.default=n,Ya}var Am;function gg(){if(Am)return Xa;Am=1,Object.defineProperty(Xa,"__esModule",{value:!0});const t=bs.__importDefault(Ld());class r{constructor(s,{headers:a={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(s,a){const{head:o=!1,count:l}=a??{},d=o?"HEAD":"GET";let u=!1;const p=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",p),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:o=!0}={}){var l;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(u.length>0){const p=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:d=!0}={}){var u;const p="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(h.length>0){const m=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var a;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Xa.default=r,Xa}var jm;function Kb(){if(jm)return Ja;jm=1,Object.defineProperty(Ja,"__esModule",{value:!0});const e=bs,t=e.__importDefault(gg()),r=e.__importDefault(Ld());class n{constructor(a,{headers:o={},schema:l,fetch:d}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=d}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:d=!1,count:u}={}){var p;let h;const m=new URL(`${this.url}/rpc/${a}`);let y;l||d?(h=l?"HEAD":"GET",Object.entries(o).filter(([b,k])=>k!==void 0).map(([b,k])=>[b,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([b,k])=>{m.searchParams.append(b,k)})):(h="POST",y=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:v,schema:this.schemaName,body:y,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Ja.default=n,Ja}Object.defineProperty(ht,"__esModule",{value:!0});var yg=ht.PostgrestError=Eg=ht.PostgrestBuilder=Sg=ht.PostgrestTransformBuilder=kg=ht.PostgrestFilterBuilder=bg=ht.PostgrestQueryBuilder=xg=ht.PostgrestClient=void 0;const _s=bs,vg=_s.__importDefault(Kb());var xg=ht.PostgrestClient=vg.default;const wg=_s.__importDefault(gg());var bg=ht.PostgrestQueryBuilder=wg.default;const _g=_s.__importDefault(Ld());var kg=ht.PostgrestFilterBuilder=_g.default;const Ng=_s.__importDefault(fg());var Sg=ht.PostgrestTransformBuilder=Ng.default;const Cg=_s.__importDefault(hg());var Eg=ht.PostgrestBuilder=Cg.default;const Pg=_s.__importDefault(pg());yg=ht.PostgrestError=Pg.default;var Tg=ht.default={PostgrestClient:vg.default,PostgrestQueryBuilder:wg.default,PostgrestFilterBuilder:_g.default,PostgrestTransformBuilder:Ng.default,PostgrestBuilder:Cg.default,PostgrestError:Pg.default};const Gb=Uy({__proto__:null,get PostgrestBuilder(){return Eg},get PostgrestClient(){return xg},get PostgrestError(){return yg},get PostgrestFilterBuilder(){return kg},get PostgrestQueryBuilder(){return bg},get PostgrestTransformBuilder(){return Sg},default:Tg},[ht]),{PostgrestClient:Qb,PostgrestQueryBuilder:Kk,PostgrestFilterBuilder:Gk,PostgrestTransformBuilder:Qk,PostgrestBuilder:Jk,PostgrestError:Xk}=Tg||Gb;class Jb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Xb="2.84.0",Yb=`realtime-js/${Xb}`,Og="1.0.0",Zb="2.0.0",Dm=Og,wc=1e4,e_=1e3,t_=100;var un;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(un||(un={}));var Ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ve||(Ve={}));var Yt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Yt||(Yt={}));var bc;(function(e){e.websocket="websocket"})(bc||(bc={}));var mn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mn||(mn={}));class r_{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,s,a;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",d=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,p=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+l.length+o.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(m),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,d.length),y.setUint8(v++,l.length),y.setUint8(v++,o.length),y.setUint8(v++,u.length),y.setUint8(v++,this.BINARY_ENCODING),Array.from(d,k=>y.setUint8(v++,k.charCodeAt(0))),Array.from(l,k=>y.setUint8(v++,k.charCodeAt(0))),Array.from(o,k=>y.setUint8(v++,k.charCodeAt(0))),Array.from(u,k=>y.setUint8(v++,k.charCodeAt(0)));var b=new Uint8Array(m.byteLength+p.byteLength);return b.set(new Uint8Array(m),0),b.set(new Uint8Array(p),m.byteLength),b.buffer}_encodeJsonUserBroadcastPush(t){var r,n,s,a;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",d=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,p=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},m=new TextEncoder().encode(JSON.stringify(p)).buffer,y=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+l.length+o.length+u.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let b=new DataView(v),k=0;b.setUint8(k++,this.KINDS.userBroadcastPush),b.setUint8(k++,d.length),b.setUint8(k++,l.length),b.setUint8(k++,o.length),b.setUint8(k++,u.length),b.setUint8(k++,this.JSON_ENCODING),Array.from(d,f=>b.setUint8(k++,f.charCodeAt(0))),Array.from(l,f=>b.setUint8(k++,f.charCodeAt(0))),Array.from(o,f=>b.setUint8(k++,f.charCodeAt(0))),Array.from(u,f=>b.setUint8(k++,f.charCodeAt(0)));var w=new Uint8Array(v.byteLength+m.byteLength);return w.set(new Uint8Array(v),0),w.set(new Uint8Array(m),v.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,a,o,l,d]=n;return r({join_ref:s,ref:a,topic:o,event:l,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let d=this.HEADER_LENGTH+4;const u=n.decode(t.slice(d,d+s));d=d+s;const p=n.decode(t.slice(d,d+a));d=d+a;const h=n.decode(t.slice(d,d+o));d=d+o;const m=t.slice(d,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:p,payload:y};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class Ig{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(be||(be={}));const Rm=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=n_(o,e,t,s),a),{}):{}},n_=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?Ag(a,o):_c(o)},Ag=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return o_(t,r)}switch(e){case be.bool:return s_(t);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return a_(t);case be.json:case be.jsonb:return i_(t);case be.timestamp:return l_(t);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return _c(t);default:return _c(t)}},_c=e=>e,s_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},a_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},i_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},o_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Ag(t,l))}return e},l_=e=>typeof e=="string"?e.replace(" ","T"):e,jg=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class il{constructor(t,r,n={},s=wc){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lm||(Lm={}));class Gs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,s,a,o),this.pendingDiffs.forEach(d=>{this.state=Gs.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gs.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(a,(u,p)=>{o[u]||(d[u]=p)}),this.map(o,(u,p)=>{const h=a[u];if(h){const m=p.map(k=>k.presence_ref),y=h.map(k=>k.presence_ref),v=p.filter(k=>y.indexOf(k.presence_ref)<0),b=h.filter(k=>m.indexOf(k.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(d[u]=b)}else l[u]=p}),this.syncDiff(a,{joins:l,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,d)=>{var u;const p=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(d),p.length>0){const h=t[l].map(y=>y.presence_ref),m=p.filter(y=>h.indexOf(y.presence_ref)<0);t[l].unshift(...m)}n(l,p,d)}),this.map(o,(l,d)=>{let u=t[l];if(!u)return;const p=d.map(h=>h.presence_ref);u=u.filter(h=>p.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,d),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Mm||(Mm={}));var Qs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qs||(Qs={}));var vr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vr||(vr={}));class Md{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new il(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new Ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Gs(this),this.broadcastEndpointURL=jg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Qs.PRESENCE]&&this.bindings[Qs.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(vr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(vr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){t==null||t(vr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,k=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,w=[];for(let f=0;f<k;f++){const g=b[f],{filter:{event:_,schema:E,table:S,filter:O}}=g,C=y&&y[f];if(C&&C.event===_&&C.schema===E&&C.table===S&&C.filter===O)w.push(Object.assign(Object.assign({},g),{id:C.id}));else{this.unsubscribe(),this.state=Ve.errored,t==null||t(vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(vr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ve.errored,t==null||t(vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ve.joined&&t===Qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const u=await l.json();d=u.error||u.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,d;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new il(this,Yt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new il(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>t_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:u,join:p}=Yt;if(n&&[l,d,u,p].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,b,k;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(b=y.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(y=>{var v,b,k,w,f,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const _=y.id,E=(v=y.filter)===null||v===void 0?void 0:v.event;return _&&((b=r.ids)===null||b===void 0?void 0:b.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const _=(f=(w=y==null?void 0:y.filter)===null||w===void 0?void 0:w.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:b,table:k,commit_timestamp:w,type:f,errors:g}=v;m=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:w,eventType:f,new:{},old:{},errors:g}),this._getPayloadRecords(v))}y.callback(m,n)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Md.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Yt.close,{},t)}_onError(t){this._on(Yt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Rm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Rm(t.columns,t.old_record)),r}}const ol=()=>{},ri={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},c_=[1e3,2e3,5e3,1e4],d_=1e4,u_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m_{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wc,this.transport=null,this.heartbeatIntervalMs=ri.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ol,this.ref=0,this.reconnectTimer=null,this.vsn=Dm,this.logger=ol,this.conn=null,this.sendBuffer=[],this.serializer=new r_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${bc.websocket}`,this.httpEndpoint=jg(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case un.connecting:return mn.Connecting;case un.open:return mn.Open;case un.closing:return mn.Closing;default:return mn.Closed}}isConnected(){return this.connectionState()===mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Md(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(e_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ri.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===un.open||this.conn.readyState===un.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Yt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([u_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Yb};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ri.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,o,l,d,u,p,h,m,y;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:wc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ri.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ol,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:Dm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>c_[v-1]||d_,this.vsn){case Og:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(v,b)=>b(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,b)=>b(JSON.parse(v));break;case Zb:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Fd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Te(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class p_ extends Fd{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kc extends Fd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const $d=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),h_=()=>Response,Nc=e=>{if(Array.isArray(e))return e.map(r=>Nc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Nc(n)}),t},f_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ll=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},g_=(e,t,r)=>K(void 0,void 0,void 0,function*(){const n=yield h_();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new p_(ll(s),a,o))}).catch(s=>{t(new kc(ll(s),s))}):t(new kc(ll(e),e))}),y_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(f_(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Sa(e,t,r,n,s,a){return K(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,y_(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>g_(d,l,n))})})}function ga(e,t,r,n){return K(this,void 0,void 0,function*(){return Sa(e,"GET",t,r,n)})}function Jt(e,t,r,n,s){return K(this,void 0,void 0,function*(){return Sa(e,"POST",t,n,s,r)})}function Sc(e,t,r,n,s){return K(this,void 0,void 0,function*(){return Sa(e,"PUT",t,n,s,r)})}function v_(e,t,r,n){return K(this,void 0,void 0,function*(){return Sa(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Ud(e,t,r,n,s){return K(this,void 0,void 0,function*(){return Sa(e,"DELETE",t,n,s,r)})}class x_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return K(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Te(t))return{data:null,error:t};throw t}})}}var Dg;class w_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[Dg]="BlobDownloadBuilder",this.promise=null}asStream(){return new x_(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return K(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Te(t))return{data:null,error:t};throw t}})}}Dg=Symbol.toStringTag;const b_=w_,__={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k_{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=$d(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return K(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Fm),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),d&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(d))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),p=this._getFinalPath(u),h=yield(t=="PUT"?Sc:Jt)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Te(a))return{data:null,error:a};throw a}})}upload(t,r,n){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return K(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const u=Object.assign({upsert:Fm.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",u.cacheControl)):(d=n,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const h=yield Sc(this.fetch,l.toString(),d,{headers:p});return{data:{path:a,fullPath:h.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Te(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return K(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Jt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Fd("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Te(n))return{data:null,error:n};throw n}})}update(t,r,n){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return K(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}copy(t,r,n){return K(this,void 0,void 0,function*(){try{return{data:{path:(yield Jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return K(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield Jt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return K(this,void 0,void 0,function*(){try{const s=yield Jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),d=()=>ga(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new b_(d,this.shouldThrowOnError)}info(t){return K(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ga(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nc(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Te(n))return{data:null,error:n};throw n}})}exists(t){return K(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield v_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Te(n)&&n instanceof kc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return K(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}list(t,r,n){return K(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},__),r),{prefix:t||""});return{data:yield Jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}listV2(t,r){return K(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Jt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Te(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Rg="2.84.0",Lg={"X-Client-Info":`storage-js/${Rg}`};class N_{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lg),r),this.fetch=$d(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return K(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ga(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}getBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield ga(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}createBucket(t){return K(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Te(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return K(this,void 0,void 0,function*(){try{return{data:yield Sc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Te(n))return{data:null,error:n};throw n}})}emptyBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}deleteBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class S_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lg),r),this.fetch=$d(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}listBuckets(t){return K(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ga(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}deleteBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Te(r))return{data:null,error:r};throw r}})}}const zd={"X-Client-Info":`storage-js/${Rg}`,"Content-Type":"application/json"};class Mg extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ot(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class cl extends Mg{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class C_ extends Mg{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var $m;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($m||($m={}));const Bd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),E_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Um=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),P_=(e,t,r)=>K(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new cl(Um(o),s,l))}).catch(()=>{const o=s+"",l=a.statusText||`HTTP ${s} error`;t(new cl(l,s,o))});else{const o=s+"",l=a.statusText||`HTTP ${s} error`;t(new cl(l,s,o))}}else t(new C_(Um(e),e))}),T_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(E_(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function O_(e,t,r,n,s,a){return K(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,T_(t,n,s,a)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;const u=d.headers.get("content-type");return!u||!u.includes("application/json")?{}:d.json()}).then(d=>o(d)).catch(d=>P_(d,l,n))})})}function It(e,t,r,n,s){return K(this,void 0,void 0,function*(){return O_(e,"POST",t,n,s,r)})}class I_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zd),r),this.fetch=Bd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return K(this,void 0,void 0,function*(){try{return{data:(yield It(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getIndex(t,r){return K(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}listIndexes(t){return K(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return K(this,void 0,void 0,function*(){try{return{data:(yield It(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}})}}class A_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zd),r),this.fetch=Bd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return K(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield It(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getVectors(t){return K(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}listVectors(t){return K(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield It(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}queryVectors(t){return K(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteVectors(t){return K(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield It(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}}class j_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zd),r),this.fetch=Bd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return K(this,void 0,void 0,function*(){try{return{data:(yield It(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}getBucket(t){return K(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}listBuckets(){return K(this,arguments,void 0,function*(t={}){try{return{data:yield It(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}deleteBucket(t){return K(this,void 0,void 0,function*(){try{return{data:(yield It(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}})}}class D_ extends j_{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new R_(this.url,this.headers,t,this.fetch)}}class R_ extends I_{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return K(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return K(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return K(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return K(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new L_(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class L_ extends A_{constructor(t,r,n,s,a){super(t,r,a),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return K(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return K(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return K(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return K(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return K(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class M_ extends N_{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new k_(this.url,this.headers,t,this.fetch)}get vectors(){return new D_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new S_(this.url+"/iceberg",this.headers,this.fetch)}}const F_="2.84.0";let Fs="";typeof Deno<"u"?Fs="deno":typeof document<"u"?Fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fs="react-native":Fs="node";const $_={"X-Client-Info":`supabase-js-${Fs}/${F_}`},U_={headers:$_},z_={schema:"public"},B_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V_={},W_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),q_=()=>Headers,H_=(e,t,r)=>{const n=W_(r),s=q_();return async(a,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},o),{headers:u}))}};function K_(e){return e.endsWith("/")?e:e+"/"}function G_(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:d,auth:u,realtime:p,global:h}=t,m={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},p),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function Q_(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(K_(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Fg="2.84.0",Mn=30*1e3,Cc=3,dl=Cc*Mn,J_="http://localhost:9999",X_="supabase.auth.token",Y_={"X-Client-Info":`gotrue-js/${Fg}`},Ec="X-Supabase-Api-Version",$g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Z_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,e1=10*60*1e3;class ya extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Y(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class t1 extends ya{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function r1(e){return Y(e)&&e.name==="AuthApiError"}class pn extends ya{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class tn extends ya{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Pt extends tn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n1(e){return Y(e)&&e.name==="AuthSessionMissingError"}class An extends tn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ni extends tn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class si extends tn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s1(e){return Y(e)&&e.name==="AuthImplicitGrantRedirectError"}class zm extends tn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pc extends tn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ul(e){return Y(e)&&e.name==="AuthRetryableFetchError"}class Bm extends tn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Tc extends tn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vm=` 	
\r=`.split(""),a1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vm.length;t+=1)e[Vm[t].charCodeAt(0)]=-2;for(let t=0;t<Yi.length;t+=1)e[Yi[t].charCodeAt(0)]=t;return e})();function Wm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yi[n]),t.queuedBits-=6}}function Ug(e,t,r){const n=a1[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qm(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{l1(o,n,r)};for(let o=0;o<e.length;o+=1)Ug(e.charCodeAt(o),s,a);return t.join("")}function i1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function o1(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}i1(n,t)}}function l1(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ns(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Ug(e.charCodeAt(s),r,n);return new Uint8Array(t)}function c1(e){const t=[];return o1(e,r=>t.push(r)),new Uint8Array(t)}function yn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Wm(s,r,n)),Wm(null,r,n),t.join("")}function d1(e){return Math.round(Date.now()/1e3)+e}function u1(){return Symbol("auth-callback")}const Ze=()=>typeof window<"u"&&typeof document<"u",sn={tested:!1,writable:!1},zg=()=>{if(!Ze())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sn.tested)return sn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sn.tested=!0,sn.writable=!0}catch{sn.tested=!0,sn.writable=!1}return sn.writable};function m1(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Bg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),p1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},an=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Dr=async(e,t)=>{await e.removeItem(t)};class ko{constructor(){this.promise=new ko.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ko.promiseConstructor=Promise;function ml(e){const t=e.split(".");if(t.length!==3)throw new Tc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Z_.test(t[n]))throw new Tc("JWT not in base64url format");return{header:JSON.parse(qm(t[0])),payload:JSON.parse(qm(t[1])),signature:ns(t[2]),raw:{header:t[0],payload:t[1]}}}async function h1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function f1(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function g1(e){return("0"+e.toString(16)).substr(-2)}function y1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,g1).join("")}async function v1(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function x1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await v1(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jn(e,t,r=!1){const n=y1();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fn(e,`${t}-code-verifier`,s);const a=await x1(n);return[a,n===a?"plain":"s256"]}const w1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b1(e){const t=e.headers.get(Ec);if(!t||!t.match(w1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function k1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dn(e){if(!N1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pl(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function S1(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Hm(e){return JSON.parse(JSON.stringify(e))}const cn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C1=[502,503,504];async function Km(e){var t;if(!p1(e))throw new Pc(cn(e),0);if(C1.includes(e.status))throw new Pc(cn(e),e.status);let r;try{r=await e.json()}catch(a){throw new pn(cn(a),a)}let n;const s=b1(e);if(s&&s.getTime()>=$g["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Bm(cn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Bm(cn(r),e.status,r.weak_password.reasons);throw new t1(cn(r),e.status||500,n)}const E1=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function re(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Ec]||(a[Ec]=$g["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await P1(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function P1(e,t,r,n,s,a){const o=E1(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new Pc(cn(d),0)}if(l.ok||await Km(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await Km(d)}}function Gt(e){var t;let r=null;I1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=d1(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Gm(e){const t=Gt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $r(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T1(e){return{data:e,error:null}}function O1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=ws(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function Qm(e){return e}function I1(e){return e.access_token&&e.refresh_token&&e.expires_in}const hl=["global","local","others"];class A1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Bg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=hl[0]){if(hl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hl.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$r})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ws(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:O1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Y(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$r})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},p=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qm});if(p.error)throw p.error;const h=await p.json(),m=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(d=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Dn(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$r})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Dn(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$r})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Dn(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$r})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Dn(t.userId);try{const{data:r,error:n}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Dn(t.userId),Dn(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},p=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qm});if(p.error)throw p.error;const h=await p.json(),m=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(d=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}}function Jm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Rn={debug:!!(globalThis&&zg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class j1 extends Vg{}async function D1(e,t,r){Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new j1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Rn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function R1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function L1(e){return parseInt(e,16)}function M1(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function F1(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:d,resources:u,scheme:p,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=Wg(e.address),v=p?`${p}://${n}`:n,b=e.statement?`${e.statement}
`:"",k=`${v} wants you to sign in with your Ethereum account:
${y}

${b}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),d&&(w+=`
Request ID: ${d}`),u){let f=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);f+=`
- ${g}`}w+=f}return`${k}
${w}`}class ze extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Zi extends ze{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function $1({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ze({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(qg(o)){if(a.rp.id!==o)return new ze({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function U1({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ze({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(qg(n)){if(r.rpId!==n)return new ze({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class z1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const B1=new z1;function V1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ws(e,["challenge","user","excludeCredentials"]),a=ns(t).buffer,o=Object.assign(Object.assign({},r),{id:ns(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const u=n[d];l.excludeCredentials[d]=Object.assign(Object.assign({},u),{id:ns(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function W1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ws(e,["challenge","allowCredentials"]),s=ns(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ns(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function q1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:yn(new Uint8Array(e.response.attestationObject)),clientDataJSON:yn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function H1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:yn(new Uint8Array(s.authenticatorData)),clientDataJSON:yn(new Uint8Array(s.clientDataJSON)),signature:yn(new Uint8Array(s.signature)),userHandle:s.userHandle?yn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Xm(){var e,t;return!!(Ze()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function K1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zi("Browser returned unexpected credential type",t)}:{data:null,error:new Zi("Empty credential response",t)}}catch(t){return{data:null,error:$1({error:t,options:e})}}}async function G1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zi("Browser returned unexpected credential type",t)}:{data:null,error:new Zi("Empty credential response",t)}}catch(t){return{data:null,error:U1({error:t,options:e})}}}const Q1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function eo(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(t(o)){const l=n[a];t(l)?n[a]=eo(l,o):n[a]=eo(o)}else n[a]=o}return n}function X1(e,t){return eo(Q1,e,t||{})}function Y1(e,t){return eo(J1,e,t||{})}class Z1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const d=s??B1.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=X1(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:p,error:h}=await K1({publicKey:u,signal:d});return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:h}}case"request":{const u=Y1(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:p,error:h}=await G1(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:d}));return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:h}}}}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new pn("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new ya("rpId is required for WebAuthn authentication")};try{if(!Xm())return{data:null,error:new pn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new pn("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new ya("rpId is required for WebAuthn registration")};try{if(!Xm())return{data:null,error:new pn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(p=>{var h;return(h=p.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:l};const{data:d,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new pn("Unexpected error in register",o)}}}}R1();const ek={url:J_,storageKey:X_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ym(e,t,r){return await r()}const Ln={};class va{get jwks(){var t,r;return(r=(t=Ln[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ln[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},ek),t);if(this.storageKey=a.storageKey,this.instanceID=(r=va.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,va.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ze()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new A1({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Bg(a.fetch),this.lock=a.lock||Ym,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ze()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=D1:this.lock=Ym,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Z1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:zg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Jm(this.memoryStorage)),Ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Fg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ze()&&(r=m1(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ze()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),s1(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Y(r)?this._returnResult({error:r}):this._returnResult({error:new pn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Gt}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(a){if(Y(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:p,password:h,options:m}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await jn(this.storage,this.storageKey)),a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:p,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:v},xform:Gt})}else if("phone"in t){const{phone:p,password:h,options:m}=t;a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Gt})}else throw new ni("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(a){if(Y(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gm})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gm})}else throw new ni("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new An;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Y(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,o,l,d,u,p,h,m;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:b,wallet:k,statement:w,options:f}=t;let g;if(Ze())if(typeof k=="object")g=k;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")g=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=k}const _=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href),E=await g.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Wg(E[0]);let O=(n=f==null?void 0:f.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const P=await g.request({method:"eth_chainId"});O=L1(P)}const C={domain:_.host,address:S,statement:w,uri:_.href,version:"1",chainId:O,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=f==null?void 0:f.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(p=f==null?void 0:f.signInWithEthereum)===null||p===void 0?void 0:p.resources};y=F1(C),v=await g.request({method:"personal_sign",params:[M1(y),S]})}try{const{data:b,error:k}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Gt});if(k)throw k;if(!b||!b.session||!b.user){const w=new An;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:k})}catch(b){if(Y(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var r,n,s,a,o,l,d,u,p,h,m,y;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:k,wallet:w,statement:f,options:g}=t;let _;if(Ze())if(typeof w=="object")_=w;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const E=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),f?{statement:f}:null));let O;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")O=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)O=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)v=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),b=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(p=g==null?void 0:g.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:k,error:w}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:yn(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Gt});if(w)throw w;if(!k||!k.session||!k.user){const f=new An;return this._returnResult({data:{user:null,session:null},error:f})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:w})}catch(k){if(Y(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await an(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Gt});if(await Dr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new An;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Y(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Gt}),{data:d,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d||!d.session||!d.user){const p=new An;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:u})}catch(r){if(Y(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:d}=t;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await jn(this.storage,this.storageKey));const{error:h}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:d}=t,{data:u,error:p}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p})}throw new ni("You must provide either an email or phone number.")}catch(l){if(Y(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Gt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(s){if(Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,a,o;try{let l=null,d=null;this.flowType==="pkce"&&([l,d]=await jn(this.storage,this.storageKey));const u=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:T1});return!((a=u.data)===null||a===void 0)&&a.url&&Ze()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(Y(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Pt;const{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Y(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new ni("You must provide either an email or phone number and a type")}catch(r){if(Y(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await an(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<dl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await an(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=pl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=S1(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$r}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:$r})})}catch(r){if(Y(r))return n1(r)&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Pt;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await jn(this.storage,this.storageKey));const{data:u,error:p}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:$r});if(p)throw p;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(Y(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pt;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=ml(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Y(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Pt;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Y(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ze())throw new si("No browser detected.");if(t.error||t.error_description||t.error_code)throw new si(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new si("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new zm("No code detected.");const{data:f,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=t;if(!a||!l||!o||!u)throw new si("No session defined in URL");const p=Math.round(Date.now()/1e3),h=parseInt(l);let m=p+h;d&&(m=parseInt(d));const y=m-p;y*1e3<=Mn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=m-h;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,p);const{data:b,error:k}=await this._getUser(a);if(k)throw k;const w={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(n){if(Y(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await an(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(r1(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=u1(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await jn(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Y(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,d,u,p;const{data:h,error:m}=a;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Ze()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Y(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:o,provider:l,token:d,access_token:u,nonce:p}=t,h=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:d,access_token:u,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gt}),{data:m,error:y}=h;return y?this._returnResult({data:{user:null,session:null},error:y}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new An}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:y}))}catch(s){if(Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await f1(async s=>(s>0&&await h1(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gt})),(s,a)=>{const o=200*Math.pow(2,s);return a&&ul(a)&&Date.now()+o-n<Mn})}catch(n){if(this._debug(r,"error",n),Y(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ze()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await an(this.storage,this.storageKey);if(s&&this.userStorage){let o=await an(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:pl()}else if(s&&!s.user&&!s.user){const o=await an(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Dr(this.storage,this.storageKey+"-user"),await Fn(this.storage,this.storageKey,s)):s.user=pl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<dl;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${dl}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ul(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ko;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Pt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Y(a)){const o={data:null,error:a};return ul(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Hm(s);await Fn(this.storage,this.storageKey,a)}else{const s=Hm(r);await Fn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Dr(this.storage,this.storageKey),await Dr(this.storage,this.storageKey+"-code-verifier"),await Dr(this.storage,this.storageKey+"-user"),this.userStorage&&await Dr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ze()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Mn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mn}ms, refresh threshold is ${Cc} ticks`),s<=Cc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Vg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ze()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await jn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?q1(t.webauthn.credential_response):H1(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:d}))})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:V1(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:W1(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ml(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Pt})})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Pt});const o=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ze()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Pt});const o=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ze()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Pt})})}catch(t){if(Y(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Pt})})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+e1>s)return n;const{data:a,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});n=y.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:d}}=ml(n);r!=null&&r.allowExpired||_1(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:a,header:s,signature:o},error:null}}const p=k1(s.alg),h=await crypto.subtle.importKey("jwk",u,p,!0,["verify"]);if(!await crypto.subtle.verify(p,h,o,c1(`${l}.${d}`)))throw new Tc("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}}va.nextInstanceID={};const tk=va;class rk extends tk{constructor(t){super(t)}}class nk{constructor(t,r,n){var s,a,o;this.supabaseUrl=t,this.supabaseKey=r;const l=Q_(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:z_,realtime:V_,auth:Object.assign(Object.assign({},B_),{storageKey:d}),global:U_},p=G_(n??{},u);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=H_(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Qb(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new M_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Hb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:o,flowType:l,lock:d,debug:u,throwOnError:p},h,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rk({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:d,debug:u,throwOnError:p,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new m_(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sk=(e,t,r)=>new nk(e,t,r);function ak(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ak()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ik="https://mdjbetqfvelzlbntygyi.supabase.co",ok="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1kamJldHFmdmVsemxibnR5Z3lpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MTc5MTksImV4cCI6MjA3ODQ5MzkxOX0.3fn1bLRSbNVWDfLpYzL0QvT7yeHSv74oIDZyjuWufwU",me=sk(ik,ok),lk=({storeSettings:e,onUpdateSettings:t,showAlert:r,t:n})=>{const[s,a]=x.useState({en:"",th:""}),[o,l]=x.useState({en:"",th:""}),[d,u]=x.useState({en:"",th:""}),[p,h]=x.useState({en:"",th:""}),[m,y]=x.useState(""),[v,b]=x.useState(20),[k,w]=x.useState(10),[f,g]=x.useState(!1);x.useEffect(()=>{e&&(a(e.store_name||{en:"",th:""}),l(e.address||{en:"",th:""}),u(e.phone||{en:"",th:""}),h(e.tax_id||{en:"",th:""}),y(e.logo_url||""),b(e.default_outsource_markup??20),w(e.delivery_rate_per_km??10))},[e]);const _=P=>{P.preventDefault(),t({store_name:s,address:o,phone:d,tax_id:p,logo_url:m,default_outsource_markup:Number(v),delivery_rate_per_km:Number(k)})},E=x.useCallback(async P=>{const N=P[0];if(!N)return;g(!0);const I=`${Date.now()}-${N.name.replace(/\s/g,"-")}`,{data:A,error:T}=await me.storage.from("store-assets").upload(I,N);if(T){r("Upload Error",`Failed to upload logo: ${T.message}. Please ensure you have created a public 'store-assets' bucket with insert permissions.`),console.error("Logo upload error:",T),g(!1);return}const{data:{publicUrl:R}}=me.storage.from("store-assets").getPublicUrl(I);y(R),g(!1)},[r]),{getRootProps:S,getInputProps:O,isDragActive:C}=jd({onDrop:E,accept:{"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/gif":[".gif"]},maxFiles:1,multiple:!1});return i("div",{className:"max-w-4xl mx-auto space-y-8",children:c("div",{className:"bg-surface rounded-lg shadow",children:[c("div",{className:"p-6 border-b",children:[c("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[i(uc,{className:"h-6 w-6"}),"Store Settings"]}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Manage your store's branding, contact information, and documentation details."})]}),c("form",{onSubmit:_,children:[c("div",{className:"p-6 space-y-8",children:[c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c("div",{className:"md:col-span-1",children:[i("h3",{className:"font-semibold text-text-primary",children:"Store Logo"}),i("p",{className:"text-xs text-text-secondary",children:"Upload your company logo. This will appear in the sidebar."})]}),c("div",{className:"md:col-span-2",children:[c("div",{...S(),className:`flex flex-col items-center justify-center w-full px-6 py-8 border-2 border-gray-300 border-dashed rounded-md cursor-pointer transition-colors ${C?"bg-blue-50 border-primary":"bg-background hover:bg-gray-100"}`,children:[i("input",{...O()}),f?i("p",{children:"Uploading..."}):m?i("img",{src:m,alt:"Logo preview",className:"max-h-24"}):c("div",{className:"text-center",children:[i(vs,{className:"mx-auto h-10 w-10 text-gray-400"}),c("p",{className:"mt-2 text-sm text-text-secondary",children:[i("span",{className:"font-semibold text-primary",children:"Click to upload"})," or drag and drop"]}),i("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF"})]})]}),i("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Click the image or drop a new file to replace."})]})]}),i("div",{className:"border-t"}),c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c("div",{className:"md:col-span-1",children:[i("h3",{className:"font-semibold text-text-primary",children:"Store Information"}),i("p",{className:"text-xs text-text-secondary",children:"Used for receipts and delivery notes. Provide both English and Thai versions."})]}),c("div",{className:"md:col-span-2 space-y-4",children:[c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Store Name (EN)"}),i("input",{type:"text",value:s.en,onChange:P=>a(N=>({...N,en:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Store Name (TH)"}),i("input",{type:"text",value:s.th,onChange:P=>a(N=>({...N,th:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Tax ID"}),c("div",{className:"grid grid-cols-2 gap-4",children:[i("input",{type:"text",placeholder:"English (Optional)",value:p.en,onChange:P=>h(N=>({...N,en:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"}),i("input",{type:"text",placeholder:"Thai",value:p.th,onChange:P=>h(N=>({...N,th:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Phone Number"}),c("div",{className:"grid grid-cols-2 gap-4",children:[i("input",{type:"tel",placeholder:"English (Optional)",value:d.en,onChange:P=>u(N=>({...N,en:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"}),i("input",{type:"tel",placeholder:"Thai",value:d.th,onChange:P=>u(N=>({...N,th:P.target.value})),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"})]})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Address"}),i("textarea",{placeholder:"English Address",value:o.en,onChange:P=>l(N=>({...N,en:P.target.value})),rows:2,className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300"}),i("textarea",{placeholder:"Thai Address",value:o.th,onChange:P=>l(N=>({...N,th:P.target.value})),rows:2,className:"mt-2 block w-full rounded-md p-2 bg-background border-gray-300"})]})]})]}),i("div",{className:"border-t"}),c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c("div",{className:"md:col-span-1",children:[i("h3",{className:"font-semibold text-text-primary",children:"Outsource Settings"}),i("p",{className:"text-xs text-text-secondary",children:"Set the default price markup for items bought from external suppliers."})]}),c("div",{className:"md:col-span-2",children:[i("label",{className:"block text-sm font-medium text-text-secondary",children:"Default Markup Percentage (%)"}),i("input",{type:"number",value:v,onChange:P=>b(P.target.value===""?"":Number(P.target.value)),className:"mt-1 block w-full max-w-xs rounded-md p-2 bg-background border-gray-300"})]})]}),i("div",{className:"border-t"}),c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c("div",{className:"md:col-span-1",children:[i("h3",{className:"font-semibold text-text-primary",children:"Delivery Settings"}),i("p",{className:"text-xs text-text-secondary",children:"Set the default rate for distance-based delivery fees."})]}),c("div",{className:"md:col-span-2",children:[c("label",{className:"block text-sm font-medium text-text-secondary",children:[n("default_delivery_rate")," ()"]}),i("input",{type:"number",value:k,onChange:P=>w(P.target.value===""?"":Number(P.target.value)),className:"mt-1 block w-full max-w-xs rounded-md p-2 bg-background border-gray-300"})]})]})]}),i("div",{className:"bg-background px-6 py-4 flex justify-end rounded-b-lg",children:i("button",{type:"submit",className:"px-6 py-2 bg-primary text-white font-semibold rounded-md hover:bg-blue-800",children:"Save Settings"})})]})]})})},ck=({onLogin:e,storeSettings:t,language:r,setLanguage:n,t:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState(""),[u,p]=x.useState(!1),h=m=>{m.preventDefault(),e(a,l)};return i("div",{className:"flex items-center justify-center min-h-screen bg-background",children:c("div",{className:"w-full max-w-md p-8 space-y-6 bg-surface rounded-xl shadow-lg",children:[c("div",{className:"text-center",children:[i("div",{className:"flex justify-center items-center gap-3 mb-4",children:t!=null&&t.logo_url?i("img",{src:t.logo_url,alt:"Store Logo",className:"h-[4.5rem] w-auto"}):i(yf,{className:"h-14 w-14 text-primary"})}),i("h1",{className:"text-2xl font-bold text-text-primary",children:t!=null&&t.store_name?t.store_name[r]:" "}),i("p",{className:"mt-2 text-sm text-text-secondary",children:s("please_sign_in")})]}),i("div",{className:"flex justify-center",children:c("div",{className:"relative",children:[c("select",{value:r,onChange:m=>n(m.target.value),className:"appearance-none bg-background border border-gray-300 rounded-md pl-8 pr-4 py-1.5 text-sm font-medium text-text-primary focus:outline-none focus:ring-1 focus:ring-primary","aria-label":"Select language",children:[i("option",{value:"en",children:"English"}),i("option",{value:"th",children:""})]}),i(Sd,{className:"h-5 w-5 text-gray-400 absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none"})]})}),c("form",{className:"space-y-6",onSubmit:h,children:[c("div",{className:"rounded-md shadow-sm -space-y-px",children:[c("div",{children:[i("label",{htmlFor:"username",className:"sr-only",children:"Username"}),i("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:a,onChange:m=>o(m.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:s("username_placeholder")})]}),c("div",{children:[i("label",{htmlFor:"password-input",className:"sr-only",children:"Password"}),c("div",{className:"relative",children:[i("input",{id:"password-input",name:"password",type:u?"text":"password",autoComplete:"current-password",required:!0,value:l,onChange:m=>d(m.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:s("password_placeholder")}),i("button",{type:"button",onClick:()=>p(m=>!m),className:"absolute inset-y-0 right-0 z-20 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":u?"Hide password":"Show password",children:u?i(xi,{className:"h-5 w-5"}):i(wn,{className:"h-5 w-5"})})]})]})]}),i("div",{children:i("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:s("sign_in")})})]})]})})},dk=({bills:e,suppliers:t,currentUser:r,onAddBillClick:n,onImportBillsClick:s,onPayBillClick:a,onDeleteBill:o,t:l,language:d})=>{var P,N;const[u,p]=x.useState(""),[h,m]=x.useState("All"),[y,v]=x.useState(null),[b,k]=x.useState(null),w=x.useMemo(()=>new Map(t.map(I=>[I.id,I.name])),[t]),f=(P=r.permissions)==null?void 0:P.accounts_payable.write,g=(N=r.permissions)==null?void 0:N.accounts_payable.delete,_=x.useMemo(()=>{const I=new Date;return I.setHours(0,0,0,0),e.map(A=>{let T=A.status;return A.status===Ue.DUE&&new Date(A.dueDate)<I&&(T=Ue.OVERDUE),{...A,status:T}})},[e]),E=x.useMemo(()=>{const I=_.filter(L=>L.status!==Ue.PAID),A=I.reduce((L,j)=>L+(j.amount-j.paidAmount),0),R=I.filter(L=>L.status===Ue.OVERDUE).reduce((L,j)=>L+(j.amount-j.paidAmount),0),$=new Date;$.setHours(0,0,0,0);const J=new Date($);J.setDate($.getDate()+7);const D=I.filter(L=>{const j=new Date(L.dueDate);return j.setHours(0,0,0,0),j>=$&&j<=J}).reduce((L,j)=>L+(j.amount-j.paidAmount),0);return{totalOwed:A,overdueAmount:R,dueSoonAmount:D}},[_]),S=x.useMemo(()=>{if(y){const I=_.filter(T=>T.status!==Ue.PAID),A=new Date;switch(A.setHours(0,0,0,0),y){case"total":return I;case"overdue":return I.filter(R=>R.status===Ue.OVERDUE);case"dueSoon":const T=new Date(A);return T.setDate(A.getDate()+7),I.filter(R=>{const $=new Date(R.dueDate);return $.setHours(0,0,0,0),$>=A&&$<=T});default:return[]}}return _.filter(I=>{const A=u.toLowerCase(),T=!A||I.invoiceNumber.toLowerCase().includes(A)||(w.get(I.supplierId)||"").toLowerCase().includes(A),R=h==="All"||h==="Due"&&I.status===Ue.DUE||h==="Overdue"&&I.status===Ue.OVERDUE||h==="Paid"&&I.status===Ue.PAID;return T&&R})},[_,u,h,w,y]),O=I=>{switch(I){case Ue.PAID:return{text:l("bill_status_paid"),color:"bg-green-100 text-green-800"};case Ue.OVERDUE:return{text:l("bill_status_overdue"),color:"bg-red-100 text-red-800"};case Ue.DUE:return{text:l("bill_status_due"),color:"bg-yellow-100 text-yellow-800"};default:return{text:I,color:"bg-gray-100 text-gray-800"}}},C=I=>{v(A=>A===I?null:I)};return c("div",{className:"space-y-6",children:[c("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i(Ne,{title:l("total_owed"),value:`${E.totalOwed.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-orange-500",isClickable:!0,onClick:()=>C("total"),className:y==="total"?"ring-2 ring-primary":""}),i(Ne,{title:l("overdue_bills"),value:`${E.overdueAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(Cn,{className:"h-6 w-6"}),color:"text-red-500",isClickable:!0,onClick:()=>C("overdue"),className:y==="overdue"?"ring-2 ring-primary":""}),i(Ne,{title:l("due_in_days",{days:7}),value:`${E.dueSoonAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(Wi,{className:"h-6 w-6"}),color:"text-blue-500",isClickable:!0,onClick:()=>C("dueSoon"),className:y==="dueSoon"?"ring-2 ring-primary":""})]}),c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[c("div",{className:"flex items-center gap-2",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:l("bills")}),y&&i("button",{onClick:()=>v(null),className:"text-xs font-semibold text-primary hover:underline",children:l("clear_filter")})]}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[c("div",{className:"relative",children:[i("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i(ar,{className:"h-5 w-5 text-gray-400"})}),i("input",{type:"text",placeholder:l("search_invoice_or_supplier"),value:u,onChange:I=>p(I.target.value),className:"block w-full max-w-xs pl-10 pr-3 py-2 border border-gray-300 rounded-md bg-background",disabled:!!y})]}),c("select",{value:h,onChange:I=>m(I.target.value),className:"block w-full sm:w-auto pl-3 pr-8 py-2 border border-gray-300 rounded-md bg-background",disabled:!!y,children:[i("option",{value:"All",children:l("all_statuses")}),i("option",{value:"Due",children:l("bill_status_due")}),i("option",{value:"Overdue",children:l("bill_status_overdue")}),i("option",{value:"Paid",children:l("bill_status_paid")})]}),f&&c(Re,{children:[c("button",{onClick:s,className:"flex items-center gap-2 bg-blue-500 text-white font-medium px-4 py-2 rounded-md hover:bg-blue-600",children:[i(vs,{className:"h-5 w-5"}),l("import_bills")]}),c("button",{onClick:n,className:"flex items-center gap-2 bg-primary text-white font-medium px-4 py-2 rounded-md hover:bg-blue-800",children:[i(Rt,{className:"h-5 w-5"}),l("add_bill")]})]})]})]}),c("div",{className:"overflow-x-auto",children:[c("table",{className:"w-full text-sm text-left",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{scope:"col",className:"px-6 py-3",children:l("suppliers")}),i("th",{scope:"col",className:"px-6 py-3",children:l("invoice_number")}),i("th",{scope:"col",className:"px-6 py-3",children:l("due_date")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:l("amount")}),i("th",{scope:"col",className:"px-6 py-3 text-right",children:l("balance_due")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("status")}),i("th",{scope:"col",className:"px-6 py-3 text-center",children:l("actions")})]})}),i("tbody",{children:S.map(I=>{const A=O(I.status),T=I.amount-I.paidAmount;return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium",children:w.get(I.supplierId)||"Unknown"}),i("td",{className:"px-6 py-4",children:I.invoiceNumber}),i("td",{className:`px-6 py-4 ${I.status===Ue.OVERDUE?"text-red-600 font-bold":""}`,children:new Date(I.dueDate).toLocaleDateString()}),c("td",{className:"px-6 py-4 text-right font-semibold",children:["",I.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:["",T.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"px-6 py-4 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A.color}`,children:A.text})}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex justify-center gap-2",children:[I.status!==Ue.PAID&&f&&i("button",{onClick:()=>a(I),className:"text-xs px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700",children:l("record_payment")}),g&&i("button",{onClick:()=>k(I),className:"text-red-600 hover:text-red-800 p-1",title:l("delete_bill_title"),children:i(sr,{className:"h-4 w-4"})})]})})]},I.id)})})]}),S.length===0&&c("div",{className:"text-center p-12 text-text-secondary",children:[i(pr,{className:"mx-auto h-12 w-12 text-gray-400"}),i("p",{className:"font-semibold mt-4 text-lg text-text-primary",children:l("no_bills_found")}),i("p",{className:"text-sm mt-1",children:l("try_adjusting_filters")})]})]})]}),i(fr,{isOpen:!!b,onClose:()=>k(null),onConfirm:()=>{b&&o(b.id),k(null)},title:l("delete_bill_title"),message:l("delete_bill_message",{invoiceNumber:(b==null?void 0:b.invoiceNumber)||""}),t:l})]})},uk=({transactions:e,customers:t,currentUser:r,onReceivePaymentClick:n,onCreateConsolidatedInvoice:s,onRecordPastInvoiceClick:a,onImportPastInvoicesClick:o,onEditPastInvoiceClick:l,onUndoConsolidationClick:d,t:u,language:p,viewState:h,onNavigate:m})=>{const[y,v]=x.useState(!1),[b,k]=x.useState({}),w=x.useMemo(()=>r.role.includes(oe.ADMIN)||r.role.includes(oe.ACCOUNT_MANAGER),[r]),f=(h==null?void 0:h.filter)==="today",g=x.useMemo(()=>{let P=e.filter(N=>N.payment_status===ie.UNPAID||N.payment_status===ie.PARTIALLY_PAID||N.id.startsWith("C-INV-"));if(f){const N=new Date().toDateString();P=P.filter(I=>I.payment_status===ie.UNPAID&&new Date(I.date).toDateString()===N)}return P.sort((N,I)=>new Date(N.date).getTime()-new Date(I.date).getTime())},[e,f]),_=x.useMemo(()=>g.reduce((P,N)=>P+(N.total-N.paid_amount),0),[g]),E=x.useMemo(()=>{const P={};for(const N of g)if(N.customerId){if(!P[N.customerId]){const I=t.find(A=>A.id===N.customerId);I&&(P[N.customerId]={customer:I,transactions:[],total_due:0})}P[N.customerId]&&(P[N.customerId].transactions.push(N),P[N.customerId].total_due+=N.total-N.paid_amount)}return Object.values(P).sort((N,I)=>I.total_due-N.total_due)},[g,t]),S=(P,N)=>{k(I=>{const A={...I};return A[P]||(A[P]=new Set),A[P].has(N)?A[P].delete(N):A[P].add(N),A})},O=P=>{const N=b[P.id]||new Set;if(N.size<2){alert("Please select at least two invoices to consolidate.");return}const I=g.filter(A=>N.has(A.id));s(P,I),k(A=>({...A,[P.id]:new Set}))},C=P=>{if(P.id.startsWith("C-INV-")&&P.payment_status===ie.UNPAID)return{text:"Consolidated",color:"bg-purple-100 text-purple-800"};if(P.payment_status===ie.UNPAID&&P.due_date&&new Date(P.due_date)<new Date)return{text:u("overdue"),color:"bg-red-100 text-red-800"};switch(P.payment_status){case ie.UNPAID:return{text:u("unpaid"),color:"bg-yellow-100 text-yellow-800"};case ie.PARTIALLY_PAID:return{text:u("partially_paid"),color:"bg-blue-100 text-blue-800"};default:return{text:P.payment_status,color:"bg-gray-100 text-gray-800"}}};return c("div",{className:"space-y-6",children:[c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i(Ne,{title:u("total_receivables"),value:`${_.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-orange-500"}),i(Ne,{title:"Customers with Debt",value:E.length.toLocaleString(),icon:i(Pd,{className:"h-6 w-6"}),color:"text-blue-500"})]}),c("div",{className:"bg-surface rounded-lg shadow overflow-hidden",children:[c("div",{className:"p-4 border-b flex flex-wrap gap-4 justify-between items-center",children:[c("div",{className:"flex items-center gap-2",children:[i("h3",{className:"text-lg font-semibold",children:u("accounts_receivable")}),f&&i("button",{onClick:()=>m("accounts_receivable"),className:"text-xs font-semibold text-primary hover:underline",children:u("clear_filter")})]}),c("div",{className:"flex items-center gap-2 flex-wrap",children:[w&&c(Re,{children:[c("button",{onClick:a,className:"flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-md bg-secondary text-white hover:bg-orange-700",children:[i(Rt,{className:"h-4 w-4"})," ",u("record_past_invoice")]}),c("button",{onClick:o,className:"flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600",children:[i(Na,{className:"h-4 w-4"})," ",u("import_past_invoices")]})]}),i("button",{onClick:()=>v(!y),className:"px-4 py-2 bg-gray-200 text-sm font-medium rounded-md hover:bg-gray-300",children:u(y?"show_all_invoices":"group_by_customer")})]})]}),y?i("div",{className:"divide-y",children:E.map(({customer:P,transactions:N,total_due:I})=>{var A;return c("div",{className:"p-4",children:[c("div",{className:"flex justify-between items-center",children:[c("div",{children:[i("p",{className:"font-bold text-lg",children:P.name}),c("p",{className:"text-sm text-text-secondary",children:[N.length," Invoices - Total Due: ",c("span",{className:"font-semibold text-red-600",children:["",I.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),i("button",{onClick:()=>O(P),disabled:(((A=b[P.id])==null?void 0:A.size)||0)<2,className:"px-3 py-1.5 bg-primary text-white text-xs font-bold rounded-md hover:bg-blue-800 disabled:bg-gray-300",children:u("create_consolidated_invoice")})]}),i("div",{className:"mt-2 space-y-1 pl-4 border-l-2",children:N.map(T=>{var R;return c("div",{className:"flex items-center gap-2 p-1 rounded hover:bg-background",children:[i("input",{type:"checkbox",checked:(R=b[P.id])==null?void 0:R.has(T.id),onChange:()=>S(P.id,T.id),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),i("p",{className:"flex-1 text-sm font-mono",children:T.id}),c("p",{className:"text-sm",children:["Balance: ",c("span",{className:"font-semibold",children:["",(T.total-T.paid_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("p",{className:"text-xs text-text-secondary",children:["Due: ",T.due_date?new Date(T.due_date).toLocaleDateString():"N/A"]})]},T.id)})})]},P.id)})}):i("div",{className:"overflow-x-auto",children:c("table",{className:"w-full text-sm",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{className:"px-6 py-3",children:"Invoice ID"}),i("th",{className:"px-6 py-3",children:"Customer"}),i("th",{className:"px-6 py-3 text-right",children:u("total")}),i("th",{className:"px-6 py-3 text-right",children:u("balance_due")}),i("th",{className:"px-6 py-3 text-center",children:u("status")}),i("th",{className:"px-6 py-3 text-center",children:u("actions")})]})}),i("tbody",{children:g.map(P=>{const N=C(P),I=P.id.startsWith("PAST-"),A=P.id.startsWith("C-INV-");return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-mono text-xs",children:P.id}),i("td",{className:"px-6 py-4 font-medium",children:P.customerName}),c("td",{className:"px-6 py-4 text-right",children:["",P.total.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:["",(P.total-P.paid_amount).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),i("td",{className:"px-6 py-4 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.color}`,children:N.text})}),i("td",{className:"px-6 py-4 text-center",children:c("div",{className:"flex items-center justify-center gap-2",children:[w&&i("button",{onClick:()=>n(P),className:"text-xs px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700",children:u("receive_payment")}),I&&w&&i("button",{onClick:()=>l(P),className:"text-primary hover:text-blue-700 p-1",title:"Edit Past Invoice",children:i(Tn,{className:"h-4 w-4"})}),A&&w&&i("button",{onClick:()=>d(P),className:"text-yellow-600 hover:text-yellow-800 p-1",title:u("undo_consolidation"),children:i(gf,{className:"h-4 w-4"})}),P.file_url&&i("a",{href:P.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-primary p-1",title:"View attached invoice",children:i(ha,{className:"h-4 w-4"})})]})})]},P.id)})})]})})]})]})},mk=({isOpen:e,onClose:t,lowStockVariants:r,products:n,t:s,language:a})=>e?(x.useMemo(()=>new Map(n.map(o=>[o.id,o])),[n]),i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4",onClick:o=>o.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:s("low_stock_items")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:r.length>0?c("table",{className:"w-full text-sm text-left",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{className:"px-6 py-3",children:s("product")}),i("th",{className:"px-6 py-3",children:s("size")}),i("th",{className:"px-6 py-3",children:s("sku")}),i("th",{className:"px-6 py-3 text-right",children:s("stock")})]})}),i("tbody",{children:r.map(o=>{const l=n.find(d=>d.variants.some(u=>u.id===o.id));return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-6 py-4 font-medium",children:(l==null?void 0:l.name[a])||"N/A"}),i("td",{className:"px-6 py-4",children:o.size}),i("td",{className:"px-6 py-4 font-mono text-xs",children:o.sku}),i("td",{className:"px-6 py-4 text-right font-bold text-yellow-600",children:o.stock})]},o.id)})})]}):i("p",{className:"text-center text-text-secondary p-8",children:s("no_low_stock_items")})}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:w-auto sm:text-sm",children:s("close")})})]})})):null,pk=({isOpen:e,onClose:t,title:r,bills:n,suppliers:s,t:a,onRecordPaymentClick:o})=>{if(!e)return null;const l=x.useMemo(()=>new Map(s.map(d=>[d.id,d.name])),[s]);return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-4xl m-4",onClick:d=>d.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:r}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:n.length>0?c("table",{className:"w-full text-sm text-left",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{className:"px-4 py-3",children:a("invoice_number")}),i("th",{className:"px-4 py-3",children:a("suppliers")}),i("th",{className:"px-4 py-3",children:a("due_date")}),i("th",{className:"px-4 py-3 text-right",children:a("amount")}),i("th",{className:"px-4 py-3 text-right",children:a("balance_due")}),o&&i("th",{className:"px-4 py-3 text-center",children:a("actions")})]})}),i("tbody",{children:n.map(d=>{const u=d.status===Ue.DUE&&new Date(d.dueDate)<new Date,p=d.amount-(d.paidAmount||0);return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-4 py-3 font-mono text-xs",children:d.invoiceNumber}),i("td",{className:"px-4 py-3",children:l.get(d.supplierId)||"Unknown"}),i("td",{className:`px-4 py-3 ${u?"text-red-600 font-bold":""}`,children:new Date(d.dueDate).toLocaleDateString()}),c("td",{className:"px-4 py-3 text-right font-semibold",children:["",d.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),c("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),o&&i("td",{className:"px-4 py-3 text-center",children:p>0&&i("button",{onClick:()=>o(d),className:"text-xs px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700",children:a("record_payment")})})]},d.id)})})]}):i("p",{className:"text-center text-text-secondary p-8",children:a("no_bills_found")})}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:w-auto sm:text-sm",children:a("close")})})]})})},hk=({isOpen:e,onClose:t,title:r,transactions:n,t:s})=>{if(!e)return null;const a=o=>{if(o.id.startsWith("C-INV-")&&o.payment_status===ie.UNPAID)return{text:"Consolidated",color:"bg-purple-100 text-purple-800"};const l=new Date;if(l.setHours(0,0,0,0),o.payment_status===ie.UNPAID&&o.due_date&&new Date(o.due_date)<l)return{text:s("overdue"),color:"bg-red-100 text-red-800"};switch(o.payment_status){case ie.UNPAID:return{text:s("unpaid"),color:"bg-yellow-100 text-yellow-800"};case ie.PARTIALLY_PAID:return{text:s("partially_paid"),color:"bg-blue-100 text-blue-800"};default:return{text:o.payment_status,color:"bg-gray-100 text-gray-800"}}};return i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-3xl m-4",onClick:o=>o.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:r}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),i("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:n.length>0?c("table",{className:"w-full text-sm text-left",children:[i("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:c("tr",{children:[i("th",{className:"px-4 py-3",children:"Invoice ID"}),i("th",{className:"px-4 py-3",children:s("customer")}),i("th",{className:"px-4 py-3",children:s("due_date")}),i("th",{className:"px-4 py-3 text-center",children:s("status")}),i("th",{className:"px-4 py-3 text-right",children:s("balance_due")})]})}),i("tbody",{children:n.map(o=>{const l=a(o),d=o.total-o.paid_amount;return c("tr",{className:"bg-white border-b hover:bg-gray-50",children:[i("td",{className:"px-4 py-3 font-mono text-xs",children:o.id}),i("td",{className:"px-4 py-3",children:o.customerName}),i("td",{className:`px-4 py-3 ${l.text===s("overdue")?"text-red-600 font-bold":""}`,children:o.due_date?new Date(o.due_date).toLocaleDateString():"N/A"}),i("td",{className:"px-4 py-3 text-center",children:i("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.color}`,children:l.text})}),c("td",{className:"px-4 py-3 text-right font-semibold",children:["",d.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},o.id)})})]}):i("p",{className:"text-center text-text-secondary p-8",children:s("no_transactions_found")})}),i("div",{className:"bg-background px-4 py-3 sm:px-6 flex justify-end rounded-b-lg",children:i("button",{type:"button",onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:w-auto sm:text-sm",children:s("close")})})]})})},fk=({isOpen:e,onClose:t,onConfirm:r,bill:n,t:s})=>{const[a,o]=x.useState(""),[l,d]=x.useState(""),[u,p]=x.useState("Bank Transfer"),[h,m]=x.useState(""),y=n?n.amount-n.paidAmount:0;x.useEffect(()=>{e&&n&&(o(y),d(new Date().toISOString().split("T")[0]),p("Bank Transfer"),m(""))},[e,n,y]);const v=()=>{n&&typeof a=="number"&&a>0&&r(n.id,{paymentAmount:a,paymentDate:l,paymentMethod:u,referenceNote:h})};return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center","aria-modal":"true",role:"dialog",onClick:t,children:c("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-md m-4",onClick:b=>b.stopPropagation(),children:[c("div",{className:"p-4 border-b flex justify-between items-center",children:[i("h3",{className:"text-lg font-semibold text-text-primary",children:s("record_payment")}),i("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-1 rounded-full hover:bg-gray-100",children:i(xe,{className:"h-6 w-6"})})]}),c("div",{className:"p-6 space-y-4",children:[c("div",{className:"text-center",children:[c("p",{className:"text-sm text-text-secondary",children:[s("invoice_number")," #",n.invoiceNumber]}),c("div",{className:"grid grid-cols-3 gap-2 mt-2 text-center",children:[c("div",{children:[i("span",{className:"text-xs text-text-secondary block",children:s("total")}),c("span",{className:"font-semibold",children:["",n.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{children:[i("span",{className:"text-xs text-text-secondary block",children:s("amount_paid")}),c("span",{className:"font-semibold text-green-600",children:["- ",n.paidAmount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),c("div",{children:[i("span",{className:"text-xs text-text-secondary block",children:s("balance_due")}),c("span",{className:"font-bold text-lg text-primary",children:["",y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),c("div",{className:"border-t pt-4",children:[i("label",{htmlFor:"payment-amount",className:"block text-sm font-medium text-text-secondary",children:s("amount_to_pay")}),i("input",{type:"number",id:"payment-amount",value:a,onChange:b=>o(b.target.value===""?"":Math.max(0,Math.min(y,Number(b.target.value)))),min:"0.01",max:y,step:"0.01",className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300 text-lg font-bold",required:!0,autoFocus:!0})]}),c("div",{className:"grid grid-cols-2 gap-4",children:[c("div",{children:[i("label",{htmlFor:"payment-date",className:"block text-sm font-medium text-text-secondary",children:s("payment_date")}),i("input",{type:"date",id:"payment-date",value:l,onChange:b=>d(b.target.value),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",required:!0})]}),c("div",{children:[i("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-text-secondary",children:s("payment_method")}),c("select",{id:"payment-method",value:u,onChange:b=>p(b.target.value),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",children:[i("option",{value:"Bank Transfer",children:s("payment_bank_transfer")}),i("option",{value:"Cash",children:s("payment_cash")}),i("option",{value:"Cheque",children:s("payment_cheque")}),i("option",{value:"Card",children:s("payment_card")})]})]})]}),c("div",{children:[c("label",{htmlFor:"reference",className:"block text-sm font-medium text-text-secondary",children:[s("reference_note")," (Optional)"]}),i("input",{type:"text",id:"reference",value:h,onChange:b=>m(b.target.value),className:"mt-1 block w-full rounded-md p-2 bg-background border-gray-300",placeholder:"e.g., Transaction ID, Cheque No."})]})]}),c("div",{className:"bg-background px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm disabled:bg-blue-300",onClick:v,disabled:!a||a<=0,children:s("confirm")}),i("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm",children:s("cancel")})]})]})})},gk=({currentUser:e,onLogout:t,transactions:r,bills:n,users:s,products:a,suppliers:o,storeSettings:l,t:d,language:u,setLanguage:p,onBillUpdated:h,showAlert:m})=>{const[y,v]=x.useState([]),[b,k]=x.useState(""),[w,f]=x.useState(!1),[g,_]=x.useState(null),[E,S]=x.useState({isOpen:!1,title:"",bills:[]}),[O,C]=x.useState({isOpen:!1,title:"",transactions:[]}),[P,N]=x.useState(!1),[I,A]=x.useState(null);x.useEffect(()=>{try{const U=localStorage.getItem("ceo-todos");U&&v(JSON.parse(U))}catch(U){console.error("Failed to load todos",U)}},[]);const T=U=>{try{v(U),localStorage.setItem("ceo-todos",JSON.stringify(U))}catch(V){console.error("Failed to save todos",V)}},R=U=>{if(U.preventDefault(),b.trim()){const V={id:`todo-${Date.now()}`,text:b.trim(),completed:!1};T([...y,V]),k("")}},$=U=>{T(y.map(V=>V.id===U?{...V,completed:!V.completed}:V))},J=U=>{T(y.filter(V=>V.id!==U))},ne=(U,V)=>{T(y.map(de=>de.id===U?{...de,dueDate:V,completed:!1}:de)),_(null)},D=U=>{A(U),N(!0)},L=async(U,V)=>{const de=n.find(He=>He.id===U);if(!de){m("Error","Bill not found");return}const ge={id:`pay-${Date.now()}`,amount:V.paymentAmount,paymentDate:V.paymentDate,paymentMethod:V.paymentMethod,referenceNote:V.referenceNote},Ce=[...de.payments||[],ge],nt=de.paidAmount+ge.amount,st=nt>=de.amount?Ue.PAID:de.status,{data:Je,error:je}=await me.from("bills").update({paid_amount:nt,payments:Ce,status:st}).eq("id",U).select("*, supplierId:supplier_id, invoiceNumber:invoice_number, billDate:bill_date, dueDate:due_date, paidAmount:paid_amount, fileUrl:file_url").single();if(je){m("Database Error",`Could not record payment: ${je.message}`);return}Je&&(h(Je),m("Success","Payment has been recorded."),N(!1),A(null),S(He=>({...He,isOpen:!1})))},j=x.useMemo(()=>{const U=new Date,V=new Date(U.getFullYear(),U.getMonth(),U.getDate()),de=new Date(U.getFullYear(),U.getMonth(),1),ge=new Date(U.getFullYear(),0,1),Ce=r.filter(q=>new Date(q.date)>=V),nt=r.filter(q=>new Date(q.date)>=de),st=r.filter(q=>new Date(q.date)>=ge),Je=Ce.reduce((q,se)=>q+se.total,0),je=nt.reduce((q,se)=>q+se.total,0),He=st.reduce((q,se)=>q+se.total,0),kt=Ce.filter(q=>q.payment_status===ie.UNPAID),Nt=Ce.filter(q=>q.payment_status!==ie.UNPAID),dt=kt.reduce((q,se)=>q+se.total,0),qt=Nt.filter(q=>q.paymentMethod==="Cash").reduce((q,se)=>q+se.total,0),Fe=Nt.filter(q=>q.paymentMethod==="Card").reduce((q,se)=>q+se.total,0),Ft=Nt.filter(q=>q.paymentMethod==="Bank Transfer").reduce((q,se)=>q+se.total,0),Xe=n.filter(q=>q.status!==Ue.PAID),St=Xe.reduce((q,se)=>q+(se.amount-se.paidAmount),0),at=Xe.filter(q=>new Date(q.dueDate).toDateString()===V.toDateString()),ut=at.reduce((q,se)=>q+(se.amount-se.paidAmount),0),Ct=new Date(V);Ct.setDate(V.getDate()+7);const z=Xe.filter(q=>{const se=new Date(q.dueDate);return se>=V&&se<=Ct}),X=z.reduce((q,se)=>q+(se.amount-se.paidAmount),0),fe=r.filter(q=>q.payment_status===ie.UNPAID||q.payment_status===ie.PARTIALLY_PAID),B=fe.reduce((q,se)=>q+(se.total-se.paid_amount),0),Ke=s.filter(q=>q.wageType==="daily"&&q.salary).reduce((q,se)=>q+(se.salary||0),0),mt=a.flatMap(q=>q.variants).filter(q=>q.status===Me.LOW_STOCK),ir=fe.filter(q=>q.due_date&&new Date(q.due_date)<V),Pr=ir.reduce((q,se)=>q+(se.total-se.paid_amount),0);return{salesToday:Je,salesMonth:je,salesYear:He,salesTodayAR:dt,salesTodayCash:qt,salesTodayCard:Fe,salesTodayBank:Ft,totalOwed:St,dueTodayBills:at,dueTodayAmount:ut,dueNext7DaysBills:z,dueNext7DaysBillsAmount:X,totalReceivables:B,wagesToday:Ke,lowStockVariants:mt,overdueAR:ir,overdueARAmount:Pr}},[r,n,s,a]),te=(U,V)=>{S({isOpen:!0,title:d(U),bills:V})},Z=(U,V)=>{C({isOpen:!0,title:d(U),transactions:V})};return c(Re,{children:[c("div",{className:"bg-gray-900 min-h-screen text-white font-sans",children:[c("header",{className:"p-4 flex justify-between items-center",children:[c("div",{className:"flex items-center gap-3",children:[l!=null&&l.logo_url?i("img",{src:l.logo_url,alt:"Logo",className:"h-12"}):i(us,{className:"h-12 w-12 text-secondary"}),i("h1",{className:"text-xl font-bold",children:l==null?void 0:l.store_name[u]})]}),c("div",{className:"flex items-center gap-4",children:[c("div",{className:"relative",children:[c("select",{value:u,onChange:U=>p(U.target.value),className:"appearance-none bg-gray-800 pl-8 pr-4 py-1.5 text-sm rounded-md focus:outline-none",children:[i("option",{value:"en",children:"EN"}),i("option",{value:"th",children:"TH"})]}),i(Sd,{className:"h-5 w-5 text-gray-400 absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none"})]}),i("p",{className:"text-sm",children:e.name}),c("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[i(vf,{className:"h-5 w-5"})," ",d("logout")]})]})]}),c("main",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c("div",{className:"space-y-6",children:[c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:d("sales_performance")}),i(Ne,{title:d("sales_today"),value:`${j.salesToday.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(ys,{className:"h-6 w-6"}),color:"text-green-400",className:"bg-gray-700/50"}),i(Ne,{title:d("sales_month"),value:`${j.salesMonth.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(pa,{className:"h-6 w-6"}),color:"text-blue-400",className:"bg-gray-700/50 mt-4"}),i(Ne,{title:d("sales_year"),value:`${j.salesYear.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(pa,{className:"h-6 w-6"}),color:"text-purple-400",className:"bg-gray-700/50 mt-4"})]}),c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:d("daily_sales_overview")}),c("div",{className:"space-y-2 text-sm",children:[c("div",{className:"flex justify-between items-center p-2 bg-gray-700/50 rounded",children:[i("span",{children:d("cash_sales")}),c("span",{className:"font-bold",children:["",j.salesTodayCash.toLocaleString(void 0,{minimumFractionDigits:0})]})]}),c("div",{className:"flex justify-between items-center p-2 bg-gray-700/50 rounded",children:[i("span",{children:d("card_sales")}),c("span",{className:"font-bold",children:["",j.salesTodayCard.toLocaleString(void 0,{minimumFractionDigits:0})]})]}),c("div",{className:"flex justify-between items-center p-2 bg-gray-700/50 rounded",children:[i("span",{children:d("bank_transfer_sales")}),c("span",{className:"font-bold",children:["",j.salesTodayBank.toLocaleString(void 0,{minimumFractionDigits:0})]})]}),c("div",{className:"flex justify-between items-center p-2 bg-yellow-900/50 rounded cursor-pointer",onClick:()=>Z("ar_new",r.filter(U=>new Date(U.date).toDateString()===new Date().toDateString()&&U.payment_status===ie.UNPAID)),children:[i("span",{children:d("ar_new")}),c("span",{className:"font-bold",children:["",j.salesTodayAR.toLocaleString(void 0,{minimumFractionDigits:0})]})]})]})]})]}),c("div",{className:"space-y-6",children:[c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:d("daily_expenses")}),i(Ne,{title:d("wages_today"),value:`${j.wagesToday.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-red-400",className:"bg-gray-700/50"}),i(Ne,{title:d("due_today"),value:`${j.dueTodayAmount.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(Cn,{className:"h-6 w-6"}),color:"text-yellow-400",className:"bg-gray-700/50 mt-4",isClickable:!0,onClick:()=>te("due_today",j.dueTodayBills)})]}),c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:"Accounts Summary"}),i(Ne,{title:d("total_receivables"),value:`${j.totalReceivables.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-green-400",className:"bg-gray-700/50"}),i(Ne,{title:d("overdue_amount"),value:`${j.overdueARAmount.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(Cn,{className:"h-6 w-6"}),color:"text-red-400",className:"bg-gray-700/50 mt-4",isClickable:!0,onClick:()=>Z("overdue_amount",j.overdueAR)}),i(Ne,{title:d("total_owed"),value:`${j.totalOwed.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(pr,{className:"h-6 w-6"}),color:"text-orange-400",className:"bg-gray-700/50 mt-4"}),i(Ne,{title:d("due_in_days",{days:7}),value:`${j.dueNext7DaysBillsAmount.toLocaleString(void 0,{minimumFractionDigits:0})}`,icon:i(Wi,{className:"h-6 w-6"}),color:"text-blue-400",className:"bg-gray-700/50 mt-4",isClickable:!0,onClick:()=>te("due_in_days",j.dueNext7DaysBills)})]}),c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:d("inventory_overview")}),i(Ne,{title:d("low_stock_items"),value:j.lowStockVariants.length,icon:i(us,{className:"h-6 w-6"}),color:"text-yellow-400",className:"bg-gray-700/50",isClickable:!0,onClick:()=>f(!0)})]})]}),c("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i("h2",{className:"text-lg font-semibold mb-4",children:d("ceo_todo_list")}),c("form",{onSubmit:R,className:"flex gap-2 mb-4",children:[i("input",{type:"text",value:b,onChange:U=>k(U.target.value),placeholder:d("add_task"),className:"flex-grow bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-secondary"}),i("button",{type:"submit",className:"bg-secondary text-white px-4 py-2 rounded-md hover:bg-orange-600",children:i(Rt,{className:"h-5 w-5"})})]}),i("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto pr-2",children:y.length>0?y.sort((U,V)=>(U.completed?1:-1)-(V.completed?1:-1)).map(U=>c("div",{className:`flex items-center gap-3 p-3 rounded-md transition-colors ${U.completed?"bg-green-900/50 text-gray-500":"bg-gray-700/50"}`,children:[i("button",{onClick:()=>$(U.id),className:"flex-shrink-0",children:i("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${U.completed?"border-green-500 bg-green-500":"border-gray-400"}`,children:U.completed&&i(kx,{className:"h-3 w-3 text-white"})})}),c("div",{className:"flex-grow",children:[i("p",{className:`text-sm ${U.completed?"line-through":""}`,children:U.text}),U.dueDate&&c("p",{className:"text-xs text-gray-400",children:["Due: ",new Date(U.dueDate).toLocaleDateString()]})]}),!U.completed&&c("div",{className:"relative",children:[i("button",{onClick:()=>_(U.id===g?null:U.id),className:"text-gray-400 hover:text-white p-1",children:i(Wi,{className:"h-4 w-4"})}),g===U.id&&i("input",{type:"date",onChange:V=>ne(U.id,V.target.value),className:"absolute right-0 top-full mt-1 bg-gray-900 border border-gray-700 p-1 text-xs rounded-md z-10"})]}),i("button",{onClick:()=>J(U.id),className:"text-gray-400 hover:text-red-500 p-1",children:i(sr,{className:"h-4 w-4"})})]},U.id)):i("p",{className:"text-center text-gray-500 text-sm py-8",children:d("no_tasks")})})]})]})]}),i(mk,{isOpen:w,onClose:()=>f(!1),lowStockVariants:j.lowStockVariants,products:a,t:d,language:u}),i(pk,{isOpen:E.isOpen,onClose:()=>S({isOpen:!1,title:"",bills:[]}),title:E.title,bills:E.bills,suppliers:o,t:d,onRecordPaymentClick:D}),i(hk,{isOpen:O.isOpen,onClose:()=>C({isOpen:!1,title:"",transactions:[]}),title:O.title,transactions:O.transactions,t:d}),i(fk,{isOpen:P,onClose:()=>N(!1),onConfirm:L,bill:I,t:d})]})},yk=({product:e,position:t,language:r})=>{Dd(r);const n={left:`${t.x+15}px`,top:`${t.y+15}px`};return c("div",{style:n,className:"fixed z-50 w-64 p-3 bg-gray-800 text-white rounded-lg shadow-2xl pointer-events-none animate-fade-in",role:"tooltip",children:[i("h4",{className:"font-bold",children:e.name[r]}),e.description&&e.description[r]&&i("p",{className:"text-xs text-gray-300 mt-1",children:e.description[r]})]})},fl=[{key:"sales_overview",name:"Sales Overview"},{key:"accounts_payable",name:"Accounts Payable"},{key:"inventory_overview",name:"Inventory Overview"},{key:"low_stock_list",name:"Low Stock List"}],ai={[oe.CEO]:["daily_sales_overview","sales_overview","accounts_payable","inventory_overview","low_stock_list"],[oe.ADMIN]:["daily_sales_overview","sales_overview","accounts_payable","inventory_overview","low_stock_list"],[oe.ACCOUNT_MANAGER]:["daily_sales_overview","sales_overview","accounts_payable"],[oe.STORE_MANAGER]:["daily_sales_overview","sales_overview","inventory_overview","low_stock_list"],[oe.STORE_STAFF]:["inventory_overview","low_stock_list"],[oe.POS_OPERATOR]:["daily_sales_overview"]},vk=({storeSettings:e,onUpdateSettings:t,t:r})=>{const[n,s]=x.useState((e==null?void 0:e.dashboard_widget_visibility)||ai);x.useEffect(()=>{if(e!=null&&e.dashboard_widget_visibility){const u={...ai};for(const p of Object.values(oe))u[p]=e.dashboard_widget_visibility[p]||ai[p];s(u)}else s(ai)},[e]);const a=(u,p)=>{s(h=>{const m={...h},y=[...m[u]||[]],v=y.includes(p);let b;return v?b=y.filter(k=>k!==p):b=fl.map(k=>k.key).filter(k=>y.includes(k)||k===p),m[u]=b,m})},o=()=>{t({dashboard_widget_visibility:n})},l=u=>{const p=`role_${u.toLowerCase().replace(/\s/g,"_")}`;return r(p)},d=u=>{var y;const p=`widget_${u}`,h=((y=fl.find(v=>v.key===u))==null?void 0:y.name)||u,m=r(p);return m===p?h:m};return i("div",{className:"max-w-4xl mx-auto",children:c("div",{className:"bg-surface rounded-lg shadow",children:[c("div",{className:"p-6 border-b",children:[i("h2",{className:"text-2xl font-bold text-text-primary",children:r("dashboard_management")}),i("p",{className:"text-text-secondary mt-1",children:"Enable or disable widgets for each role's dashboard view."})]}),i("div",{className:"p-6 space-y-8",children:Object.values(oe).map(u=>c("div",{className:"p-4 border rounded-lg",children:[i("h3",{className:"font-semibold text-xl text-text-primary mb-4",children:l(u)}),i("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:fl.map(p=>{var m;const h=((m=n[u])==null?void 0:m.includes(p.key))||!1;return c("label",{className:"flex items-center gap-3 p-3 bg-background rounded-md border hover:border-primary transition-colors cursor-pointer",children:[i("input",{type:"checkbox",checked:h,onChange:()=>a(u,p.key),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"}),i("span",{className:"text-sm font-medium text-text-primary flex-grow",children:d(p.key)})]},p.key)})})]},u))}),i("div",{className:"bg-background px-6 py-4 flex justify-end rounded-b-lg",children:i("button",{onClick:o,className:"px-6 py-2 bg-primary text-white font-semibold rounded-md hover:bg-blue-800",children:r("save_changes")})})]})})},xk=({categories:e,currentUser:t,onAddCategory:r,onEditCategory:n,onDeleteCategory:s,t:a,language:o})=>{const[l,d]=x.useState(new Set),[u,p]=x.useState(null),{mainCategories:h,subCategoriesByParent:m}=x.useMemo(()=>{const w=e.filter(g=>!g.parentId).sort((g,_)=>g.displayOrder-_.displayOrder),f={};return e.forEach(g=>{g.parentId&&(f[g.parentId]||(f[g.parentId]=[]),f[g.parentId].push(g))}),Object.keys(f).forEach(g=>{f[g].sort((_,E)=>_.displayOrder-E.displayOrder)}),{mainCategories:w,subCategoriesByParent:f}},[e]),y=w=>{d(f=>{const g=new Set(f);return g.has(w)?g.delete(w):g.add(w),g})},v=w=>{p(w)},b=()=>{u&&(s(u.id),p(null))},k=(w,f=!1)=>{var E;const g=((E=m[w.id])==null?void 0:E.length)>0,_=l.has(w.id);return c("div",{className:f?"ml-8":"",children:[c("div",{className:"flex items-center justify-between p-4 bg-white border-b hover:bg-gray-50 group",children:[c("div",{className:"flex items-center gap-3 flex-1",children:[g&&!f&&i("button",{onClick:()=>y(w.id),className:"p-1 hover:bg-gray-200 rounded",children:_?i(xo,{className:"h-4 w-4 text-gray-600"}):i(Cd,{className:"h-4 w-4 text-gray-600"})}),!g&&!f&&i("div",{className:"w-6"}),c("div",{className:"flex-1",children:[i("h4",{className:`font-semibold ${f?"text-sm":"text-base"} text-text-primary`,children:w.name[o]}),c("p",{className:"text-xs text-text-secondary",children:[o==="en"?w.name.th:w.name.en,"  ",w.slug]})]})]}),c("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i("button",{onClick:()=>n(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:a("edit"),children:i(Tn,{className:"h-4 w-4"})}),i("button",{onClick:()=>v(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:a("delete"),children:i(sr,{className:"h-4 w-4"})})]})]}),g&&_&&i("div",{className:"bg-gray-50",children:m[w.id].map(S=>k(S,!0))})]},w.id)};return c(Re,{children:[i("div",{className:"space-y-6",children:c("div",{className:"bg-surface rounded-lg shadow",children:[c("div",{className:"p-6 border-b flex justify-between items-center",children:[c("div",{children:[i("h2",{className:"text-xl font-bold text-text-primary",children:"Category Management"}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Manage product categories and sub-categories"})]}),c("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-800 transition-colors",children:[i(Rt,{className:"h-5 w-5"}),i("span",{children:"Add Category"})]})]}),i("div",{className:"divide-y",children:h.length>0?h.map(w=>k(w)):c("div",{className:"p-12 text-center text-text-secondary",children:[i("p",{className:"font-semibold text-lg",children:"No categories yet"}),i("p",{className:"text-sm mt-1",children:'Click "Add Category" to create your first category'})]})})]})}),i(fr,{isOpen:!!u,onClose:()=>p(null),onConfirm:b,title:"Delete Category",message:`Are you sure you want to delete "${u==null?void 0:u.name[o]}"? This action cannot be undone.`,t:a})]})},wk=({isOpen:e,onClose:t,onAddCategory:r,categories:n,t:s,language:a})=>{const[o,l]=x.useState(""),[d,u]=x.useState(""),[p,h]=x.useState(""),[m,y]=x.useState(""),[v,b]=x.useState(0),[k,w]=x.useState(!0);x.useEffect(()=>{e||(l(""),u(""),h(""),y(""),b(0),w(!0))},[e]),x.useEffect(()=>{if(k&&o){const _=o.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"");h(_)}},[o,k]);const f=_=>{if(_.preventDefault(),!o.trim()||!d.trim()||!p.trim()){alert("Please fill in all required fields");return}const E={name:{en:o.trim(),th:d.trim()},slug:p.trim(),parentId:m||null,displayOrder:v};r(E),t()},g=n.filter(_=>!_.parentId);return e?i("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c("div",{className:"p-6 border-b",children:[i("h2",{className:"text-xl font-bold text-text-primary",children:"Add New Category"}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Create a new category or sub-category"})]}),c("form",{onSubmit:f,className:"p-6 space-y-4",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Category Name (English) *"}),i("input",{type:"text",value:o,onChange:_=>l(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., Building Materials",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Category Name (Thai) *"}),i("input",{type:"text",value:d,onChange:_=>u(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., ",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Slug (URL-friendly identifier) *"}),i("input",{type:"text",value:p,onChange:_=>{h(_.target.value),w(!1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",placeholder:"e.g., building_materials",required:!0}),i("p",{className:"text-xs text-text-secondary mt-1",children:"Auto-generated from English name. Edit to customize."})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Parent Category (Optional)"}),c("select",{value:m,onChange:_=>y(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[i("option",{value:"",children:"None (Main Category)"}),g.map(_=>i("option",{value:_.id,children:_.name[a]},_.id))]}),i("p",{className:"text-xs text-text-secondary mt-1",children:"Select a parent to create a sub-category"})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Display Order"}),i("input",{type:"number",value:v,onChange:_=>b(parseInt(_.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",min:"0"}),i("p",{className:"text-xs text-text-secondary mt-1",children:"Lower numbers appear first"})]}),c("div",{className:"flex gap-3 pt-4",children:[i("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),i("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-800",children:"Add Category"})]})]})]})}):null},bk=({isOpen:e,onClose:t,onEditCategory:r,category:n,categories:s,t:a,language:o})=>{const[l,d]=x.useState(""),[u,p]=x.useState(""),[h,m]=x.useState(""),[y,v]=x.useState(""),[b,k]=x.useState(0);x.useEffect(()=>{n&&(d(n.name.en),p(n.name.th),m(n.slug),v(n.parentId||""),k(n.displayOrder))},[n]);const w=_=>{if(_.preventDefault(),!n||!l.trim()||!u.trim()||!h.trim()){alert("Please fill in all required fields");return}if(y===n.id){alert("A category cannot be its own parent");return}const E={name:{en:l.trim(),th:u.trim()},slug:h.trim(),parentId:y||null,displayOrder:b};r(n.id,E),t()},g=(()=>{if(!n)return[];const _=new Set,E=S=>{s.forEach(O=>{O.parentId===S&&(_.add(O.id),E(O.id))})};return E(n.id),s.filter(S=>!S.parentId&&S.id!==n.id&&!_.has(S.id))})();return!e||!n?null:i("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c("div",{className:"p-6 border-b",children:[i("h2",{className:"text-xl font-bold text-text-primary",children:"Edit Category"}),i("p",{className:"text-sm text-text-secondary mt-1",children:"Update category information"})]}),c("form",{onSubmit:w,className:"p-6 space-y-4",children:[c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Category Name (English) *"}),i("input",{type:"text",value:l,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Category Name (Thai) *"}),i("input",{type:"text",value:u,onChange:_=>p(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Slug (URL-friendly identifier) *"}),i("input",{type:"text",value:h,onChange:_=>m(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",required:!0})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Parent Category (Optional)"}),c("select",{value:y,onChange:_=>v(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[i("option",{value:"",children:"None (Main Category)"}),g.map(_=>i("option",{value:_.id,children:_.name[o]},_.id))]}),i("p",{className:"text-xs text-text-secondary mt-1",children:"Cannot select self or descendants as parent"})]}),c("div",{children:[i("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Display Order"}),i("input",{type:"number",value:b,onChange:_=>k(parseInt(_.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),c("div",{className:"flex gap-3 pt-4",children:[i("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),i("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-800",children:"Save Changes"})]})]})]})})},gl=async()=>{const{data:e,error:t}=await me.from("products").select(`
            *,
            variants:product_variants(*)
        `);return t?(console.error("Error fetching products:",t),[]):e.map(r=>({id:r.id,name:r.name,description:r.description,category:r.category,imageUrl:r.image_url,variants:r.variants.map(n=>({id:n.id,sku:n.sku,size:n.size,stock:n.stock_quantity,price:{walkIn:n.price_walk_in,contractor:n.price_contractor,government:n.price_government,cost:n.cost_price},status:n.status,barcode:n.barcode,history:n.history}))}))},_k=async e=>{const{data:t,error:r}=await me.from("products").insert({name:e.name,description:e.description,category:e.category,image_url:e.imageUrl}).select().single();if(r||!t){console.error("Error creating product:",r);const a=(r==null?void 0:r.message)||"Unknown error creating product";throw new Error(a)}const n=e.variants.map(a=>({product_id:t.id,sku:a.sku,size:a.size,stock_quantity:a.stock,price_walk_in:a.price.walkIn,price_contractor:a.price.contractor,price_government:a.price.government,cost_price:a.price.cost,status:"status"in a?a.status:"In Stock",barcode:a.barcode,history:"history"in a?a.history:[]})),{error:s}=await me.from("product_variants").insert(n);if(s)throw console.error("Error creating variants:",s),new Error(`Failed to create product variants: ${s.message}`);return kk(t.id)},kk=async e=>{const{data:t,error:r}=await me.from("products").select(`
            *,
            variants:product_variants(*)
        `).eq("id",e).single();return r||!t?null:{id:t.id,name:t.name,description:t.description,category:t.category,imageUrl:t.image_url,variants:t.variants.map(n=>({id:n.id,sku:n.sku,size:n.size,stock:n.stock_quantity,price:{walkIn:n.price_walk_in,contractor:n.price_contractor,government:n.price_government,cost:n.cost_price},status:n.status,barcode:n.barcode,history:n.history}))}},Nk=async(e,t)=>{const{error:r}=await me.from("products").update({name:t.name,description:t.description,category:t.category,image_url:t.imageUrl}).eq("id",e);if(r)return!1;for(const n of t.variants){const s={product_id:e,sku:n.sku,size:n.size,stock_quantity:n.stock,price_walk_in:n.price.walkIn,price_contractor:n.price.contractor,price_government:n.price.government,cost_price:n.price.cost,status:"status"in n?n.status:"In Stock",barcode:n.barcode,history:"history"in n?n.history:[]};"id"in n?await me.from("product_variants").update(s).eq("id",n.id):await me.from("product_variants").insert(s)}return!0},Sk=async e=>{const{error:t}=await me.from("products").delete().eq("id",e);return!t},Ck=async()=>{const{data:e,error:t}=await me.from("customers").select("*");return t?[]:e},Zm=async e=>{const{data:t,error:r}=await me.from("customers").insert(e).select().single();return r?null:t},Ek=async(e,t)=>{const{error:r}=await me.from("customers").update(t).eq("id",e);return!r},Pk=async e=>{const{error:t}=await me.from("customers").delete().eq("id",e);return!t},Tk=async()=>{const{data:e,error:t}=await me.from("suppliers").select("*");return t?[]:e.map(r=>({id:r.id,name:r.name,contactPerson:r.contact_person,email:r.email,phone:r.phone,address:r.address,logo:r.logo_url,orderHistory:[]}))},Ok=async e=>{const{error:t}=await me.from("suppliers").delete().eq("id",e);return!t},Ik=async()=>{const{data:e,error:t}=await me.from("transactions").select("*").order("date",{ascending:!1});return t?[]:e.map(r=>({...r,customerName:r.customer_name,customerType:r.customer_type,paymentMethod:r.payment_method,paid_amount:r.paid_amount,customerId:r.customer_id}))},Ak=async e=>{const{error:t}=await me.from("transactions").insert({id:e.id,date:e.date,customer_id:e.customerId,customer_name:e.customerName,customer_type:e.customerType,customer_address:e.customerAddress,customer_phone:e.customerPhone,operator_id:null,operator_name:e.operator,subtotal:e.subtotal,tax:e.tax,transportation_fee:e.transportationFee,total:e.total,payment_method:e.paymentMethod,payment_status:e.payment_status,paid_amount:e.paid_amount,items:e.items,vat_included:e.vatIncluded,file_url:e.file_url,due_date:e.due_date});return t?(console.error("Error creating transaction",t),!1):!0},jk=async e=>{const{error:t}=await me.from("transactions").delete().eq("id",e);return t?(console.error("Error deleting transaction",t),!1):!0},Dk=async()=>{const{data:e,error:t}=await me.from("users").select("*");return t?[]:e.map(r=>({id:r.id,name:r.full_name||r.username,role:r.role,avatar:r.avatar_url,settings:r.settings,permissions:r.permissions,salary:r.salary,wageType:r.wage_type}))},Rk=async()=>{const{data:e,error:t}=await me.from("bills").select("*");return t?[]:e.map(r=>({id:r.id,supplierId:r.supplier_id,invoiceNumber:r.invoice_number,billDate:r.bill_date,dueDate:r.due_date,amount:r.amount,paidAmount:r.paid_amount,status:r.status,payments:r.payments,notes:r.notes,fileUrl:r.file_url}))},ep=async(e,t)=>{const{error:r}=await me.from("users").update({full_name:t.name,role:t.role,avatar_url:t.avatar,settings:t.settings,permissions:t.permissions,salary:t.salary,wage_type:t.wageType}).eq("id",e);return!r},Lk=async()=>{const{data:e,error:t}=await me.from("store_settings").select("*").single();return t||!e?null:{id:e.id,store_name:e.store_name,logo_url:e.logo_url,address:e.address,phone:e.phone,tax_id:e.tax_id,default_outsource_markup:e.default_outsource_markup,delivery_rate_per_km:e.delivery_rate_per_km,dashboard_widget_visibility:e.dashboard_widget_visibility}},Mk=async e=>{const{data:t}=await me.from("store_settings").select("id").single();if(t){const{error:r}=await me.from("store_settings").update({store_name:e.store_name,logo_url:e.logo_url,address:e.address,phone:e.phone,tax_id:e.tax_id,default_outsource_markup:e.default_outsource_markup,delivery_rate_per_km:e.delivery_rate_per_km,dashboard_widget_visibility:e.dashboard_widget_visibility}).eq("id",t.id);return!r}else{const{error:r}=await me.from("store_settings").insert({store_name:e.store_name,logo_url:e.logo_url,address:e.address,phone:e.phone,tax_id:e.tax_id,default_outsource_markup:e.default_outsource_markup,delivery_rate_per_km:e.delivery_rate_per_km,dashboard_widget_visibility:e.dashboard_widget_visibility});return!r}},tp=async()=>{const{data:e,error:t}=await me.from("categories").select("*").order("display_order",{ascending:!0});return t?(console.error("Error fetching categories:",t),[]):e.map(r=>({id:r.id,name:{en:r.name_en,th:r.name_th},slug:r.slug,parentId:r.parent_id,displayOrder:r.display_order,createdAt:r.created_at,updatedAt:r.updated_at}))},Fk=async e=>{const{data:t,error:r}=await me.from("categories").insert({name_en:e.name.en,name_th:e.name.th,slug:e.slug,parent_id:e.parentId,display_order:e.displayOrder}).select().single();return r?(console.error("Error creating category:",r),null):{id:t.id,name:{en:t.name_en,th:t.name_th},slug:t.slug,parentId:t.parent_id,displayOrder:t.display_order,createdAt:t.created_at,updatedAt:t.updated_at}},$k=async(e,t)=>{const r={};t.name&&(r.name_en=t.name.en,r.name_th=t.name.th),t.slug!==void 0&&(r.slug=t.slug),t.parentId!==void 0&&(r.parent_id=t.parentId),t.displayOrder!==void 0&&(r.display_order=t.displayOrder);const{error:n}=await me.from("categories").update(r).eq("id",e);return n?(console.error("Error updating category:",n),!1):!0},Uk=async e=>{const{data:t,error:r}=await me.from("products").select("id").like("category",`%${e}%`).limit(1);if(r)return console.error("Error checking products:",r),{success:!1,error:"Failed to check for associated products"};if(t&&t.length>0)return{success:!1,error:"Cannot delete category with associated products. Please reassign or delete products first."};const{data:n,error:s}=await me.from("categories").select("id").eq("parent_id",e).limit(1);if(s)return console.error("Error checking sub-categories:",s),{success:!1,error:"Failed to check for sub-categories"};if(n&&n.length>0)return{success:!1,error:"Cannot delete category with sub-categories. Please delete or reassign sub-categories first."};const{error:a}=await me.from("categories").delete().eq("id",e);return a?(console.error("Error deleting category:",a),{success:!1,error:"Failed to delete category"}):{success:!0}},zk=()=>{const[e,t]=x.useState(!0),[r,n]=x.useState([]),[s,a]=x.useState([]),[o,l]=x.useState([]),[d,u]=x.useState([]),[p,h]=x.useState([]),[m,y]=x.useState([]),[v,b]=x.useState([]),[k,w]=x.useState([]),[f,g]=x.useState([]),[_,E]=x.useState([]),[S,O]=x.useState(null),[C,P]=x.useState(()=>{try{const M=localStorage.getItem("currentUser");if(M){const H=JSON.parse(M);if(H&&H.id&&H.name)return H}return null}catch(M){return console.error("Failed to load user from localStorage",M),null}}),[N,I]=x.useState("dashboard"),[A,T]=x.useState(null),[R,$]=x.useState("th"),[J,ne]=x.useState(["dashboard"]);x.useState(!1);const[D,L]=x.useState(!1),[j,te]=x.useState(null),[Z,U]=x.useState({x:0,y:0}),[V,de]=x.useState(null),[ge,Ce]=x.useState(!1),[nt,st]=x.useState(!1),[Je,je]=x.useState(!1),[He,kt]=x.useState(!1),[Nt,dt]=x.useState(!1),[qt,Fe]=x.useState(!1),[Ft,Xe]=x.useState(!1),[St,at]=x.useState(!1),[ut,Ct]=x.useState(!1),[z,X]=x.useState(!1),[fe,B]=x.useState(!1),[we,Ke]=x.useState(!1),[mt,ir]=x.useState(!1),[Pr,q]=x.useState(!1),[se,Tr]=x.useState(!1),[On,gr]=x.useState(!1),[Or,rn]=x.useState(!1),[nn,No]=x.useState(!1),[Vd,Ca]=x.useState(!1);x.useState(!1);const[So,Co]=x.useState(null),[Ir,Ea]=x.useState(null),[ks,Ns]=x.useState(null),[W,G]=x.useState(null);x.useState(null);const[ee,ye]=x.useState(null);x.useState(null);const[Ht,Et]=x.useState(null),[Ar,Ss]=x.useState(null),[Wd,Kg]=x.useState({title:"",message:""});x.useState(()=>()=>{});const[Gg,Qg]=x.useState(null),[Jg,Xg]=x.useState(null),[Yg,Vk]=x.useState(null);x.useState(!1),x.useState(null),x.useState(null),x.useState(null),x.useState(null),x.useState(null);const[Wk,qd]=x.useState(null),[qk,Zg]=x.useState(null),[Hk,Hd]=x.useState(!1);x.useState(null);const[Eo,Pa]=x.useState([]),[ey,Po]=x.useState(!1),[ty,To]=x.useState(!1),[ry,Oo]=x.useState(null),pe=Dd(R);x.useEffect(()=>{try{const M=V||C;M?localStorage.setItem("currentUser",JSON.stringify(M)):localStorage.removeItem("currentUser")}catch(M){console.error("Failed to save user to localStorage",M)}},[C,V]);const ae=x.useCallback((M,H)=>{Kg({title:M,message:H.replace(/\n/g,"<br />")}),Fe(!0)},[]);x.useEffect(()=>{(async()=>{t(!0);try{const[H,ce,$e,Ye,eu,Oa,Ia,$y]=await Promise.all([gl(),Ck(),Tk(),Ik(),Rk(),Dk(),Lk(),tp()]);a(H),u(ce),l($e),h(Ye),b(eu),Pa($y),Oa.length>0&&n(Oa),Ia&&O(Ia)}catch(H){console.error("Error fetching initial data:",H),ae("Error","Failed to load data from database.")}finally{t(!1)}})()},[ae]);const ny=async M=>{try{const H=await _k(M);H&&(a(ce=>[...ce,H]),Ce(!1),ae("Success","Product added successfully."))}catch(H){ae("Error",`Failed to add product: ${H.message}`)}},sy=async(M,H)=>{if(await Nk(M,H)){const $e=await gl();a($e),st(!1),ae("Success","Product updated successfully.")}else ae("Error","Failed to update product.")},ay=async()=>{if(!Ir)return;await Sk(Ir.id)?(a(H=>H.filter(ce=>ce.id!==Ir.id)),je(!1),Ea(null),ae("Success","Product deleted successfully.")):ae("Error","Failed to delete product.")},iy=M=>{console.log("Add User",M)},oy=async(M,H)=>{await ep(M,H)?(n($e=>$e.map(Ye=>Ye.id===M?{...Ye,...H}:Ye)),ae("Success","User updated successfully.")):ae("Error","Failed to update user.")},ly=M=>{console.log("Delete User",M)},cy=M=>{console.log("Reset Password",M)},dy=async M=>{const H=await Zm(M);H?(u(ce=>[...ce,H]),ae("Success","Customer added successfully.")):ae("Error","Failed to add customer.")},uy=async M=>{const H=await Zm(M);return H?(u(ce=>[...ce,H]),H):null},my=async(M,H)=>{await Ek(M,H)?(u($e=>$e.map(Ye=>Ye.id===M?{...Ye,...H}:Ye)),ae("Success","Customer updated successfully.")):ae("Error","Failed to update customer.")},py=async M=>{await Pk(M)?(u(ce=>ce.filter($e=>$e.id!==M)),ae("Success","Customer deleted successfully.")):ae("Error","Failed to delete customer.")},hy=(M,H)=>{console.log("Edit Supplier",M,H)},fy=async M=>{await Ok(M)?(l(ce=>ce.filter($e=>$e.id!==M)),ae("Success","Supplier deleted successfully.")):ae("Error","Failed to delete supplier.")},gy=M=>{console.log("Update Bill",M)},yy=M=>{console.log("Delete Bill",M)},vy=async(M,H,ce,$e)=>{const Ye={...M,payment_status:ie.PAID,paid_amount:M.total,items:H};if(await Ak(Ye)){h(Ia=>[Ye,...Ia]);const Oa=await gl();return a(Oa),Ye}else{ae("Error","Failed to create transaction.");return}},xy=(M,H)=>{console.log("New Invoice")},wy=M=>{console.log("New Order")},by=(M,H)=>{console.log("Update Order Status",M,H)},_y=(M,H,ce)=>{console.log("Update Order Payment Status",M,H,ce)},ky=M=>{console.log("Convert Order to Invoice",M)},Ny=async(M,H,ce)=>(console.log("Process Return"),{}),Sy=()=>{console.log("Close Shift")},Kd=async M=>{await Mk(M)?(O(ce=>ce?{...ce,...M}:M),ae("Success","Settings updated successfully.")):ae("Error","Failed to update settings.")},Cy=async(M,H)=>{await ep(M,H)?(n($e=>$e.map(Ye=>Ye.id===M?{...Ye,...H}:Ye)),ae("Success","User updated successfully.")):ae("Error","Failed to update user.")},Ey=async(M,H,ce)=>(console.log("Update Password"),{success:!0,message:"password_update_success"}),Py=async M=>{const H=await Fk(M);H?(Pa(ce=>[...ce,H]),Po(!1),ae("Success","Category added successfully.")):ae("Error","Failed to add category.")},Ty=async(M,H)=>{if(await $k(M,H)){const $e=await tp();Pa($e),To(!1),Oo(null),ae("Success","Category updated successfully.")}else ae("Error","Failed to update category.")},Oy=async M=>{const H=await Uk(M);H.success?(Pa(ce=>ce.filter($e=>$e.id!==M)),ae("Success","Category deleted successfully.")):ae("Error",H.error||"Failed to delete category.")},Iy=M=>{console.log("Import Products",M)},Ta=(M,H)=>{I(M)},Ay=(M,H)=>{const ce=Hi([oe.ADMIN]);P({id:"1",name:"Admin",role:[oe.ADMIN],avatar:"",permissions:ce})},Gd=()=>{P(null)},jy=M=>{if(!C)return;V||de(C);const H=Hi([M]),ce={...C,role:[M],permissions:H,name:`${C.name} (Simulating ${M})`};P(ce),ae("Simulation Started",`You are now simulating the ${M} role. Click "Stop Simulation" to return to your original role.`)},Qd=()=>{V&&(P(V),de(null),ae("Simulation Stopped","You have returned to your original role."))},Jd=(M,H)=>{},Xd=()=>{},Dy=()=>{},Yd=M=>{},Ry=M=>{},Ly=()=>{},My=async M=>{window.confirm("Are you sure you want to delete this transaction? This action cannot be undone.")&&(await jk(M)?(h(ce=>ce.filter($e=>$e.id!==M)),ae("Success","Transaction deleted successfully.")):ae("Error","Failed to delete transaction."))},Zd={dashboard:i(Ex,{className:"h-5 w-5"}),pos:i(Px,{className:"h-5 w-5"}),inventory:i(us,{className:"h-5 w-5"}),returns:i(Tx,{className:"h-5 w-5"}),customers:i(Pd,{className:"h-5 w-5"}),suppliers:i(Td,{className:"h-5 w-5"}),accounts_payable:i(pr,{className:"h-5 w-5"}),accounts_receivable:i(jx,{className:"h-5 w-5"}),sales_history:i(Ox,{className:"h-5 w-5"}),order_fulfillment:i(wn,{className:"h-5 w-5"}),customer_assist:i(Ix,{className:"h-5 w-5"}),end_of_day:i(pa,{className:"h-5 w-5"}),shift_history:i(ha,{className:"h-5 w-5"}),activity_log:i(Cf,{className:"h-5 w-5"})},Fy=()=>{if(!C)return i(ck,{onLogin:Ay,storeSettings:S,language:R,setLanguage:$,t:pe});if(N==="ceo_dashboard")return i(gk,{currentUser:C,onLogout:Gd,transactions:p,bills:v,users:r,products:s,suppliers:o,storeSettings:S,t:pe,language:R,setLanguage:$,onBillUpdated:gy,showAlert:ae});switch(N){case"dashboard":return i(dm,{products:s,users:r,transactions:p,bills:v,t:pe,language:R,onNavigate:Ta,currentUser:C,storeSettings:S});case"pos":return i(bb,{products:s,currentUser:C,customers:d,storeCredits:k,transactions:p,onNewTransaction:vy,onNewInvoice:xy,onNewOrder:wy,onAddNewCustomerFromPOS:uy,openScanner:Yd,posScannedCode:Gg,setPosScannedCode:Qg,showAlert:ae,storeSettings:S,onProductMouseEnter:Jd,onProductMouseLeave:Xd,t:pe,language:R});case"inventory":return i(qx,{products:s,currentUser:C,onAddProductClick:()=>Ce(!0),onAddProductByScan:Ly,onImportProductsClick:()=>Ct(!0),onEditProduct:M=>{Co(M),st(!0)},onDeleteProduct:M=>{Ea(M),je(!0)},onViewProduct:M=>{Ns(M),kt(!0)},onShowBarcode:(M,H)=>{Ns(M),Ss(H),at(!0)},openScanner:Yd,inventorySearchCode:Jg,setInventorySearchCode:Xg,t:pe,language:R});case"returns":return i(kb,{transactions:p,products:s,onProcessReturn:Ny,t:pe,language:R});case"customers":return i(Tb,{customers:d,onAddCustomer:dy,onEditCustomer:my,onDeleteCustomer:py,onImportCustomersClick:()=>X(!0),t:pe,currentUser:C,showAlert:ae});case"suppliers":return i(iw,{suppliers:o,onAddSupplier:()=>dt(!0),onEditSupplier:hy,onDeleteSupplier:fy,onImportSuppliersClick:()=>B(!0),t:pe,currentUser:C,showAlert:ae});case"accounts_payable":return i(dk,{bills:v,suppliers:o,onAddBillClick:()=>Ke(!0),onPayBillClick:M=>{G(M),q(!0)},onDeleteBill:yy,onImportBillsClick:()=>ir(!0),t:pe,language:R,currentUser:C});case"accounts_receivable":return i(uk,{transactions:p,customers:d,onReceivePaymentClick:M=>{qd(M),Tr(!0)},onCreateConsolidatedInvoice:(M,H)=>{Zg({customer:M,transactions:H}),gr(!0)},onRecordPastInvoiceClick:()=>rn(!0),onImportPastInvoicesClick:()=>No(!0),onEditPastInvoiceClick:M=>{ye(M),Ca(!0)},onUndoConsolidationClick:M=>{Et(M),Hd(!0)},t:pe,language:R,currentUser:C,viewState:A,onNavigate:Ta});case"sales_history":return i(Fb,{transactions:p,onDeleteTransaction:My,onReceivePaymentClick:M=>{qd(M),Tr(!0)},onEditPastInvoiceClick:M=>{ye(M),Ca(!0)},onUndoConsolidationClick:M=>{Et(M),Hd(!0)},storeSettings:S,t:pe,language:R,currentUser:C});case"order_fulfillment":return i(Mb,{orders:m,onUpdateOrderStatus:by,onUpdateOrderPaymentStatus:_y,onConvertOrderToInvoice:ky,storeSettings:S,t:pe,language:R});case"customer_assist":return i(Ab,{products:s,t:pe,language:R,onProductMouseEnter:Jd,onProductMouseLeave:Xd});case"end_of_day":return i(zb,{transactions:p,products:s,shiftReports:_,onCloseShift:Sy,t:pe,language:R,currentUser:C});case"shift_history":return i(Vb,{shiftReports:_,users:r,t:pe,language:R});case"activity_log":return i($b,{logs:f,users:r,t:pe});case"user_management":return i(tw,{users:r,onAddUser:iy,onEditUser:oy,onDeleteUser:ly,onResetPassword:cy,t:pe,currentUser:C,showAlert:ae});case"store_settings":return i(lk,{storeSettings:S,onUpdateSettings:Kd,t:pe,showAlert:ae});case"my_profile":return i(Ub,{currentUser:C,onUpdateUser:Cy,onUpdatePassword:Ey,links:Zd,t:pe});case"category_management":return i(xk,{categories:Eo,currentUser:C,onAddCategory:()=>Po(!0),onEditCategory:M=>{Oo(M),To(!0)},onDeleteCategory:Oy,t:pe,language:R});case"dashboard_management":return i(vk,{storeSettings:S,onUpdateSettings:Kd,t:pe});default:return i(dm,{products:s,users:r,transactions:p,bills:v,t:pe,language:R,onNavigate:Ta,currentUser:C,storeSettings:S})}};return e?i("div",{className:"flex justify-center items-center h-screen bg-background",children:i("p",{children:"Loading application..."})}):c("div",{className:"flex h-screen bg-background",children:[C&&N!=="ceo_dashboard"&&i(Dx,{currentUser:C,onNavigate:Ta,activeView:N,links:Zd,storeSettings:S,t:pe,language:R,onLogout:Gd,isOpen:D,onClose:()=>L(!1),originalUser:V,onStartSimulation:jy,onStopSimulation:Qd}),c("div",{className:"flex-1 flex flex-col overflow-hidden",children:[C&&N!=="ceo_dashboard"&&i(Rx,{currentUser:C,activeView:N,language:R,setLanguage:$,t:pe,onOpenSidebar:()=>L(!0),onBack:Dy,canGoBack:J.length>1,originalUser:V,onStopSimulation:Qd}),i("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:Fy()})]}),i(Hx,{isOpen:ge,onClose:()=>Ce(!1),onAddProduct:ny,initialBarcode:Yg,showAlert:ae,t:pe}),i(Gx,{isOpen:nt,onClose:()=>st(!1),onEditProduct:sy,product:So,showAlert:ae,t:pe}),i(fr,{isOpen:Je,onClose:()=>je(!1),onConfirm:ay,title:"Delete Product",message:`Are you sure you want to delete "${Ir==null?void 0:Ir.name[R]}"?`,t:pe}),i(Ef,{isOpen:He,onClose:()=>kt(!1),product:ks,t:pe,language:R}),i(ow,{isOpen:qt,onClose:()=>Fe(!1),title:Wd.title,message:Wd.message}),i(lw,{isOpen:Ft,onClose:()=>Xe(!1),onScanSuccess:Ry}),i(cw,{isOpen:St,onClose:()=>at(!1),product:ks,variant:Ar,t:pe,language:R}),i(mb,{isOpen:ut,onClose:()=>Ct(!1),onApplyImport:Iy,products:s,t:pe}),i(wk,{isOpen:ey,onClose:()=>Po(!1),onAddCategory:Py,categories:Eo,t:pe,language:R}),i(bk,{isOpen:ty,onClose:()=>{To(!1),Oo(null)},onEditCategory:Ty,category:ry,categories:Eo,t:pe,language:R}),j&&i(yk,{product:j,position:Z,language:R})]})},Hg=document.getElementById("root");if(!Hg)throw new Error("Could not find root element to mount to");const Bk=yl.createRoot(Hg);Bk.render(i(ro.StrictMode,{children:i(zk,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})});
